(function(E,dt){typeof exports=="object"&&typeof module<"u"?dt(exports):typeof define=="function"&&define.amd?define(["exports"],dt):(E=typeof globalThis<"u"?globalThis:E||self,dt(E["@walletconnect/utils"]={}))})(this,function(E){"use strict";const dt=":";function ri(e){const[t,n]=e.split(dt);return{namespace:t,reference:n}}function Us(e){const{namespace:t,reference:n}=e;return[t,n].join(dt)}function ii(e){const[t,n,r]=e.split(dt);return{namespace:t,reference:n,address:r}}function Is(e){const{namespace:t,reference:n,address:r}=e;return[t,n,r].join(dt)}function oi(e,t){const n=[];return e.forEach(r=>{const i=t(r);n.includes(i)||n.push(i)}),n}function Os(e){const{address:t}=ii(e);return t}function Cs(e){const{namespace:t,reference:n}=ii(e);return Us({namespace:t,reference:n})}function ld(e,t){const{namespace:n,reference:r}=ri(t);return Is({namespace:n,reference:r,address:e})}function dd(e){return oi(e,Os)}function Ts(e){return oi(e,Cs)}function hd(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...i.accounts)}),n}function gd(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...Ts(i.accounts))}),n}function bd(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...cr(r,i))}),n}function cr(e,t){return e.includes(":")?[e]:t.chains||[]}var Ns=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},pd=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),wd=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),yd=function(){function e(t,n,r,i){this.name=t,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return e}(),md=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),Ed=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),xd=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,vd=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,$s=3,Dd=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",xd]],Rs=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Bd(e){return e?Fs(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ed:typeof navigator<"u"?Fs(navigator.userAgent):_d()}function Ad(e){return e!==""&&Dd.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]},!1)}function Fs(e){var t=Ad(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new md;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<$s&&(i=Ns(Ns([],i,!0),Ud($s-i.length),!0)):i=[];var o=i.join("."),s=Sd(e),c=vd.exec(e);return c&&c[1]?new yd(n,o,s,c[1]):new pd(n,o,s)}function Sd(e){for(var t=0,n=Rs.length;t<n;t++){var r=Rs[t],i=r[0],o=r[1],s=o.exec(e);if(s)return i}return null}function _d(){var e=typeof process<"u"&&process.version;return e?new wd(process.version.slice(1)):null}function Ud(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}function Id(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var kt={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var si=function(e,t){return si=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},si(e,t)};function Od(e,t){si(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ci=function(){return ci=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ci.apply(this,arguments)};function Cd(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Td(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function Nd(e,t){return function(n,r){t(n,r,e)}}function $d(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Rd(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(u){try{f(r.next(u))}catch(d){s(d)}}function a(u){try{f(r.throw(u))}catch(d){s(d)}}function f(u){u.done?o(u.value):i(u.value).then(c,a)}f((r=r.apply(e,t||[])).next())})}function Fd(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(f){return function(u){return a([f,u])}}function a(f){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){n.label=f[1];break}if(f[0]===6&&n.label<o[1]){n.label=o[1],o=f;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(f);break}o[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(u){f=[6,u],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Md(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function Pd(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ai(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ms(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function kd(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ms(arguments[t]));return e}function Ld(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,c=o.length;s<c;s++,i++)r[i]=o[s];return r}function An(e){return this instanceof An?(this.v=e,this):new An(e)}function zd(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(l){r[l]&&(i[l]=function(h){return new Promise(function(g,p){o.push([l,h,g,p])>1||c(l,h)})})}function c(l,h){try{a(r[l](h))}catch(g){d(o[0][3],g)}}function a(l){l.value instanceof An?Promise.resolve(l.value.v).then(f,u):d(o[0][2],l)}function f(l){c("next",l)}function u(l){c("throw",l)}function d(l,h){l(h),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Hd(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=e[i]?function(s){return(n=!n)?{value:An(e[i](s)),done:i==="return"}:o?o(s):s}:o}}function jd(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ai=="function"?ai(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(c,a){s=e[o](s),i(c,a,s.done,s.value)})}}function i(o,s,c,a){Promise.resolve(a).then(function(f){o({value:f,done:c})},s)}}function Vd(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function qd(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Kd(e){return e&&e.__esModule?e:{default:e}}function Wd(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Zd(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}var Yd=Object.freeze({__proto__:null,__extends:Od,get __assign(){return ci},__rest:Cd,__decorate:Td,__param:Nd,__metadata:$d,__awaiter:Rd,__generator:Fd,__createBinding:Md,__exportStar:Pd,__values:ai,__read:Ms,__spread:kd,__spreadArrays:Ld,__await:An,__asyncGenerator:zd,__asyncDelegator:Hd,__asyncValues:jd,__makeTemplateObject:Vd,__importStar:qd,__importDefault:Kd,__classPrivateFieldGet:Wd,__classPrivateFieldSet:Zd}),ar=Id(Yd),fi={},Sn={},Ps;function Gd(){if(Ps)return Sn;Ps=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return Sn.delay=e,Sn}var Lt={},ui={},zt={},ks;function Xd(){return ks||(ks=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.ONE_THOUSAND=zt.ONE_HUNDRED=void 0,zt.ONE_HUNDRED=100,zt.ONE_THOUSAND=1e3),zt}var li={},Ls;function Jd(){return Ls||(Ls=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(li)),li}var zs;function Hs(){return zs||(zs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ar;t.__exportStar(Xd(),e),t.__exportStar(Jd(),e)}(ui)),ui}var js;function Qd(){if(js)return Lt;js=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.fromMiliseconds=Lt.toMiliseconds=void 0;const e=Hs();function t(r){return r*e.ONE_THOUSAND}Lt.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return Lt.fromMiliseconds=n,Lt}var Vs;function eh(){return Vs||(Vs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ar;t.__exportStar(Gd(),e),t.__exportStar(Qd(),e)}(fi)),fi}var on={},qs;function th(){if(qs)return on;qs=1,Object.defineProperty(on,"__esModule",{value:!0}),on.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return on.Watch=e,on.default=e,on}var di={},_n={},Ks;function nh(){if(Ks)return _n;Ks=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.IWatch=void 0;class e{}return _n.IWatch=e,_n}var Ws;function rh(){return Ws||(Ws=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),ar.__exportStar(nh(),e)}(di)),di}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ar;t.__exportStar(eh(),e),t.__exportStar(th(),e),t.__exportStar(rh(),e),t.__exportStar(Hs(),e)})(kt);var Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getLocalStorage=Q.getLocalStorageOrThrow=Q.getCrypto=Q.getCryptoOrThrow=gi=Q.getLocation=Q.getLocationOrThrow=hi=Q.getNavigator=Q.getNavigatorOrThrow=cn=Q.getDocument=Q.getDocumentOrThrow=Q.getFromWindowOrThrow=Q.getFromWindow=void 0;function Ht(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}Q.getFromWindow=Ht;function sn(e){const t=Ht(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Q.getFromWindowOrThrow=sn;function ih(){return sn("document")}Q.getDocumentOrThrow=ih;function oh(){return Ht("document")}var cn=Q.getDocument=oh;function sh(){return sn("navigator")}Q.getNavigatorOrThrow=sh;function ch(){return Ht("navigator")}var hi=Q.getNavigator=ch;function ah(){return sn("location")}Q.getLocationOrThrow=ah;function fh(){return Ht("location")}var gi=Q.getLocation=fh;function uh(){return sn("crypto")}Q.getCryptoOrThrow=uh;function lh(){return Ht("crypto")}Q.getCrypto=lh;function dh(){return sn("localStorage")}Q.getLocalStorageOrThrow=dh;function hh(){return Ht("localStorage")}Q.getLocalStorage=hh;var bi={};Object.defineProperty(bi,"__esModule",{value:!0});var Zs=bi.getWindowMetadata=void 0;const Ys=Q;function gh(){let e,t;try{e=Ys.getDocumentOrThrow(),t=Ys.getLocationOrThrow()}catch{return null}function n(){const d=e.getElementsByTagName("link"),l=[];for(let h=0;h<d.length;h++){const g=d[h],p=g.getAttribute("rel");if(p&&p.toLowerCase().indexOf("icon")>-1){const x=g.getAttribute("href");if(x)if(x.toLowerCase().indexOf("https:")===-1&&x.toLowerCase().indexOf("http:")===-1&&x.indexOf("//")!==0){let _=t.protocol+"//"+t.host;if(x.indexOf("/")===0)_+=x;else{const C=t.pathname.split("/");C.pop();const B=C.join("/");_+=B+"/"+x}l.push(_)}else if(x.indexOf("//")===0){const _=t.protocol+x;l.push(_)}else l.push(x)}}return l}function r(...d){const l=e.getElementsByTagName("meta");for(let h=0;h<l.length;h++){const g=l[h],p=["itemprop","property","name"].map(x=>g.getAttribute(x)).filter(x=>x?d.includes(x):!1);if(p.length&&p){const x=g.getAttribute("content");if(x)return x}}return""}function i(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=e.title),d}function o(){return r("description","og:description","twitter:description","keywords")}const s=i(),c=o(),a=t.origin,f=n();return{description:c,url:a,icons:f,name:s}}Zs=bi.getWindowMetadata=gh;var bh=Object.defineProperty,ph=Object.defineProperties,wh=Object.getOwnPropertyDescriptors,Gs=Object.getOwnPropertySymbols,yh=Object.prototype.hasOwnProperty,mh=Object.prototype.propertyIsEnumerable,pi=(e,t,n)=>t in e?bh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xs=(e,t)=>{for(var n in t||(t={}))yh.call(t,n)&&pi(e,n,t[n]);if(Gs)for(var n of Gs(t))mh.call(t,n)&&pi(e,n,t[n]);return e},Eh=(e,t)=>ph(e,wh(t)),Js=(e,t,n)=>pi(e,typeof t!="symbol"?t+"":t,n);const Qs="ReactNative",ye={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},fr=" ",xh=":",ec="/",wi=2,vh=1e3,tc="js";function yi(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ht(){return!cn()&&!!hi()&&navigator.product===Qs}function Dh(){return ht()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Bh(){return ht()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function an(){return!yi()&&!!hi()&&!!cn()}function jt(){return ht()?ye.reactNative:yi()?ye.node:an()?ye.browser:ye.unknown}function Ah(){var e;try{return ht()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function nc(e,t){const n=new URLSearchParams(e);return Object.entries(t).sort(([r],[i])=>r.localeCompare(i)).forEach(([r,i])=>{i!=null&&n.set(r,String(i))}),n.toString()}function Sh(e){var t,n;const r=rc();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(i=>i!=="")),Eh(Xs(Xs({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),e||r}}function rc(){return Zs()||{name:"",description:"",url:"",icons:[""]}}function _h(e,t){var n;const r=jt(),i={protocol:e,version:t,env:r};return r==="browser"&&(i.host=((n=gi())==null?void 0:n.host)||"unknown"),i}function ic(){if(jt()===ye.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=Bd();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function oc(){var e;const t=jt();return t===ye.browser?[t,((e=gi())==null?void 0:e.host)||"unknown"].join(":"):t}function sc(e,t,n){const r=ic(),i=oc();return[[e,t].join("-"),[tc,n].join("-"),r,i].join("/")}function Uh({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:i,projectId:o,useOnCloseEvent:s,bundleId:c,packageName:a}){const f=n.split("?"),u=sc(e,t,r),d={auth:i,ua:u,projectId:o,useOnCloseEvent:s||void 0,packageName:a||void 0,bundleId:c||void 0},l=nc(f[1]||"",d);return f[0]+"?"+l}function Ih(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,n].join("://")}function Oh(e,t,n){if(!e[t]||typeof e[t]!==n)throw new Error(`Missing or invalid "${t}" param`)}function cc(e,t=wi){return ac(e.split(ec),t)}function Ch(e){return cc(e).join(fr)}function gt(e,t){return e.filter(n=>t.includes(n)).length===e.length}function ac(e,t=wi){return e.slice(Math.max(e.length-t,0))}function Th(e){return Object.fromEntries(e.entries())}function Nh(e){return new Map(Object.entries(e))}function $h(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=t(e[r])}),n}const Rh=e=>e;function fc(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function Fh(e){return e.split(fr).map(t=>fc(t)).join(fr)}function Mh(e=kt.FIVE_MINUTES,t){const n=kt.toMiliseconds(e||kt.FIVE_MINUTES);let r,i,o,s;return{resolve:c=>{o&&r&&(clearTimeout(o),r(c),s=Promise.resolve(c))},reject:c=>{o&&i&&(clearTimeout(o),i(c))},done:()=>new Promise((c,a)=>{if(s)return c(s);o=setTimeout(()=>{const f=new Error(t);s=Promise.reject(f),a(f)},n),r=c,i=a})}}function Ph(e,t,n){return new Promise(async(r,i)=>{const o=setTimeout(()=>i(new Error(n)),t);try{const s=await e;r(s)}catch(s){i(s)}clearTimeout(o)})}function mi(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function kh(e){return mi("topic",e)}function Lh(e){return mi("id",e)}function zh(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function Hh(e,t){return kt.fromMiliseconds((t||Date.now())+kt.toMiliseconds(e))}function jh(e){return Date.now()>=kt.toMiliseconds(e)}function Vh(e,t){return`${e}${t?`:${t}`:""}`}function Me(e=[],t=[]){return[...new Set([...e,...t])]}async function qh({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,o=i?.href;if(typeof o!="string")return;const s=uc(o,e,t),c=jt();if(c===ye.browser){if(!((r=cn())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}lc(s)}else c===ye.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(i){console.error(i)}}function uc(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){const o=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${o}${gc(r,!0)}`}else i=`${i}/wc?${r}`;return i}function lc(e){let t="_self";hc()?t="_top":(dc()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function Kh(e,t){let n="";try{if(an()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function Ei(e,t){return e.filter(n=>t.includes(n))}function Wh(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function Zh(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function Yh(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function dc(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function hc(){try{return window.self!==window.top}catch{return!1}}function gc(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function xi(e){return Buffer.from(e,"base64").toString("utf-8")}function Gh(e){return new Promise(t=>setTimeout(t,e))}class Xh{constructor({limit:t}){Js(this,"limit"),Js(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(t)}}has(t){return this.set.has(t)}}const ur=BigInt(2**32-1),bc=BigInt(32);function pc(e,t=!1){return t?{h:Number(e&ur),l:Number(e>>bc&ur)}:{h:Number(e>>bc&ur)|0,l:Number(e&ur)|0}}function wc(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let o=0;o<n;o++){const{h:s,l:c}=pc(e[o],t);[r[o],i[o]]=[s,c]}return[r,i]}const yc=(e,t,n)=>e>>>n,mc=(e,t,n)=>e<<32-n|t>>>n,bt=(e,t,n)=>e>>>n|t<<32-n,pt=(e,t,n)=>e<<32-n|t>>>n,Un=(e,t,n)=>e<<64-n|t>>>n-32,In=(e,t,n)=>e>>>n-32|t<<64-n,Jh=(e,t)=>t,Qh=(e,t)=>e,e0=(e,t,n)=>e<<n|t>>>32-n,t0=(e,t,n)=>t<<n|e>>>32-n,n0=(e,t,n)=>t<<n-32|e>>>64-n,r0=(e,t,n)=>e<<n-32|t>>>64-n;function je(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const vi=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Di=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,i0=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),o0=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,s0=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),c0=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,fn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function wt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ge(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function me(e,...t){if(!wt(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function On(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ge(e.outputLen),Ge(e.blockLen)}function yt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Bi(e,t){me(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Cn(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Pe(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Ai(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Xe(e,t){return e<<32-t|e>>>t}const Ec=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function xc(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const tt=Ec?e=>e:e=>xc(e);function a0(e){for(let t=0;t<e.length;t++)e[t]=xc(e[t]);return e}const mt=Ec?e=>e:a0,vc=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",f0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ke(e){if(me(e),vc)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=f0[e[n]];return t}const nt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Dc(e){if(e>=nt._0&&e<=nt._9)return e-nt._0;if(e>=nt.A&&e<=nt.F)return e-(nt.A-10);if(e>=nt.a&&e<=nt.f)return e-(nt.a-10)}function Et(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(vc)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=Dc(e.charCodeAt(o)),c=Dc(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function Vt(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Ve(e){return typeof e=="string"&&(e=Vt(e)),me(e),e}function ee(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];me(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}class lr{}function Tn(e){const t=r=>e().update(Ve(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function u0(e){const t=(r,i)=>e(i).update(Ve(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function qe(e=32){if(fn&&typeof fn.getRandomValues=="function")return fn.getRandomValues(new Uint8Array(e));if(fn&&typeof fn.randomBytes=="function")return Uint8Array.from(fn.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const l0=BigInt(0),Nn=BigInt(1),d0=BigInt(2),h0=BigInt(7),g0=BigInt(256),b0=BigInt(113),Bc=[],Ac=[],Sc=[];for(let e=0,t=Nn,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Bc.push(2*(5*r+n)),Ac.push((e+1)*(e+2)/2%64);let i=l0;for(let o=0;o<7;o++)t=(t<<Nn^(t>>h0)*b0)%g0,t&d0&&(i^=Nn<<(Nn<<BigInt(o))-Nn);Sc.push(i)}const _c=wc(Sc,!0),p0=_c[0],w0=_c[1],Uc=(e,t,n)=>n>32?n0(e,t,n):e0(e,t,n),Ic=(e,t,n)=>n>32?r0(e,t,n):t0(e,t,n);function y0(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let s=0;s<10;s++)n[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const c=(s+8)%10,a=(s+2)%10,f=n[a],u=n[a+1],d=Uc(f,u,1)^n[c],l=Ic(f,u,1)^n[c+1];for(let h=0;h<50;h+=10)e[s+h]^=d,e[s+h+1]^=l}let i=e[2],o=e[3];for(let s=0;s<24;s++){const c=Ac[s],a=Uc(i,o,c),f=Ic(i,o,c),u=Bc[s];i=e[u],o=e[u+1],e[u]=a,e[u+1]=f}for(let s=0;s<50;s+=10){for(let c=0;c<10;c++)n[c]=e[s+c];for(let c=0;c<10;c++)e[s+c]^=~n[(c+2)%10]&n[(c+4)%10]}e[0]^=p0[r],e[1]^=w0[r]}Pe(n)}class Si extends lr{constructor(t,n,r,i=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=o,Ge(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Cn(this.state)}clone(){return this._cloneInto()}keccak(){mt(this.state32),y0(this.state32,this.rounds),mt(this.state32),this.posOut=0,this.pos=0}update(t){yt(this),t=Ve(t),me(t);const{blockLen:n,state:r}=this,i=t.length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);for(let c=0;c<s;c++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){yt(this,!1),me(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,o=t.length;i<o;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,o-i);t.set(n.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ge(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Bi(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Pe(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new Si(n,r,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}}const m0=(e,t,n)=>Tn(()=>new Si(t,e,n)),_i=m0(1,136,256/8);function $n(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function Ui(e){return $n(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Oc="2.36.0";let Ii={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Oc}`};class qt extends Error{constructor(t,n={}){const r=n.cause instanceof qt?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof qt&&n.cause.docsPath||n.docsPath,o=Ii.getDocsUrl?.({...n,docsPath:i}),s=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...Ii.version?[`Version: ${Ii.version}`]:[]].join(`
`);super(s,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Oc}walk(t){return Cc(this,t)}}function Cc(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Cc(e.cause,t):t?null:e}class Tc extends qt{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function un(e,{dir:t,size:n=32}={}){return typeof e=="string"?E0(e,{dir:t,size:n}):x0(e,{dir:t,size:n})}function E0(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Tc({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function x0(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Tc({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const o=t==="right";r[o?i:n-i-1]=e[o?i:e.length-i-1]}return r}class v0 extends qt{constructor({max:t,min:n,signed:r,size:i,value:o}){super(`Number "${o}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class D0 extends qt{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function ln(e,{size:t}){if(Ui(e)>t)throw new D0({givenSize:Ui(e),maxSize:t})}function Oi(e,t={}){const{signed:n}=t;t.size&&ln(e,{size:t.size});const r=BigInt(e);if(!n)return r;const i=(e.length-2)/2,o=(1n<<BigInt(i)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function B0(e,t={}){return Number(Oi(e,t))}const A0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ci(e,t={}){return typeof e=="number"||typeof e=="bigint"?Ti(e,t):typeof e=="string"?U0(e,t):typeof e=="boolean"?S0(e,t):Nc(e,t)}function S0(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(ln(n,{size:t.size}),un(n,{size:t.size})):n}function Nc(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=A0[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(ln(r,{size:t.size}),un(r,{dir:"right",size:t.size})):r}function Ti(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof o=="bigint"&&n?-o-1n:0;if(o&&i>o||i<s){const a=typeof e=="bigint"?"n":"";throw new v0({max:o?`${o}${a}`:void 0,min:`${s}${a}`,signed:n,size:r,value:`${e}${a}`})}const c=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?un(c,{size:r}):c}const _0=new TextEncoder;function U0(e,t={}){const n=_0.encode(e);return Nc(n,t)}const I0=new TextEncoder;function O0(e,t={}){return typeof e=="number"||typeof e=="bigint"?T0(e,t):typeof e=="boolean"?C0(e,t):$n(e)?Rc(e,t):Fc(e,t)}function C0(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(ln(n,{size:t.size}),un(n,{size:t.size})):n}const rt={zero:48,nine:57,A:65,F:70,a:97,f:102};function $c(e){if(e>=rt.zero&&e<=rt.nine)return e-rt.zero;if(e>=rt.A&&e<=rt.F)return e-(rt.A-10);if(e>=rt.a&&e<=rt.f)return e-(rt.a-10)}function Rc(e,t={}){let n=e;t.size&&(ln(n,{size:t.size}),n=un(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,o=new Uint8Array(i);for(let s=0,c=0;s<i;s++){const a=$c(r.charCodeAt(c++)),f=$c(r.charCodeAt(c++));if(a===void 0||f===void 0)throw new qt(`Invalid byte sequence ("${r[c-2]}${r[c-1]}" in "${r}").`);o[s]=a*16+f}return o}function T0(e,t){const n=Ti(e,t);return Rc(n)}function Fc(e,t={}){const n=I0.encode(e);return typeof t.size=="number"?(ln(n,{size:t.size}),un(n,{dir:"right",size:t.size})):n}function Mc(e,t){const n=t||"hex",r=_i($n(e,{strict:!1})?O0(e):e);return n==="bytes"?r:Ci(r)}class Pc extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Ni=new Pc(8192);function N0(e,t){if(Ni.has(`${e}.${t}`))return Ni.get(`${e}.${t}`);const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),r=Mc(Fc(n),"bytes"),i=(t?n.substring(`${t}0x`.length):n).split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&i[s]&&(i[s]=i[s].toUpperCase()),(r[s>>1]&15)>=8&&i[s+1]&&(i[s+1]=i[s+1].toUpperCase());const o=`0x${i.join("")}`;return Ni.set(`${e}.${t}`,o),o}function $0(e){const t=Mc(`0x${e.substring(4)}`).substring(26);return N0(`0x${t}`)}async function R0({hash:e,signature:t}){const n=$n(e)?e:Ci(e),{secp256k1:r}=await Promise.resolve().then(function(){return bg});return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:f,s:u,v:d,yParity:l}=t,h=Number(l??d),g=kc(h);return new r.Signature(Oi(f),Oi(u)).addRecoveryBit(g)}const s=$n(t)?t:Ci(t);if(Ui(s)!==65)throw new Error("invalid signature length");const c=B0(`0x${s.slice(130)}`),a=kc(c);return r.Signature.fromCompact(s.substring(2,130)).addRecoveryBit(a)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function kc(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function F0({hash:e,signature:t}){return $0(await R0({hash:e,signature:t}))}function M0(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}function P0(e,t,n){return e&t^~e&n}function k0(e,t,n){return e&t^e&n^t&n}class Lc extends lr{constructor(t,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=Ai(this.buffer)}update(t){yt(this),t=Ve(t),me(t);const{view:n,buffer:r,blockLen:i}=this,o=t.length;for(let s=0;s<o;){const c=Math.min(i-this.pos,o-s);if(c===i){const a=Ai(t);for(;i<=o-s;s+=i)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){yt(this),Bi(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,Pe(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(r,0),s=0);for(let d=s;d<i;d++)n[d]=0;M0(r,i-8,BigInt(this.length*8),o),this.process(r,0);const c=Ai(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<f;d++)c.setUint32(4*d,u[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:c}=this;return t.destroyed=s,t.finished=o,t.length=i,t.pos=c,i%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const xt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),le=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),de=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),L0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vt=new Uint32Array(64);class z0 extends Lc{constructor(t=32){super(64,t,8,!1),this.A=xt[0]|0,this.B=xt[1]|0,this.C=xt[2]|0,this.D=xt[3]|0,this.E=xt[4]|0,this.F=xt[5]|0,this.G=xt[6]|0,this.H=xt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:o,F:s,G:c,H:a}=this;return[t,n,r,i,o,s,c,a]}set(t,n,r,i,o,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let d=0;d<16;d++,n+=4)vt[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const l=vt[d-15],h=vt[d-2],g=Xe(l,7)^Xe(l,18)^l>>>3,p=Xe(h,17)^Xe(h,19)^h>>>10;vt[d]=p+vt[d-7]+g+vt[d-16]|0}let{A:r,B:i,C:o,D:s,E:c,F:a,G:f,H:u}=this;for(let d=0;d<64;d++){const l=Xe(c,6)^Xe(c,11)^Xe(c,25),h=u+l+P0(c,a,f)+L0[d]+vt[d]|0,p=(Xe(r,2)^Xe(r,13)^Xe(r,22))+k0(r,i,o)|0;u=f,f=a,a=c,c=s+h|0,s=o,o=i,i=r,r=h+p|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(r,i,o,s,c,a,f,u)}roundClean(){Pe(vt)}destroy(){this.set(0,0,0,0,0,0,0,0),Pe(this.buffer)}}const zc=wc(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),H0=zc[0],j0=zc[1],Dt=new Uint32Array(80),Bt=new Uint32Array(80);class $i extends Lc{constructor(t=64){super(128,t,16,!1),this.Ah=de[0]|0,this.Al=de[1]|0,this.Bh=de[2]|0,this.Bl=de[3]|0,this.Ch=de[4]|0,this.Cl=de[5]|0,this.Dh=de[6]|0,this.Dl=de[7]|0,this.Eh=de[8]|0,this.El=de[9]|0,this.Fh=de[10]|0,this.Fl=de[11]|0,this.Gh=de[12]|0,this.Gl=de[13]|0,this.Hh=de[14]|0,this.Hl=de[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:c,Dl:a,Eh:f,El:u,Fh:d,Fl:l,Gh:h,Gl:g,Hh:p,Hl:x}=this;return[t,n,r,i,o,s,c,a,f,u,d,l,h,g,p,x]}set(t,n,r,i,o,s,c,a,f,u,d,l,h,g,p,x){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=a|0,this.Eh=f|0,this.El=u|0,this.Fh=d|0,this.Fl=l|0,this.Gh=h|0,this.Gl=g|0,this.Hh=p|0,this.Hl=x|0}process(t,n){for(let B=0;B<16;B++,n+=4)Dt[B]=t.getUint32(n),Bt[B]=t.getUint32(n+=4);for(let B=16;B<80;B++){const T=Dt[B-15]|0,R=Bt[B-15]|0,L=bt(T,R,1)^bt(T,R,8)^yc(T,R,7),k=pt(T,R,1)^pt(T,R,8)^mc(T,R,7),M=Dt[B-2]|0,I=Bt[B-2]|0,K=bt(M,I,19)^Un(M,I,61)^yc(M,I,6),q=pt(M,I,19)^In(M,I,61)^mc(M,I,6),N=i0(k,q,Bt[B-7],Bt[B-16]),y=o0(N,L,K,Dt[B-7],Dt[B-16]);Dt[B]=y|0,Bt[B]=N|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:c,Cl:a,Dh:f,Dl:u,Eh:d,El:l,Fh:h,Fl:g,Gh:p,Gl:x,Hh:_,Hl:C}=this;for(let B=0;B<80;B++){const T=bt(d,l,14)^bt(d,l,18)^Un(d,l,41),R=pt(d,l,14)^pt(d,l,18)^In(d,l,41),L=d&h^~d&p,k=l&g^~l&x,M=s0(C,R,k,j0[B],Bt[B]),I=c0(M,_,T,L,H0[B],Dt[B]),K=M|0,q=bt(r,i,28)^Un(r,i,34)^Un(r,i,39),N=pt(r,i,28)^In(r,i,34)^In(r,i,39),y=r&o^r&c^o&c,m=i&s^i&a^s&a;_=p|0,C=x|0,p=h|0,x=g|0,h=d|0,g=l|0,{h:d,l}=je(f|0,u|0,I|0,K|0),f=c|0,u=a|0,c=o|0,a=s|0,o=r|0,s=i|0;const b=vi(K,N,m);r=Di(b,I,q,y),i=b|0}({h:r,l:i}=je(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=je(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:a}=je(this.Ch|0,this.Cl|0,c|0,a|0),{h:f,l:u}=je(this.Dh|0,this.Dl|0,f|0,u|0),{h:d,l}=je(this.Eh|0,this.El|0,d|0,l|0),{h,l:g}=je(this.Fh|0,this.Fl|0,h|0,g|0),{h:p,l:x}=je(this.Gh|0,this.Gl|0,p|0,x|0),{h:_,l:C}=je(this.Hh|0,this.Hl|0,_|0,C|0),this.set(r,i,o,s,c,a,f,u,d,l,h,g,p,x,_,C)}roundClean(){Pe(Dt,Bt)}destroy(){Pe(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class V0 extends $i{constructor(){super(48),this.Ah=le[0]|0,this.Al=le[1]|0,this.Bh=le[2]|0,this.Bl=le[3]|0,this.Ch=le[4]|0,this.Cl=le[5]|0,this.Dh=le[6]|0,this.Dl=le[7]|0,this.Eh=le[8]|0,this.El=le[9]|0,this.Fh=le[10]|0,this.Fl=le[11]|0,this.Gh=le[12]|0,this.Gl=le[13]|0,this.Hh=le[14]|0,this.Hl=le[15]|0}}const he=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class q0 extends $i{constructor(){super(32),this.Ah=he[0]|0,this.Al=he[1]|0,this.Bh=he[2]|0,this.Bl=he[3]|0,this.Ch=he[4]|0,this.Cl=he[5]|0,this.Dh=he[6]|0,this.Dl=he[7]|0,this.Eh=he[8]|0,this.El=he[9]|0,this.Fh=he[10]|0,this.Fl=he[11]|0,this.Gh=he[12]|0,this.Gl=he[13]|0,this.Hh=he[14]|0,this.Hl=he[15]|0}}const At=Tn(()=>new z0),K0=Tn(()=>new $i),W0=Tn(()=>new V0),Z0=Tn(()=>new q0),dr=At,Ri=BigInt(0),Fi=BigInt(1);function hr(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function Kt(e,t,n=""){const r=wt(e),i=e?.length,o=t!==void 0;if(!r||o&&i!==t){const s=n&&`"${n}" `,c=o?` of length ${t}`:"",a=r?`length=${i}`:`type=${typeof e}`;throw new Error(s+"expected Uint8Array"+c+", got "+a)}return e}function gr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Hc(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Ri:BigInt("0x"+e)}function Wt(e){return Hc(ke(e))}function jc(e){return me(e),Hc(ke(Uint8Array.from(e).reverse()))}function br(e,t){return Et(e.toString(16).padStart(t*2,"0"))}function Vc(e,t){return br(e,t).reverse()}function ne(e,t,n){let r;if(typeof t=="string")try{r=Et(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(wt(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}const Mi=e=>typeof e=="bigint"&&Ri<=e;function Pi(e,t,n){return Mi(e)&&Mi(t)&&Mi(n)&&t<=e&&e<n}function Y0(e,t,n,r){if(!Pi(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function qc(e){let t;for(t=0;e>Ri;e>>=Fi,t+=1);return t}const Rn=e=>(Fi<<BigInt(e))-Fi;function G0(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),i=h=>Uint8Array.of(h);let o=r(e),s=r(e),c=0;const a=()=>{o.fill(1),s.fill(0),c=0},f=(...h)=>n(s,o,...h),u=(h=r(0))=>{s=f(i(0),h),o=f(),h.length!==0&&(s=f(i(1),h),o=f())},d=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const g=[];for(;h<t;){o=f();const p=o.slice();g.push(p),h+=o.length}return ee(...g)};return(h,g)=>{a(),u(h);let p;for(;!(p=g(d()));)u();return a(),p}}function X0(e){return typeof e=="function"&&Number.isSafeInteger(e.outputLen)}function pr(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(i,o,s){const c=e[i];if(s&&c===void 0)return;const a=typeof c;if(a!==o||c===null)throw new Error(`param "${i}" is invalid: expected ${o}, got ${a}`)}Object.entries(t).forEach(([i,o])=>r(i,o,!1)),Object.entries(n).forEach(([i,o])=>r(i,o,!0))}function Kc(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}const J0="0.1.1";function Q0(){return J0}class Ee extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof Ee){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),i=n.cause instanceof Ee&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${i??""}`,c=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${s}`:void 0]:[]].filter(a=>typeof a=="string").join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Q0()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=i,this.shortMessage=t}walk(t){return Wc(this,t)}}function Wc(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Wc(e.cause,t):t?null:e}function e1(e,t){if(Gc(e)>t)throw new a1({givenSize:Gc(e),maxSize:t})}const it={zero:48,nine:57,A:65,F:70,a:97,f:102};function Zc(e){if(e>=it.zero&&e<=it.nine)return e-it.zero;if(e>=it.A&&e<=it.F)return e-(it.A-10);if(e>=it.a&&e<=it.f)return e-(it.a-10)}function t1(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new f1({size:e.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let o=0;o<r;o++){const s=n==="right";i[s?o:r-o-1]=e[s?o:e.length-o-1]}return i}function ki(e,t){if(zi(e)>t)throw new p1({givenSize:zi(e),maxSize:t})}function Yc(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const i=e.replace("0x","");if(i.length>r*2)throw new w1({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const n1=new TextEncoder;function r1(e){return e instanceof Uint8Array?e:typeof e=="string"?o1(e):i1(e)}function i1(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function o1(e,t={}){const{size:n}=t;let r=e;n&&(ki(e,n),r=Li(e,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const o=i.length/2,s=new Uint8Array(o);for(let c=0,a=0;c<o;c++){const f=Zc(i.charCodeAt(a++)),u=Zc(i.charCodeAt(a++));if(f===void 0||u===void 0)throw new Ee(`Invalid byte sequence ("${i[a-2]}${i[a-1]}" in "${i}").`);s[c]=f*16+u}return s}function s1(e,t={}){const{size:n}=t,r=n1.encode(e);return typeof n=="number"?(e1(r,n),c1(r,n)):r}function c1(e,t){return t1(e,{dir:"right",size:t})}function Gc(e){return e.length}class a1 extends Ee{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class f1 extends Ee{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}const u1=new TextEncoder,l1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Xc(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function d1(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(ki(n,t.size),wr(n,t.size)):n}function Jc(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=l1[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(ki(r,t.size),Li(r,t.size)):r}function h1(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof o=="bigint"&&n?-o-1n:0;if(o&&i>o||i<s){const f=typeof e=="bigint"?"n":"";throw new b1({max:o?`${o}${f}`:void 0,min:`${s}${f}`,signed:n,size:r,value:`${e}${f}`})}const a=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?wr(a,r):a}function g1(e,t={}){return Jc(u1.encode(e),t)}function wr(e,t){return Yc(e,{dir:"left",size:t})}function Li(e,t){return Yc(e,{dir:"right",size:t})}function zi(e){return Math.ceil((e.length-2)/2)}class b1 extends Ee{constructor({max:t,min:n,signed:r,size:i,value:o}){super(`Number \`${o}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class p1 extends Ee{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class w1 extends Ee{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}new Pc(128),Ti(0,{size:32});function y1(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=_i(r1(e));return n==="Bytes"?r:Jc(r)}class m1 extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Hi={checksum:new m1(8192)}.checksum,E1=/^0x[a-fA-F0-9]{40}$/;function Qc(e,t={}){const{strict:n=!0}=t;if(!E1.test(e))throw new ea({address:e,cause:new v1});if(n){if(e.toLowerCase()===e)return;if(x1(e)!==e)throw new ea({address:e,cause:new D1})}}function x1(e){if(Hi.has(e))return Hi.get(e);Qc(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=y1(s1(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const i=`0x${r.join("")}`;return Hi.set(e,i),i}class ea extends Ee{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class v1 extends Ee{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class D1 extends Ee{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const B1=/^(.*)\[([0-9]*)\]$/,A1=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,S1=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function ji(e,t){if(e.length!==t.length)throw new U1({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=t[r];n.push(ji.encode(i,o))}return Xc(...n)}(function(e){function t(n,r,i=!1){if(n==="address"){const a=r;return Qc(a),wr(a.toLowerCase(),i?32:0)}if(n==="string")return g1(r);if(n==="bytes")return r;if(n==="bool")return wr(d1(r),i?32:1);const o=n.match(S1);if(o){const[a,f,u="256"]=o,d=Number.parseInt(u,10)/8;return h1(r,{size:i?32:d,signed:f==="int"})}const s=n.match(A1);if(s){const[a,f]=s;if(Number.parseInt(f,10)!==(r.length-2)/2)throw new _1({expectedSize:Number.parseInt(f,10),value:r});return Li(r,i?32:0)}const c=n.match(B1);if(c&&Array.isArray(r)){const[a,f]=c,u=[];for(let d=0;d<r.length;d++)u.push(t(f,r[d],!0));return u.length===0?"0x":Xc(...u)}throw new I1(n)}e.encode=t})(ji||(ji={}));class _1 extends Ee{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${zi(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class U1 extends Ee{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class I1 extends Ee{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class ta extends lr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,On(t);const r=Ve(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?t.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),Pe(o)}update(t){return yt(this),this.iHash.update(t),this}digestInto(t){yt(this),me(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Fn=(e,t,n)=>new ta(e,t).update(n).digest();Fn.create=(e,t)=>new ta(e,t);const Be=BigInt(0),xe=BigInt(1),Zt=BigInt(2),na=BigInt(3),ra=BigInt(4),ia=BigInt(5),O1=BigInt(7),oa=BigInt(8),C1=BigInt(9),sa=BigInt(16);function Ue(e,t){const n=e%t;return n>=Be?n:t+n}function Le(e,t,n){let r=e;for(;t-- >Be;)r*=r,r%=n;return r}function ca(e,t){if(e===Be)throw new Error("invert: expected non-zero number");if(t<=Be)throw new Error("invert: expected positive modulus, got "+t);let n=Ue(e,t),r=t,i=Be,o=xe;for(;n!==Be;){const c=r/n,a=r%n,f=i-o*c;r=n,n=a,i=o,o=f}if(r!==xe)throw new Error("invert: does not exist");return Ue(i,t)}function Vi(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function aa(e,t){const n=(e.ORDER+xe)/ra,r=e.pow(t,n);return Vi(e,r,t),r}function T1(e,t){const n=(e.ORDER-ia)/oa,r=e.mul(t,Zt),i=e.pow(r,n),o=e.mul(t,i),s=e.mul(e.mul(o,Zt),i),c=e.mul(o,e.sub(s,e.ONE));return Vi(e,c,t),c}function N1(e){const t=Mn(e),n=fa(e),r=n(t,t.neg(t.ONE)),i=n(t,r),o=n(t,t.neg(r)),s=(e+O1)/sa;return(c,a)=>{let f=c.pow(a,s),u=c.mul(f,r);const d=c.mul(f,i),l=c.mul(f,o),h=c.eql(c.sqr(u),a),g=c.eql(c.sqr(d),a);f=c.cmov(f,u,h),u=c.cmov(l,d,g);const p=c.eql(c.sqr(u),a),x=c.cmov(f,u,p);return Vi(c,x,a),x}}function fa(e){if(e<na)throw new Error("sqrt is not defined for small field");let t=e-xe,n=0;for(;t%Zt===Be;)t/=Zt,n++;let r=Zt;const i=Mn(e);for(;la(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return aa;let o=i.pow(r,t);const s=(t+xe)/Zt;return function(a,f){if(a.is0(f))return f;if(la(a,f)!==1)throw new Error("Cannot find square root");let u=n,d=a.mul(a.ONE,o),l=a.pow(f,t),h=a.pow(f,s);for(;!a.eql(l,a.ONE);){if(a.is0(l))return a.ZERO;let g=1,p=a.sqr(l);for(;!a.eql(p,a.ONE);)if(g++,p=a.sqr(p),g===u)throw new Error("Cannot find square root");const x=xe<<BigInt(u-g-1),_=a.pow(d,x);u=g,d=a.sqr(_),l=a.mul(l,d),h=a.mul(h,_)}return h}}function $1(e){return e%ra===na?aa:e%oa===ia?T1:e%sa===C1?N1(e):fa(e)}const R1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ua(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=R1.reduce((r,i)=>(r[i]="function",r),t);return pr(e,n),e}function F1(e,t,n){if(n<Be)throw new Error("invalid exponent, negatives unsupported");if(n===Be)return e.ONE;if(n===xe)return t;let r=e.ONE,i=t;for(;n>Be;)n&xe&&(r=e.mul(r,i)),i=e.sqr(i),n>>=xe;return r}function yr(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((s,c,a)=>e.is0(c)?s:(r[a]=s,e.mul(s,c)),e.ONE),o=e.inv(i);return t.reduceRight((s,c,a)=>e.is0(c)?s:(r[a]=e.mul(s,r[a]),e.mul(s,c)),o),r}function la(e,t){const n=(e.ORDER-xe)/Zt,r=e.pow(t,n),i=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),s=e.eql(r,e.neg(e.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function da(e,t){t!==void 0&&Ge(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Mn(e,t,n=!1,r={}){if(e<=Be)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,o,s=!1,c;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const l=t;l.BITS&&(i=l.BITS),l.sqrt&&(o=l.sqrt),typeof l.isLE=="boolean"&&(n=l.isLE),typeof l.modFromBytes=="boolean"&&(s=l.modFromBytes),c=l.allowedLengths}else typeof t=="number"&&(i=t),r.sqrt&&(o=r.sqrt);const{nBitLength:a,nByteLength:f}=da(e,i);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const d=Object.freeze({ORDER:e,isLE:n,BITS:a,BYTES:f,MASK:Rn(a),ZERO:Be,ONE:xe,allowedLengths:c,create:l=>Ue(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return Be<=l&&l<e},is0:l=>l===Be,isValidNot0:l=>!d.is0(l)&&d.isValid(l),isOdd:l=>(l&xe)===xe,neg:l=>Ue(-l,e),eql:(l,h)=>l===h,sqr:l=>Ue(l*l,e),add:(l,h)=>Ue(l+h,e),sub:(l,h)=>Ue(l-h,e),mul:(l,h)=>Ue(l*h,e),pow:(l,h)=>F1(d,l,h),div:(l,h)=>Ue(l*ca(h,e),e),sqrN:l=>l*l,addN:(l,h)=>l+h,subN:(l,h)=>l-h,mulN:(l,h)=>l*h,inv:l=>ca(l,e),sqrt:o||(l=>(u||(u=$1(e)),u(d,l))),toBytes:l=>n?Vc(l,f):br(l,f),fromBytes:(l,h=!0)=>{if(c){if(!c.includes(l.length)||l.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+l.length);const p=new Uint8Array(f);p.set(l,n?0:p.length-l.length),l=p}if(l.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+l.length);let g=n?jc(l):Wt(l);if(s&&(g=Ue(g,e)),!h&&!d.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:l=>yr(d,l),cmov:(l,h,g)=>g?h:l});return Object.freeze(d)}function ha(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function ga(e){const t=ha(e);return t+Math.ceil(t/2)}function ba(e,t,n=!1){const r=e.length,i=ha(t),o=ga(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const s=n?jc(e):Wt(e),c=Ue(s,t-xe)+xe;return n?Vc(c,i):br(c,i)}const dn=BigInt(0),Yt=BigInt(1);function mr(e,t){const n=t.negate();return e?n:t}function qi(e,t){const n=yr(e.Fp,t.map(r=>r.Z));return t.map((r,i)=>e.fromAffine(r.toAffine(n[i])))}function pa(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Ki(e,t){pa(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,o=Rn(e),s=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:i,shiftBy:s}}function wa(e,t,n){const{windowSize:r,mask:i,maxNumber:o,shiftBy:s}=n;let c=Number(e&i),a=e>>s;c>r&&(c-=o,a+=Yt);const f=t*r,u=f+Math.abs(c)-1,d=c===0,l=c<0,h=t%2!==0;return{nextN:a,offset:u,isZero:d,isNeg:l,isNegF:h,offsetF:f}}function M1(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function P1(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Wi=new WeakMap,ya=new WeakMap;function Zi(e){return ya.get(e)||1}function ma(e){if(e!==dn)throw new Error("invalid wNAF")}class k1{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let i=t;for(;n>dn;)n&Yt&&(r=r.add(i)),i=i.double(),n>>=Yt;return r}precomputeWindow(t,n){const{windows:r,windowSize:i}=Ki(n,this.bits),o=[];let s=t,c=s;for(let a=0;a<r;a++){c=s,o.push(c);for(let f=1;f<i;f++)c=c.add(s),o.push(c);s=c.double()}return o}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,o=this.BASE;const s=Ki(t,this.bits);for(let c=0;c<s.windows;c++){const{nextN:a,offset:f,isZero:u,isNeg:d,isNegF:l,offsetF:h}=wa(r,c,s);r=a,u?o=o.add(mr(l,n[h])):i=i.add(mr(d,n[f]))}return ma(r),{p:i,f:o}}wNAFUnsafe(t,n,r,i=this.ZERO){const o=Ki(t,this.bits);for(let s=0;s<o.windows&&r!==dn;s++){const{nextN:c,offset:a,isZero:f,isNeg:u}=wa(r,s,o);if(r=c,!f){const d=n[a];i=i.add(u?d.negate():d)}}return ma(r),i}getPrecomputes(t,n,r){let i=Wi.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(i=r(i)),Wi.set(n,i))),i}cached(t,n,r){const i=Zi(t);return this.wNAF(i,this.getPrecomputes(i,t,r),n)}unsafe(t,n,r,i){const o=Zi(t);return o===1?this._unsafeLadder(t,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,r),n,i)}createCache(t,n){pa(n,this.bits),ya.set(t,n),Wi.delete(t)}hasCache(t){return Zi(t)!==1}}function L1(e,t,n,r){let i=t,o=e.ZERO,s=e.ZERO;for(;n>dn||r>dn;)n&Yt&&(o=o.add(i)),r&Yt&&(s=s.add(i)),i=i.double(),n>>=Yt,r>>=Yt;return{p1:o,p2:s}}function z1(e,t,n,r){M1(n,e),P1(r,t);const i=n.length,o=r.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,c=qc(BigInt(i));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const f=Rn(a),u=new Array(Number(f)+1).fill(s),d=Math.floor((t.BITS-1)/a)*a;let l=s;for(let h=d;h>=0;h-=a){u.fill(s);for(let p=0;p<o;p++){const x=r[p],_=Number(x>>BigInt(h)&f);u[_]=u[_].add(n[p])}let g=s;for(let p=u.length-1,x=s;p>0;p--)x=x.add(u[p]),g=g.add(x);if(l=l.add(g),h!==0)for(let p=0;p<a;p++)l=l.double()}return l}function Ea(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return ua(t),t}else return Mn(e,{isLE:n})}function H1(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const f=t[a];if(!(typeof f=="bigint"&&f>dn))throw new Error(`CURVE.${a} must be positive bigint`)}const i=Ea(t.p,n.Fp,r),o=Ea(t.n,n.Fn,r),c=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(const a of c)if(!i.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:i,Fn:o}}const xa=(e,t)=>(e+(e>=0?t:-t)/Je)/t;function j1(e,t,n){const[[r,i],[o,s]]=t,c=xa(s*e,n),a=xa(-i*e,n);let f=e-c*r-a*o,u=-c*i-a*s;const d=f<Ke,l=u<Ke;d&&(f=-f),l&&(u=-u);const h=Rn(Math.ceil(qc(n)/2))+ge;if(f<Ke||f>=h||u<Ke||u>=h)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:d,k1:f,k2neg:l,k2:u}}function Yi(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function Gi(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===void 0?t[r]:e[r];return hr(n.lowS,"lowS"),hr(n.prehash,"prehash"),n.format!==void 0&&Yi(n.format),n}class V1 extends Error{constructor(t=""){super(t)}}const ot={Err:V1,_tlv:{encode:(e,t)=>{const{Err:n}=ot;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=gr(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?gr(i.length/2|128):"";return gr(e)+o+i+t},decode(e,t){const{Err:n}=ot;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],o=!!(i&128);let s=0;if(!o)s=i;else{const a=i&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const f=t.subarray(r,r+a);if(f.length!==a)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of f)s=s<<8|u;if(r+=a,s<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+s);if(c.length!==s)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=ot;if(e<Ke)throw new t("integer: negative integers are not allowed");let n=gr(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ot;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Wt(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ot,i=ne("signature",e),{v:o,l:s}=r.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,o),{v:f,l:u}=r.decode(2,a);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(f)}},hexFromSig(e){const{_tlv:t,_int:n}=ot,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),o=r+i;return t.encode(48,o)}},Ke=BigInt(0),ge=BigInt(1),Je=BigInt(2),hn=BigInt(3),Xi=BigInt(4);function Gt(e,t){const{BYTES:n}=e;let r;if(typeof t=="bigint")r=t;else{let i=ne("private key",t);try{r=e.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function q1(e,t={}){const n=H1("weierstrass",e,t),{Fp:r,Fn:i}=n;let o=n.CURVE;const{h:s,n:c}=o;pr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:a}=t;if(a&&(!r.is0(o.a)||typeof a.beta!="bigint"||!Array.isArray(a.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=Da(r,i);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(N,y,m){const{x:b,y:w}=y.toAffine(),v=r.toBytes(b);if(hr(m,"isCompressed"),m){u();const A=!r.isOdd(w);return ee(va(A),v)}else return ee(Uint8Array.of(4),v,r.toBytes(w))}function l(N){Kt(N,void 0,"Point");const{publicKey:y,publicKeyUncompressed:m}=f,b=N.length,w=N[0],v=N.subarray(1);if(b===y&&(w===2||w===3)){const A=r.fromBytes(v);if(!r.isValid(A))throw new Error("bad point: is not on curve, wrong x");const D=p(A);let S;try{S=r.sqrt(D)}catch(P){const F=P instanceof Error?": "+P.message:"";throw new Error("bad point: is not on curve, sqrt error"+F)}u();const U=r.isOdd(S);return(w&1)===1!==U&&(S=r.neg(S)),{x:A,y:S}}else if(b===m&&w===4){const A=r.BYTES,D=r.fromBytes(v.subarray(0,A)),S=r.fromBytes(v.subarray(A,A*2));if(!x(D,S))throw new Error("bad point: is not on curve");return{x:D,y:S}}else throw new Error(`bad point: got length ${b}, expected compressed=${y} or uncompressed=${m}`)}const h=t.toBytes||d,g=t.fromBytes||l;function p(N){const y=r.sqr(N),m=r.mul(y,N);return r.add(r.add(m,r.mul(N,o.a)),o.b)}function x(N,y){const m=r.sqr(y),b=p(N);return r.eql(m,b)}if(!x(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const _=r.mul(r.pow(o.a,hn),Xi),C=r.mul(r.sqr(o.b),BigInt(27));if(r.is0(r.add(_,C)))throw new Error("bad curve params: a or b");function B(N,y,m=!1){if(!r.isValid(y)||m&&r.is0(y))throw new Error(`bad point coordinate ${N}`);return y}function T(N){if(!(N instanceof I))throw new Error("ProjectivePoint expected")}function R(N){if(!a||!a.basises)throw new Error("no endo");return j1(N,a.basises,i.ORDER)}const L=Kc((N,y)=>{const{X:m,Y:b,Z:w}=N;if(r.eql(w,r.ONE))return{x:m,y:b};const v=N.is0();y==null&&(y=v?r.ONE:r.inv(w));const A=r.mul(m,y),D=r.mul(b,y),S=r.mul(w,y);if(v)return{x:r.ZERO,y:r.ZERO};if(!r.eql(S,r.ONE))throw new Error("invZ was invalid");return{x:A,y:D}}),k=Kc(N=>{if(N.is0()){if(t.allowInfinityPoint&&!r.is0(N.Y))return;throw new Error("bad point: ZERO")}const{x:y,y:m}=N.toAffine();if(!r.isValid(y)||!r.isValid(m))throw new Error("bad point: x or y not field elements");if(!x(y,m))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function M(N,y,m,b,w){return m=new I(r.mul(m.X,N),m.Y,m.Z),y=mr(b,y),m=mr(w,m),y.add(m)}class I{constructor(y,m,b){this.X=B("x",y),this.Y=B("y",m,!0),this.Z=B("z",b),Object.freeze(this)}static CURVE(){return o}static fromAffine(y){const{x:m,y:b}=y||{};if(!y||!r.isValid(m)||!r.isValid(b))throw new Error("invalid affine point");if(y instanceof I)throw new Error("projective point not allowed");return r.is0(m)&&r.is0(b)?I.ZERO:new I(m,b,r.ONE)}static fromBytes(y){const m=I.fromAffine(g(Kt(y,void 0,"point")));return m.assertValidity(),m}static fromHex(y){return I.fromBytes(ne("pointHex",y))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(y=8,m=!0){return q.createCache(this,y),m||this.multiply(hn),this}assertValidity(){k(this)}hasEvenY(){const{y}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(y)}equals(y){T(y);const{X:m,Y:b,Z:w}=this,{X:v,Y:A,Z:D}=y,S=r.eql(r.mul(m,D),r.mul(v,w)),U=r.eql(r.mul(b,D),r.mul(A,w));return S&&U}negate(){return new I(this.X,r.neg(this.Y),this.Z)}double(){const{a:y,b:m}=o,b=r.mul(m,hn),{X:w,Y:v,Z:A}=this;let D=r.ZERO,S=r.ZERO,U=r.ZERO,O=r.mul(w,w),P=r.mul(v,v),F=r.mul(A,A),$=r.mul(w,v);return $=r.add($,$),U=r.mul(w,A),U=r.add(U,U),D=r.mul(y,U),S=r.mul(b,F),S=r.add(D,S),D=r.sub(P,S),S=r.add(P,S),S=r.mul(D,S),D=r.mul($,D),U=r.mul(b,U),F=r.mul(y,F),$=r.sub(O,F),$=r.mul(y,$),$=r.add($,U),U=r.add(O,O),O=r.add(U,O),O=r.add(O,F),O=r.mul(O,$),S=r.add(S,O),F=r.mul(v,A),F=r.add(F,F),O=r.mul(F,$),D=r.sub(D,O),U=r.mul(F,P),U=r.add(U,U),U=r.add(U,U),new I(D,S,U)}add(y){T(y);const{X:m,Y:b,Z:w}=this,{X:v,Y:A,Z:D}=y;let S=r.ZERO,U=r.ZERO,O=r.ZERO;const P=o.a,F=r.mul(o.b,hn);let $=r.mul(m,v),H=r.mul(b,A),V=r.mul(w,D),W=r.add(m,b),j=r.add(v,A);W=r.mul(W,j),j=r.add($,H),W=r.sub(W,j),j=r.add(m,w);let Z=r.add(v,D);return j=r.mul(j,Z),Z=r.add($,V),j=r.sub(j,Z),Z=r.add(b,w),S=r.add(A,D),Z=r.mul(Z,S),S=r.add(H,V),Z=r.sub(Z,S),O=r.mul(P,j),S=r.mul(F,V),O=r.add(S,O),S=r.sub(H,O),O=r.add(H,O),U=r.mul(S,O),H=r.add($,$),H=r.add(H,$),V=r.mul(P,V),j=r.mul(F,j),H=r.add(H,V),V=r.sub($,V),V=r.mul(P,V),j=r.add(j,V),$=r.mul(H,j),U=r.add(U,$),$=r.mul(Z,j),S=r.mul(W,S),S=r.sub(S,$),$=r.mul(W,H),O=r.mul(Z,O),O=r.add(O,$),new I(S,U,O)}subtract(y){return this.add(y.negate())}is0(){return this.equals(I.ZERO)}multiply(y){const{endo:m}=t;if(!i.isValidNot0(y))throw new Error("invalid scalar: out of range");let b,w;const v=A=>q.cached(this,A,D=>qi(I,D));if(m){const{k1neg:A,k1:D,k2neg:S,k2:U}=R(y),{p:O,f:P}=v(D),{p:F,f:$}=v(U);w=P.add($),b=M(m.beta,O,F,A,S)}else{const{p:A,f:D}=v(y);b=A,w=D}return qi(I,[b,w])[0]}multiplyUnsafe(y){const{endo:m}=t,b=this;if(!i.isValid(y))throw new Error("invalid scalar: out of range");if(y===Ke||b.is0())return I.ZERO;if(y===ge)return b;if(q.hasCache(this))return this.multiply(y);if(m){const{k1neg:w,k1:v,k2neg:A,k2:D}=R(y),{p1:S,p2:U}=L1(I,b,v,D);return M(m.beta,S,U,w,A)}else return q.unsafe(b,y)}multiplyAndAddUnsafe(y,m,b){const w=this.multiplyUnsafe(m).add(y.multiplyUnsafe(b));return w.is0()?void 0:w}toAffine(y){return L(this,y)}isTorsionFree(){const{isTorsionFree:y}=t;return s===ge?!0:y?y(I,this):q.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:y}=t;return s===ge?this:y?y(I,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(y=!0){return hr(y,"isCompressed"),this.assertValidity(),h(I,this,y)}toHex(y=!0){return ke(this.toBytes(y))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(y=!0){return this.toBytes(y)}_setWindowSize(y){this.precompute(y)}static normalizeZ(y){return qi(I,y)}static msm(y,m){return z1(I,i,y,m)}static fromPrivateKey(y){return I.BASE.multiply(Gt(i,y))}}I.BASE=new I(o.Gx,o.Gy,r.ONE),I.ZERO=new I(r.ZERO,r.ONE,r.ZERO),I.Fp=r,I.Fn=i;const K=i.BITS,q=new k1(I,t.endo?Math.ceil(K/2):K);return I.BASE.precompute(8),I}function va(e){return Uint8Array.of(e?2:3)}function K1(e,t){const n=e.ORDER;let r=Ke;for(let g=n-ge;g%Je===Ke;g/=Je)r+=ge;const i=r,o=Je<<i-ge-ge,s=o*Je,c=(n-ge)/s,a=(c-ge)/Je,f=s-ge,u=o,d=e.pow(t,c),l=e.pow(t,(c+ge)/Je);let h=(g,p)=>{let x=d,_=e.pow(p,f),C=e.sqr(_);C=e.mul(C,p);let B=e.mul(g,C);B=e.pow(B,a),B=e.mul(B,_),_=e.mul(B,p),C=e.mul(B,g);let T=e.mul(C,_);B=e.pow(T,u);let R=e.eql(B,e.ONE);_=e.mul(C,l),B=e.mul(T,x),C=e.cmov(_,C,R),T=e.cmov(B,T,R);for(let L=i;L>ge;L--){let k=L-Je;k=Je<<k-ge;let M=e.pow(T,k);const I=e.eql(M,e.ONE);_=e.mul(C,x),x=e.mul(x,x),M=e.mul(T,x),C=e.cmov(_,C,I),T=e.cmov(M,T,I)}return{isValid:R,value:C}};if(e.ORDER%Xi===hn){const g=(e.ORDER-hn)/Xi,p=e.sqrt(e.neg(t));h=(x,_)=>{let C=e.sqr(_);const B=e.mul(x,_);C=e.mul(C,B);let T=e.pow(C,g);T=e.mul(T,B);const R=e.mul(T,p),L=e.mul(e.sqr(T),_),k=e.eql(L,x);let M=e.cmov(R,T,k);return{isValid:k,value:M}}}return h}function W1(e,t){ua(e);const{A:n,B:r,Z:i}=t;if(!e.isValid(n)||!e.isValid(r)||!e.isValid(i))throw new Error("mapToCurveSimpleSWU: invalid opts");const o=K1(e,i);if(!e.isOdd)throw new Error("Field does not have .isOdd()");return s=>{let c,a,f,u,d,l,h,g;c=e.sqr(s),c=e.mul(c,i),a=e.sqr(c),a=e.add(a,c),f=e.add(a,e.ONE),f=e.mul(f,r),u=e.cmov(i,e.neg(a),!e.eql(a,e.ZERO)),u=e.mul(u,n),a=e.sqr(f),l=e.sqr(u),d=e.mul(l,n),a=e.add(a,d),a=e.mul(a,f),l=e.mul(l,u),d=e.mul(l,r),a=e.add(a,d),h=e.mul(c,f);const{isValid:p,value:x}=o(a,l);g=e.mul(c,s),g=e.mul(g,x),h=e.cmov(h,f,p),g=e.cmov(g,x,p);const _=e.isOdd(s)===e.isOdd(g);g=e.cmov(e.neg(g),g,_);const C=yr(e,[u],!0)[0];return h=e.mul(h,C),{x:h,y:g}}}function Da(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Z1(e,t={}){const{Fn:n}=e,r=t.randomBytes||qe,i=Object.assign(Da(e.Fp,n),{seed:ga(n.ORDER)});function o(h){try{return!!Gt(n,h)}catch{return!1}}function s(h,g){const{publicKey:p,publicKeyUncompressed:x}=i;try{const _=h.length;return g===!0&&_!==p||g===!1&&_!==x?!1:!!e.fromBytes(h)}catch{return!1}}function c(h=r(i.seed)){return ba(Kt(h,i.seed,"seed"),n.ORDER)}function a(h,g=!0){return e.BASE.multiply(Gt(n,h)).toBytes(g)}function f(h){const g=c(h);return{secretKey:g,publicKey:a(g)}}function u(h){if(typeof h=="bigint")return!1;if(h instanceof e)return!0;const{secretKey:g,publicKey:p,publicKeyUncompressed:x}=i;if(n.allowedLengths||g===p)return;const _=ne("key",h).length;return _===p||_===x}function d(h,g,p=!0){if(u(h)===!0)throw new Error("first arg must be private key");if(u(g)===!1)throw new Error("second arg must be public key");const x=Gt(n,h);return e.fromHex(g).multiply(x).toBytes(p)}return Object.freeze({getPublicKey:a,getSharedSecret:d,keygen:f,Point:e,utils:{isValidSecretKey:o,isValidPublicKey:s,randomSecretKey:c,isValidPrivateKey:o,randomPrivateKey:c,normPrivateKeyToScalar:h=>Gt(n,h),precompute(h=8,g=e.BASE){return g.precompute(h,!1)}},lengths:i})}function Y1(e,t,n={}){On(t),pr(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||qe,i=n.hmac||((m,...b)=>Fn(t,m,ee(...b))),{Fp:o,Fn:s}=e,{ORDER:c,BITS:a}=s,{keygen:f,getPublicKey:u,getSharedSecret:d,utils:l,lengths:h}=Z1(e,n),g={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},p="compact";function x(m){const b=c>>ge;return m>b}function _(m,b){if(!s.isValidNot0(b))throw new Error(`invalid signature ${m}: out of range 1..Point.Fn.ORDER`);return b}function C(m,b){Yi(b);const w=h.signature,v=b==="compact"?w:b==="recovered"?w+1:void 0;return Kt(m,v,`${b} signature`)}class B{constructor(b,w,v){this.r=_("r",b),this.s=_("s",w),v!=null&&(this.recovery=v),Object.freeze(this)}static fromBytes(b,w=p){C(b,w);let v;if(w==="der"){const{r:U,s:O}=ot.toSig(Kt(b));return new B(U,O)}w==="recovered"&&(v=b[0],w="compact",b=b.subarray(1));const A=s.BYTES,D=b.subarray(0,A),S=b.subarray(A,A*2);return new B(s.fromBytes(D),s.fromBytes(S),v)}static fromHex(b,w){return this.fromBytes(Et(b),w)}addRecoveryBit(b){return new B(this.r,this.s,b)}recoverPublicKey(b){const w=o.ORDER,{r:v,s:A,recovery:D}=this;if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");if(c*Je<w&&D>1)throw new Error("recovery id is ambiguous for h>1 curve");const U=D===2||D===3?v+c:v;if(!o.isValid(U))throw new Error("recovery id 2 or 3 invalid");const O=o.toBytes(U),P=e.fromBytes(ee(va((D&1)===0),O)),F=s.inv(U),$=R(ne("msgHash",b)),H=s.create(-$*F),V=s.create(A*F),W=e.BASE.multiplyUnsafe(H).add(P.multiplyUnsafe(V));if(W.is0())throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return x(this.s)}toBytes(b=p){if(Yi(b),b==="der")return Et(ot.hexFromSig(this));const w=s.toBytes(this.r),v=s.toBytes(this.s);if(b==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ee(Uint8Array.of(this.recovery),w,v)}return ee(w,v)}toHex(b){return ke(this.toBytes(b))}assertValidity(){}static fromCompact(b){return B.fromBytes(ne("sig",b),"compact")}static fromDER(b){return B.fromBytes(ne("sig",b),"der")}normalizeS(){return this.hasHighS()?new B(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ke(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ke(this.toBytes("compact"))}}const T=n.bits2int||function(b){if(b.length>8192)throw new Error("input is too large");const w=Wt(b),v=b.length*8-a;return v>0?w>>BigInt(v):w},R=n.bits2int_modN||function(b){return s.create(T(b))},L=Rn(a);function k(m){return Y0("num < 2^"+a,m,Ke,L),s.toBytes(m)}function M(m,b){return Kt(m,void 0,"message"),b?Kt(t(m),void 0,"prehashed message"):m}function I(m,b,w){if(["recovered","canonical"].some(H=>H in w))throw new Error("sign() legacy options not supported");const{lowS:v,prehash:A,extraEntropy:D}=Gi(w,g);m=M(m,A);const S=R(m),U=Gt(s,b),O=[k(U),k(S)];if(D!=null&&D!==!1){const H=D===!0?r(h.secretKey):D;O.push(ne("extraEntropy",H))}const P=ee(...O),F=S;function $(H){const V=T(H);if(!s.isValidNot0(V))return;const W=s.inv(V),j=e.BASE.multiply(V).toAffine(),Z=s.create(j.x);if(Z===Ke)return;const oe=s.create(W*s.create(F+Z*U));if(oe===Ke)return;let Fe=(j.x===Z?0:2)|Number(j.y&ge),Ye=oe;return v&&x(oe)&&(Ye=s.neg(oe),Fe^=1),new B(Z,Ye,Fe)}return{seed:P,k2sig:$}}function K(m,b,w={}){m=ne("message",m);const{seed:v,k2sig:A}=I(m,b,w);return G0(t.outputLen,s.BYTES,i)(v,A)}function q(m){let b;const w=typeof m=="string"||wt(m),v=!w&&m!==null&&typeof m=="object"&&typeof m.r=="bigint"&&typeof m.s=="bigint";if(!w&&!v)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(v)b=new B(m.r,m.s);else if(w){try{b=B.fromBytes(ne("sig",m),"der")}catch(A){if(!(A instanceof ot.Err))throw A}if(!b)try{b=B.fromBytes(ne("sig",m),"compact")}catch{return!1}}return b||!1}function N(m,b,w,v={}){const{lowS:A,prehash:D,format:S}=Gi(v,g);if(w=ne("publicKey",w),b=M(ne("message",b),D),"strict"in v)throw new Error("options.strict was renamed to lowS");const U=S===void 0?q(m):B.fromBytes(ne("sig",m),S);if(U===!1)return!1;try{const O=e.fromBytes(w);if(A&&U.hasHighS())return!1;const{r:P,s:F}=U,$=R(b),H=s.inv(F),V=s.create($*H),W=s.create(P*H),j=e.BASE.multiplyUnsafe(V).add(O.multiplyUnsafe(W));return j.is0()?!1:s.create(j.x)===P}catch{return!1}}function y(m,b,w={}){const{prehash:v}=Gi(w,g);return b=M(b,v),B.fromBytes(m,"recovered").recoverPublicKey(b).toBytes()}return Object.freeze({keygen:f,getPublicKey:u,getSharedSecret:d,utils:l,lengths:h,Point:e,sign:K,verify:N,recoverPublicKey:y,Signature:B,hash:t})}function G1(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0;const i=Mn(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),o={Fp:n,Fn:i,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:o}}function X1(e){const{CURVE:t,curveOpts:n}=G1(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}function J1(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,da(n.Fn.ORDER,n.Fn.BITS))})}function Q1(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:i}=X1(e),o=q1(t,n),s=Y1(o,r,i);return J1(e,s)}function eg(e,t){const n=r=>Q1({...e,hash:r});return{...n(t),create:n}}const tg=Wt;function St(e,t){if(Pn(e),Pn(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function ng(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function Pn(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Ba(e){if(!wt(e)&&typeof e!="string")throw new Error("DST must be Uint8Array or string");return typeof e=="string"?Vt(e):e}function rg(e,t,n,r){me(e),Pn(n),t=Ba(t),t.length>255&&(t=r(ee(Vt("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:o}=r,s=Math.ceil(n/i);if(n>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");const c=ee(t,St(t.length,1)),a=St(0,o),f=St(n,2),u=new Array(s),d=r(ee(a,e,f,St(0,1),c));u[0]=r(ee(d,St(1,1),c));for(let h=1;h<=s;h++){const g=[ng(d,u[h-1]),St(h+1,1),c];u[h]=r(ee(...g))}return ee(...u).slice(0,n)}function ig(e,t,n,r,i){if(me(e),Pn(n),t=Ba(t),t.length>255){const o=Math.ceil(2*r/8);t=i.create({dkLen:o}).update(Vt("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(St(n,2)).update(t).update(St(t.length,1)).digest()}function Ji(e,t,n){pr(n,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:r,k:i,m:o,hash:s,expand:c,DST:a}=n;if(!X0(n.hash))throw new Error("expected valid hash");me(e),Pn(t);const f=r.toString(2).length,u=Math.ceil((f+i)/8),d=t*o*u;let l;if(c==="xmd")l=rg(e,a,d,s);else if(c==="xof")l=ig(e,a,d,i,s);else if(c==="_internal_pass")l=e;else throw new Error('expand must be "xmd" or "xof"');const h=new Array(t);for(let g=0;g<t;g++){const p=new Array(o);for(let x=0;x<o;x++){const _=u*(x+g*o),C=l.subarray(_,_+u);p[x]=Ue(tg(C),r)}h[g]=p}return h}function og(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,i)=>{const[o,s,c,a]=n.map(d=>d.reduce((l,h)=>e.add(e.mul(l,r),h))),[f,u]=yr(e,[s,a],!0);return r=e.mul(o,f),i=e.mul(i,e.mul(c,u)),{x:r,y:i}}}const sg=Vt("HashToScalar-");function cg(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function r(o){return e.fromAffine(t(o))}function i(o){const s=o.clearCofactor();return s.equals(e.ZERO)?e.ZERO:(s.assertValidity(),s)}return{defaults:n,hashToCurve(o,s){const c=Object.assign({},n,s),a=Ji(o,2,c),f=r(a[0]),u=r(a[1]);return i(f.add(u))},encodeToCurve(o,s){const c=n.encodeDST?{DST:n.encodeDST}:{},a=Object.assign({},n,c,s),f=Ji(o,1,a),u=r(f[0]);return i(u)},mapToCurve(o){if(!Array.isArray(o))throw new Error("expected array of bigints");for(const s of o)if(typeof s!="bigint")throw new Error("expected array of bigints");return i(r(o))},hashToScalar(o,s){const c=e.Fn.ORDER,a=Object.assign({},n,{p:c,m:1,DST:sg},s);return Ji(o,1,a)[0][0]}}}const gn={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},ag={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},fg=BigInt(0),Aa=BigInt(1),Qi=BigInt(2);function ug(e){const t=gn.p,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),f=e*e*e%t,u=f*f*e%t,d=Le(u,n,t)*u%t,l=Le(d,n,t)*u%t,h=Le(l,Qi,t)*f%t,g=Le(h,i,t)*h%t,p=Le(g,o,t)*g%t,x=Le(p,c,t)*p%t,_=Le(x,a,t)*x%t,C=Le(_,c,t)*p%t,B=Le(C,n,t)*u%t,T=Le(B,s,t)*g%t,R=Le(T,r,t)*f%t,L=Le(R,Qi,t);if(!st.eql(st.sqr(L),e))throw new Error("Cannot find square root");return L}const st=Mn(gn.p,{sqrt:ug}),Er=eg({...gn,Fp:st,lowS:!0,endo:ag},At),Sa={};function xr(e,...t){let n=Sa[e];if(n===void 0){const r=At(Vt(e));n=ee(r,r),Sa[e]=n}return At(ee(n,...t))}const eo=e=>e.toBytes(!0).slice(1),bn=Er.Point,to=e=>e%Qi===fg;function no(e){const{Fn:t,BASE:n}=bn,r=Gt(t,e),i=n.multiply(r);return{scalar:to(i.y)?r:t.neg(r),bytes:eo(i)}}function _a(e){const t=st;if(!t.isValidNot0(e))throw new Error("invalid x: Fail if x \u2265 p");const n=t.create(e*e),r=t.create(n*e+BigInt(7));let i=t.sqrt(r);to(i)||(i=t.neg(i));const o=bn.fromAffine({x:e,y:i});return o.assertValidity(),o}const kn=Wt;function Ua(...e){return bn.Fn.create(kn(xr("BIP0340/challenge",...e)))}function Ia(e){return no(e).bytes}function lg(e,t,n=qe(32)){const{Fn:r}=bn,i=ne("message",e),{bytes:o,scalar:s}=no(t),c=ne("auxRand",n,32),a=r.toBytes(s^kn(xr("BIP0340/aux",c))),f=xr("BIP0340/nonce",a,o,i),{bytes:u,scalar:d}=no(f),l=Ua(u,o,i),h=new Uint8Array(64);if(h.set(u,0),h.set(r.toBytes(r.create(d+l*s)),32),!Oa(h,i,o))throw new Error("sign: Invalid signature produced");return h}function Oa(e,t,n){const{Fn:r,BASE:i}=bn,o=ne("signature",e,64),s=ne("message",t),c=ne("publicKey",n,32);try{const a=_a(kn(c)),f=kn(o.subarray(0,32));if(!Pi(f,Aa,gn.p))return!1;const u=kn(o.subarray(32,64));if(!Pi(u,Aa,gn.n))return!1;const d=Ua(r.toBytes(f),eo(a),s),l=i.multiplyUnsafe(u).add(a.multiplyUnsafe(r.neg(d))),{x:h,y:g}=l.toAffine();return!(l.is0()||!to(g)||h!==f)}catch{return!1}}const dg=(()=>{const n=(i=qe(48))=>ba(i,gn.n);Er.utils.randomSecretKey;function r(i){const o=n(i);return{secretKey:o,publicKey:Ia(o)}}return{keygen:r,getPublicKey:Ia,sign:lg,verify:Oa,Point:bn,utils:{randomSecretKey:n,randomPrivateKey:n,taggedHash:xr,lift_x:_a,pointToBytes:eo,numberToBytesBE:br,bytesToNumberBE:Wt,mod:Ue},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:32*2,seed:48}}})(),hg=og(st,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),gg=W1(st,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:st.create(BigInt("-11"))}),ro=cg(Er.Point,e=>{const{x:t,y:n}=gg(st.create(e[0]));return hg(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:st.ORDER,m:1,k:128,expand:"xmd",hash:At});var bg=Object.freeze({__proto__:null,secp256k1:Er,schnorr:dg,secp256k1_hasher:ro,hashToCurve:ro.hashToCurve,encodeToCurve:ro.encodeToCurve});function pg(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let f=0;f<t.length;f++)t[f]=255;for(let f=0;f<e.length;f++){const u=e.charAt(f),d=u.charCodeAt(0);if(t[d]!==255)throw new TypeError(u+" is ambiguous");t[d]=f}const n=e.length,r=e.charAt(0),i=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function s(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let u=0,d=0,l=0;const h=f.length;for(;l!==h&&f[l]===0;)l++,u++;const g=(h-l)*o+1>>>0,p=new Uint8Array(g);for(;l!==h;){let C=f[l],B=0;for(let T=g-1;(C!==0||B<d)&&T!==-1;T--,B++)C+=256*p[T]>>>0,p[T]=C%n>>>0,C=C/n>>>0;if(C!==0)throw new Error("Non-zero carry");d=B,l++}let x=g-d;for(;x!==g&&p[x]===0;)x++;let _=r.repeat(u);for(;x<g;++x)_+=e.charAt(p[x]);return _}function c(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let u=0,d=0,l=0;for(;f[u]===r;)d++,u++;const h=(f.length-u)*i+1>>>0,g=new Uint8Array(h);for(;u<f.length;){const C=f.charCodeAt(u);if(C>255)return;let B=t[C];if(B===255)return;let T=0;for(let R=h-1;(B!==0||T<l)&&R!==-1;R--,T++)B+=n*g[R]>>>0,g[R]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");l=T,u++}let p=h-l;for(;p!==h&&g[p]===0;)p++;const x=new Uint8Array(d+(h-p));let _=d;for(;p!==h;)x[_++]=g[p++];return x}function a(f){const u=c(f);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:s,decodeUnsafe:c,decode:a}}var wg="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ln=pg(wg);const yg=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),re=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),z=new Uint32Array(32);function _t(e,t,n,r,i,o){const s=i[o],c=i[o+1];let a=z[2*e],f=z[2*e+1],u=z[2*t],d=z[2*t+1],l=z[2*n],h=z[2*n+1],g=z[2*r],p=z[2*r+1],x=vi(a,u,s);f=Di(x,f,d,c),a=x|0,{Dh:p,Dl:g}={Dh:p^f,Dl:g^a},{Dh:p,Dl:g}={Dh:Jh(p,g),Dl:Qh(p)},{h,l}=je(h,l,p,g),{Bh:d,Bl:u}={Bh:d^h,Bl:u^l},{Bh:d,Bl:u}={Bh:bt(d,u,24),Bl:pt(d,u,24)},z[2*e]=a,z[2*e+1]=f,z[2*t]=u,z[2*t+1]=d,z[2*n]=l,z[2*n+1]=h,z[2*r]=g,z[2*r+1]=p}function Ut(e,t,n,r,i,o){const s=i[o],c=i[o+1];let a=z[2*e],f=z[2*e+1],u=z[2*t],d=z[2*t+1],l=z[2*n],h=z[2*n+1],g=z[2*r],p=z[2*r+1],x=vi(a,u,s);f=Di(x,f,d,c),a=x|0,{Dh:p,Dl:g}={Dh:p^f,Dl:g^a},{Dh:p,Dl:g}={Dh:bt(p,g,16),Dl:pt(p,g,16)},{h,l}=je(h,l,p,g),{Bh:d,Bl:u}={Bh:d^h,Bl:u^l},{Bh:d,Bl:u}={Bh:Un(d,u,63),Bl:In(d,u,63)},z[2*e]=a,z[2*e+1]=f,z[2*t]=u,z[2*t+1]=d,z[2*n]=l,z[2*n+1]=h,z[2*r]=g,z[2*r+1]=p}function mg(e,t={},n,r,i){if(Ge(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:o,salt:s,personalization:c}=t;if(o!==void 0&&(o.length<1||o.length>n))throw new Error("key length must be undefined or 1.."+n);if(s!==void 0&&s.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==i)throw new Error("personalization must be undefined or "+i)}class Eg extends lr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Ge(t),Ge(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=Cn(this.buffer)}update(t){yt(this),t=Ve(t),me(t);const{blockLen:n,buffer:r,buffer32:i}=this,o=t.length,s=t.byteOffset,c=t.buffer;for(let a=0;a<o;){this.pos===n&&(mt(i),this.compress(i,0,!1),mt(i),this.pos=0);const f=Math.min(n-this.pos,o-a),u=s+a;if(f===n&&!(u%4)&&a+f<o){const d=new Uint32Array(c,u,Math.floor((o-a)/4));mt(d);for(let l=0;a+n<o;l+=i.length,a+=n)this.length+=n,this.compress(d,l,!1);mt(d);continue}r.set(t.subarray(a,a+f),this.pos),this.pos+=f,this.length+=f,a+=f}return this}digestInto(t){yt(this),Bi(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,Pe(this.buffer.subarray(n)),mt(r),this.compress(r,0,!0),mt(r);const i=Cn(t);this.get().forEach((o,s)=>i[s]=tt(o))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:i,destroyed:o,outputLen:s,pos:c}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.buffer.set(n),t.destroyed=o,t.finished=i,t.length=r,t.pos=c,t.outputLen=s,t}clone(){return this._cloneInto()}}class xg extends Eg{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=re[0]|0,this.v0h=re[1]|0,this.v1l=re[2]|0,this.v1h=re[3]|0,this.v2l=re[4]|0,this.v2h=re[5]|0,this.v3l=re[6]|0,this.v3h=re[7]|0,this.v4l=re[8]|0,this.v4h=re[9]|0,this.v5l=re[10]|0,this.v5h=re[11]|0,this.v6l=re[12]|0,this.v6h=re[13]|0,this.v7l=re[14]|0,this.v7h=re[15]|0,mg(n,t,64,16,16);let{key:r,personalization:i,salt:o}=t,s=0;if(r!==void 0&&(r=Ve(r),s=r.length),this.v0l^=this.outputLen|s<<8|65536|1<<24,o!==void 0){o=Ve(o);const c=Cn(o);this.v4l^=tt(c[0]),this.v4h^=tt(c[1]),this.v5l^=tt(c[2]),this.v5h^=tt(c[3])}if(i!==void 0){i=Ve(i);const c=Cn(i);this.v6l^=tt(c[0]),this.v6h^=tt(c[1]),this.v7l^=tt(c[2]),this.v7h^=tt(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:i,v2l:o,v2h:s,v3l:c,v3h:a,v4l:f,v4h:u,v5l:d,v5h:l,v6l:h,v6h:g,v7l:p,v7h:x}=this;return[t,n,r,i,o,s,c,a,f,u,d,l,h,g,p,x]}set(t,n,r,i,o,s,c,a,f,u,d,l,h,g,p,x){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=o|0,this.v2h=s|0,this.v3l=c|0,this.v3h=a|0,this.v4l=f|0,this.v4h=u|0,this.v5l=d|0,this.v5h=l|0,this.v6l=h|0,this.v6h=g|0,this.v7l=p|0,this.v7h=x|0}compress(t,n,r){this.get().forEach((a,f)=>z[f]=a),z.set(re,16);let{h:i,l:o}=pc(BigInt(this.length));z[24]=re[8]^o,z[25]=re[9]^i,r&&(z[28]=~z[28],z[29]=~z[29]);let s=0;const c=yg;for(let a=0;a<12;a++)_t(0,4,8,12,t,n+2*c[s++]),Ut(0,4,8,12,t,n+2*c[s++]),_t(1,5,9,13,t,n+2*c[s++]),Ut(1,5,9,13,t,n+2*c[s++]),_t(2,6,10,14,t,n+2*c[s++]),Ut(2,6,10,14,t,n+2*c[s++]),_t(3,7,11,15,t,n+2*c[s++]),Ut(3,7,11,15,t,n+2*c[s++]),_t(0,5,10,15,t,n+2*c[s++]),Ut(0,5,10,15,t,n+2*c[s++]),_t(1,6,11,12,t,n+2*c[s++]),Ut(1,6,11,12,t,n+2*c[s++]),_t(2,7,8,13,t,n+2*c[s++]),Ut(2,7,8,13,t,n+2*c[s++]),_t(3,4,9,14,t,n+2*c[s++]),Ut(3,4,9,14,t,n+2*c[s++]);this.v0l^=z[0]^z[16],this.v0h^=z[1]^z[17],this.v1l^=z[2]^z[18],this.v1h^=z[3]^z[19],this.v2l^=z[4]^z[20],this.v2h^=z[5]^z[21],this.v3l^=z[6]^z[22],this.v3h^=z[7]^z[23],this.v4l^=z[8]^z[24],this.v4h^=z[9]^z[25],this.v5l^=z[10]^z[26],this.v5h^=z[11]^z[27],this.v6l^=z[12]^z[28],this.v6h^=z[13]^z[29],this.v7l^=z[14]^z[30],this.v7h^=z[15]^z[31],Pe(z)}destroy(){this.destroyed=!0,Pe(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const vg=u0(e=>new xg(e));function Dg(e){const t=e.length;let n=0,r=0;for(;r<t;){let i=e.charCodeAt(r++);if((i&4294967168)===0){n++;continue}else if((i&4294965248)===0)n+=2;else{if(i>=55296&&i<=56319&&r<t){const o=e.charCodeAt(r);(o&64512)===56320&&(++r,i=((i&1023)<<10)+(o&1023)+65536)}(i&4294901760)===0?n+=3:n+=4}}return n}function Bg(e,t,n){const r=e.length;let i=n,o=0;for(;o<r;){let s=e.charCodeAt(o++);if((s&4294967168)===0){t[i++]=s;continue}else if((s&4294965248)===0)t[i++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&o<r){const c=e.charCodeAt(o);(c&64512)===56320&&(++o,s=((s&1023)<<10)+(c&1023)+65536)}(s&4294901760)===0?(t[i++]=s>>12&15|224,t[i++]=s>>6&63|128):(t[i++]=s>>18&7|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128)}t[i++]=s&63|128}}const Ag=new TextEncoder,Sg=50;function _g(e,t,n){Ag.encodeInto(e,t.subarray(n))}function Ug(e,t,n){e.length>Sg?_g(e,t,n):Bg(e,t,n)}const Ig=4096;function Ca(e,t,n){let r=t;const i=r+n,o=[];let s="";for(;r<i;){const c=e[r++];if((c&128)===0)o.push(c);else if((c&224)===192){const a=e[r++]&63;o.push((c&31)<<6|a)}else if((c&240)===224){const a=e[r++]&63,f=e[r++]&63;o.push((c&31)<<12|a<<6|f)}else if((c&248)===240){const a=e[r++]&63,f=e[r++]&63,u=e[r++]&63;let d=(c&7)<<18|a<<12|f<<6|u;d>65535&&(d-=65536,o.push(d>>>10&1023|55296),d=56320|d&1023),o.push(d)}else o.push(c);o.length>=Ig&&(s+=String.fromCharCode(...o),o.length=0)}return o.length>0&&(s+=String.fromCharCode(...o)),s}const Og=new TextDecoder,Cg=200;function Tg(e,t,n){const r=e.subarray(t,t+n);return Og.decode(r)}function Ng(e,t,n){return n>Cg?Tg(e,t,n):Ca(e,t,n)}class vr{constructor(t,n){this.type=t,this.data=n}}class Ie extends Error{constructor(t){super(t);const n=Object.create(Ie.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ie.name})}}const zn=4294967295;function $g(e,t,n){const r=n/4294967296,i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function Ta(e,t,n){const r=Math.floor(n/4294967296),i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function Na(e,t){const n=e.getInt32(t),r=e.getUint32(t+4);return n*4294967296+r}function Rg(e,t){const n=e.getUint32(t),r=e.getUint32(t+4);return n*4294967296+r}const Fg=-1,Mg=4294967296-1,Pg=17179869184-1;function kg({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=Pg)if(t===0&&e<=Mg){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,r=e&4294967295,i=new Uint8Array(8),o=new DataView(i.buffer);return o.setUint32(0,t<<2|n&3),o.setUint32(4,r),i}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),Ta(r,4,e),n}}function Lg(e){const t=e.getTime(),n=Math.floor(t/1e3),r=(t-n*1e3)*1e6,i=Math.floor(r/1e9);return{sec:n+i,nsec:r-i*1e9}}function zg(e){if(e instanceof Date){const t=Lg(e);return kg(t)}else return null}function Hg(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),r=t.getUint32(4),i=(n&3)*4294967296+r,o=n>>>2;return{sec:i,nsec:o}}case 12:{const n=Na(t,4),r=t.getUint32(0);return{sec:n,nsec:r}}default:throw new Ie(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function jg(e){const t=Hg(e);return new Date(t.sec*1e3+t.nsec/1e6)}const Vg={type:Fg,encode:zg,decode:jg};class Dr{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Vg)}register({type:t,encode:n,decode:r}){if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{const i=-1-t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}}tryToEncode(t,n){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const o=i(t,n);if(o!=null){const s=-1-r;return new vr(s,o)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const o=i(t,n);if(o!=null){const s=r;return new vr(s,o)}}}return t instanceof vr?t:null}decode(t,n,r){const i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(t,n,r):new vr(n,t)}}Dr.defaultCodec=new Dr;function qg(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function io(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):qg(e)?new Uint8Array(e):Uint8Array.from(e)}const Kg=100,Wg=2048;class oo{constructor(t){this.entered=!1,this.extensionCodec=t?.extensionCodec??Dr.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??Kg,this.initialBufferSize=t?.initialBufferSize??Wg,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new oo({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),r=new Uint8Array(n),i=new DataView(n);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const r=Dg(t);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),Ug(t,this.bytes,this.pos),this.pos+=r}encodeObject(t,n){const r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=io(t);this.writeU8a(r)}encodeArray(t,n){const r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of t)this.doEncode(i,n+1)}countWithoutUndefined(t,n){let r=0;for(const i of n)t[i]!==void 0&&r++;return r}encodeMap(t,n){const r=Object.keys(t);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const o of r){const s=t[o];this.ignoreUndefined&&s===void 0||(this.encodeString(o),this.doEncode(s,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const r=t.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(t.type),this.writeU8a(r);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),$g(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),Ta(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}}function Zg(e,t){return new oo(t).encodeSharedRef(e)}function so(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const Yg=16,Gg=16;class Xg{constructor(t=Yg,n=Gg){this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,r){const i=this.caches[r-1];e:for(const o of i){const s=o.bytes;for(let c=0;c<r;c++)if(s[c]!==t[n+c])continue e;return o.str}return null}store(t,n){const r=this.caches[t.length-1],i={bytes:t,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(t,n,r){const i=this.find(t,n,r);if(i!=null)return this.hit++,i;this.miss++;const o=Ca(t,n,r),s=Uint8Array.prototype.slice.call(t,n,n+r);return this.store(s,o),o}}const co="array",Hn="map_key",$a="map_value",Jg=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new Ie("The type of key must be string or number but "+typeof e)};class Qg{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=co,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=Hn,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===co){const r=t;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(t.type===Hn||t.type===$a){const r=t;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const jn=-1,ao=new DataView(new ArrayBuffer(0)),eb=new Uint8Array(ao.buffer);try{ao.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const Ra=new RangeError("Insufficient data"),tb=new Xg;class fo{constructor(t){this.totalPos=0,this.pos=0,this.view=ao,this.bytes=eb,this.headByte=jn,this.stack=new Qg,this.entered=!1,this.extensionCodec=t?.extensionCodec??Dr.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??zn,this.maxBinLength=t?.maxBinLength??zn,this.maxArrayLength=t?.maxArrayLength??zn,this.maxMapLength=t?.maxMapLength??zn,this.maxExtLength=t?.maxExtLength??zn,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:tb,this.mapKeyConverter=t?.mapKeyConverter??Jg}clone(){return new fo({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=jn,this.stack.reset()}setBuffer(t){const n=io(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===jn&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),r=io(t),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),this.setBuffer(i)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,r;for await(const c of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{r=this.doDecodeSync(),n=!0}catch(a){if(!(a instanceof RangeError))throw a}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:o,totalPos:s}=this;throw new RangeError(`Insufficient data in parsing ${so(i)} at ${s} (${o} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let r=n,i=-1;for await(const o of t){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(s){if(!(s instanceof RangeError))throw s}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const i=t-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t<160){const i=t-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{const i=t-160;n=this.decodeString(i,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const i=this.lookU8();n=this.decodeString(i,1)}else if(t===218){const i=this.lookU16();n=this.decodeString(i,2)}else if(t===219){const i=this.lookU32();n=this.decodeString(i,4)}else if(t===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===196){const i=this.lookU8();n=this.decodeBinary(i,1)}else if(t===197){const i=this.lookU16();n=this.decodeBinary(i,2)}else if(t===198){const i=this.lookU32();n=this.decodeBinary(i,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const i=this.lookU8();n=this.decodeExtension(i,1)}else if(t===200){const i=this.lookU16();n=this.decodeExtension(i,2)}else if(t===201){const i=this.lookU32();n=this.decodeExtension(i,4)}else throw new Ie(`Unrecognized type byte: ${so(t)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===co)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,r.release(i);else continue e;else if(i.type===Hn){if(n==="__proto__")throw new Ie("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=$a;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,r.release(i);else{i.key=null,i.type=Hn;continue e}}return n}}readHeadByte(){return this.headByte===jn&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=jn}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new Ie(`Unrecognized array type byte: ${so(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new Ie(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new Ie(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new Ie(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw Ra;const r=this.pos+n;let i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?i=this.keyDecoder.decode(this.bytes,r,t):i=Ng(this.bytes,r,t),this.pos+=n+t,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Hn:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new Ie(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw Ra;const r=this.pos+n,i=this.bytes.subarray(r,r+t);return this.pos+=n+t,i}decodeExtension(t,n){if(t>this.maxExtLength)throw new Ie(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),i=this.decodeBinary(t,n+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=Rg(this.view,this.pos);return this.pos+=8,t}readI64(){const t=Na(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}}function nb(e,t){return new fo(t).decode(e)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Br(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function uo(e,...t){if(!Br(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Fa(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function Ma(e){if(typeof e!="function")throw new Error("function expected");return!0}function It(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function Vn(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function Ar(e){if(!Array.isArray(e))throw new Error("array expected")}function Sr(e,t){if(!Fa(!0,t))throw new Error(`${e}: array of strings expected`)}function lo(e,t){if(!Fa(!1,t))throw new Error(`${e}: array of numbers expected`)}function Oe(...e){const t=o=>o,n=(o,s)=>c=>o(s(c)),r=e.map(o=>o.encode).reduceRight(n,t),i=e.map(o=>o.decode).reduce(n,t);return{encode:r,decode:i}}function Ce(e){const t=typeof e=="string"?e.split(""):e,n=t.length;Sr("alphabet",t);const r=new Map(t.map((i,o)=>[i,o]));return{encode:i=>(Ar(i),i.map(o=>{if(!Number.isSafeInteger(o)||o<0||o>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${o}". Allowed: ${e}`);return t[o]})),decode:i=>(Ar(i),i.map(o=>{It("alphabet.decode",o);const s=r.get(o);if(s===void 0)throw new Error(`Unknown letter: "${o}". Allowed: ${e}`);return s}))}}function Te(e=""){return It("join",e),{encode:t=>(Sr("join.decode",t),t.join(e)),decode:t=>(It("join.decode",t),t.split(e))}}function _r(e,t="="){return Vn(e),It("padding",t),{encode(n){for(Sr("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){Sr("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function Pa(e){return Ma(e),{encode:t=>t,decode:t=>e(t)}}function ka(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(Ar(e),!e.length)return[];let r=0;const i=[],o=Array.from(e,c=>{if(Vn(c),c<0||c>=t)throw new Error(`invalid integer: ${c}`);return c}),s=o.length;for(;;){let c=0,a=!0;for(let f=r;f<s;f++){const u=o[f],d=t*c,l=d+u;if(!Number.isSafeInteger(l)||d/t!==c||l-u!==d)throw new Error("convertRadix: carry overflow");const h=l/n;c=l%n;const g=Math.floor(h);if(o[f]=g,!Number.isSafeInteger(g)||g*n+c!==l)throw new Error("convertRadix: carry overflow");if(a)g?a=!1:r=f;else continue}if(i.push(c),a)break}for(let c=0;c<e.length-1&&e[c]===0;c++)i.push(0);return i.reverse()}const La=(e,t)=>t===0?e:La(t,e%t),Ur=(e,t)=>e+(t-La(e,t)),Ir=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function ho(e,t,n,r){if(Ar(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ur(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Ur(t,n)}`);let i=0,o=0;const s=Ir[t],c=Ir[n]-1,a=[];for(const f of e){if(Vn(f),f>=s)throw new Error(`convertRadix2: invalid data word=${f} from=${t}`);if(i=i<<t|f,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=n;o-=n)a.push((i>>o-n&c)>>>0);const u=Ir[o];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<n-o&c,!r&&o>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&a.push(i>>>0),a}function rb(e){Vn(e);const t=2**8;return{encode:n=>{if(!Br(n))throw new Error("radix.encode input should be Uint8Array");return ka(Array.from(n),t,e)},decode:n=>(lo("radix.decode",n),Uint8Array.from(ka(n,e,t)))}}function ze(e,t=!1){if(Vn(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Ur(8,e)>32||Ur(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Br(n))throw new Error("radix2.encode input should be Uint8Array");return ho(Array.from(n),8,e,!t)},decode:n=>(lo("radix2.decode",n),Uint8Array.from(ho(n,e,8,t)))}}function za(e){return Ma(e),function(...t){try{return e.apply(null,t)}catch{}}}const ib=Oe(ze(5),Ce("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),_r(5),Te("")),Ha=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",ja=(e,t)=>{It("base64",e);const n=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,r=t?"base64url":"base64";if(e.length>0&&!n.test(e))throw new Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:r,lastChunkHandling:"strict"})},go=e=>Oe(rb(58),Ce(e),Te("")),bo=Oe(Ce("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Te("")),Va=[996825010,642813549,513874426,1027748829,705979059];function qn(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<Va.length;r++)(t>>r&1)===1&&(n^=Va[r]);return n}function qa(e,t,n=1){const r=e.length;let i=1;for(let o=0;o<r;o++){const s=e.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);i=qn(i)^s>>5}i=qn(i);for(let o=0;o<r;o++)i=qn(i)^e.charCodeAt(o)&31;for(let o of t)i=qn(i)^o;for(let o=0;o<6;o++)i=qn(i);return i^=n,bo.encode(ho([i%Ir[30]],30,5,!1))}function Ka(e){const t=e==="bech32"?1:734539939,n=ze(5),r=n.decode,i=n.encode,o=za(r);function s(d,l,h=90){It("bech32.encode prefix",d),Br(l)&&(l=Array.from(l)),lo("bech32.encode",l);const g=d.length;if(g===0)throw new TypeError(`Invalid prefix length ${g}`);const p=g+7+l.length;if(h!==!1&&p>h)throw new TypeError(`Length ${p} exceeds limit ${h}`);const x=d.toLowerCase(),_=qa(x,l,t);return`${x}1${bo.encode(l)}${_}`}function c(d,l=90){It("bech32.decode input",d);const h=d.length;if(h<8||l!==!1&&h>l)throw new TypeError(`invalid string length: ${h} (${d}). Expected (8..${l})`);const g=d.toLowerCase();if(d!==g&&d!==d.toUpperCase())throw new Error("String must be lowercase or uppercase");const p=g.lastIndexOf("1");if(p===0||p===-1)throw new Error('Letter "1" must be present between prefix and data only');const x=g.slice(0,p),_=g.slice(p+1);if(_.length<6)throw new Error("Data must be at least 6 characters long");const C=bo.decode(_).slice(0,-6),B=qa(x,C,t);if(!_.endsWith(B))throw new Error(`Invalid checksum in ${d}: expected "${B}"`);return{prefix:x,words:C}}const a=za(c);function f(d){const{prefix:l,words:h}=c(d,!1);return{prefix:l,words:h,bytes:r(h)}}function u(d,l){return s(d,i(l))}return{encode:s,decode:c,encodeFromBytes:u,decodeToBytes:f,decodeUnsafe:a,fromWords:r,fromWordsUnsafe:o,toWords:i}}const ob=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",sb={encode(e){return uo(e),e.toHex()},decode(e){return It("hex",e),Uint8Array.fromHex(e)}},cb="https://rpc.walletconnect.org/v1";function po(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(_i(n)).toString("hex")}async function Wa(e,t,n,r,i,o){switch(n.t){case"eip191":return await Za(e,t,n.s);case"eip1271":return await Ya(e,t,n.s,r,i,o);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Za(e,t,n){return(await F0({hash:po(t),signature:n})).toLowerCase()===e.toLowerCase()}async function Ya(e,t,n,r,i,o){const s=ri(r);if(!s.namespace||!s.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const c="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",f=n.substring(2),u=(f.length/2).toString(16).padStart(64,"0"),d=(t.startsWith("0x")?t:po(t)).substring(2),l=c+d+a+u+f,h=await fetch(`${o||cb}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:ab(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:l},"latest"]})}),{result:g}=await h.json();return g?g.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error("isValidEip1271Signature: ",c),!1}}function ab(){return Date.now()+Math.floor(Math.random()*1e3)}function fb(e){const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const o=Buffer.from(e,"base64").slice(1,65);return Ln.encode(o)}function ub(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(o=>o.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const i=vg(r,{dkLen:32});return Ln.encode(i)}function lb(e){const t=new Uint8Array(At(Ga(e)));return Ln.encode(t)}function Ga(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function db(e){const t=Buffer.from(e,"base64"),n=nb(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Zg(n),i=Buffer.from("TX"),o=Buffer.concat([i,Buffer.from(r)]),s=Z0(o);return ib.encode(s).replace(/=+$/,"")}function wo(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function hb(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(wo(t.length)),i.push(t),i.push(Buffer.from([18])),i.push(wo(n.length)),i.push(n),i.push(Buffer.from([26])),i.push(wo(r.length)),i.push(r);const o=Buffer.concat(i),s=At(o);return Buffer.from(s).toString("hex").toUpperCase()}function gb(e){var t,n;const r=[];try{if(typeof e=="string")return r.push(e),r;if(typeof e!="object")return r;e!=null&&e.id&&r.push(e.id);const i=(n=(t=e?.capabilities)==null?void 0:t.caip345)==null?void 0:n.transactionHashes;i&&r.push(...i)}catch(i){console.warn("getWalletSendCallsHashes failed: ",i)}return r}var bb=Object.defineProperty,pb=Object.defineProperties,wb=Object.getOwnPropertyDescriptors,Xa=Object.getOwnPropertySymbols,yb=Object.prototype.hasOwnProperty,mb=Object.prototype.propertyIsEnumerable,Ja=(e,t,n)=>t in e?bb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yo=(e,t)=>{for(var n in t||(t={}))yb.call(t,n)&&Ja(e,n,t[n]);if(Xa)for(var n of Xa(t))mb.call(t,n)&&Ja(e,n,t[n]);return e},Qa=(e,t)=>pb(e,wb(t));const Eb="did:pkh:",Or=e=>e?.split(":"),ef=e=>{const t=e&&Or(e);if(t)return e.includes(Eb)?t[3]:t[1]},tf=e=>{const t=e&&Or(e);if(t)return t[2]+":"+t[3]},mo=e=>{const t=e&&Or(e);if(t)return t.pop()};async function xb(e){const{cacao:t,projectId:n}=e,{s:r,p:i}=t,o=nf(i,i.iss),s=mo(i.iss);return await Wa(s,o,r,tf(i.iss),n)}const nf=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=mo(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const o=`URI: ${e.aud||e.uri}`,s=`Version: ${e.version}`,c=`Chain ID: ${ef(t)}`,a=`Nonce: ${e.nonce}`,f=`Issued At: ${e.iat}`,u=e.exp?`Expiration Time: ${e.exp}`:void 0,d=e.nbf?`Not Before: ${e.nbf}`:void 0,l=e.requestId?`Request ID: ${e.requestId}`:void 0,h=e.resources?`Resources:${e.resources.map(p=>`
- ${p}`).join("")}`:void 0,g=Tr(e.resources);if(g){const p=Ot(g);i=vo(i,p)}return[n,r,"",i,"",o,s,c,a,f,u,d,l,h].filter(p=>p!=null).join(`
`)};function vb(e,t,n){return n.includes("did:pkh:")||(n=`did:pkh:${n}`),{h:{t:"caip122"},p:{iss:n,domain:e.domain,aud:e.aud,version:e.version,nonce:e.nonce,iat:e.iat,statement:e.statement,requestId:e.requestId,resources:e.resources,nbf:e.nbf,exp:e.exp},s:t}}function Db(e){var t;const{authPayload:n,chains:r,methods:i}=e,o=n.statement||"";if(!(r!=null&&r.length))return n;const s=n.chains,c=Ei(s,r);if(!(c!=null&&c.length))throw new Error("No supported chains");const a=rf(n.resources);if(!a)return n;Qe(a);const f=of(a,"eip155");let u=n?.resources||[];if(f!=null&&f.length){const d=sf(f),l=Ei(d,i);if(!(l!=null&&l.length))throw new Error(`Supported methods don't satisfy the requested: ${JSON.stringify(d)}, supported: ${JSON.stringify(i)}`);const h=Eo("request",l,{chains:c}),g=uf(a,"eip155",h);u=((t=n?.resources)==null?void 0:t.slice(0,-1))||[],u.push(Cr(g))}return Qa(yo({},n),{statement:df(o,Tr(u)),chains:c,resources:n!=null&&n.resources||u.length>0?u:void 0})}function rf(e){const t=Tr(e);if(t&&xo(t))return Ot(t)}function Bb(e,t){var n;return(n=e?.att)==null?void 0:n.hasOwnProperty(t)}function of(e,t){var n,r;return(n=e?.att)!=null&&n[t]?Object.keys((r=e?.att)==null?void 0:r[t]):[]}function Ab(e){return e?.map(t=>Object.keys(t))||[]}function sf(e){return e?.map(t=>{var n;return(n=t.split("/"))==null?void 0:n[1]})||[]}function cf(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function af(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function Qe(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const o=r[i];if(!Array.isArray(o))throw new Error(`Ability limits ${i} must be an array of objects, found: ${o}`);if(!o.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);o.forEach(s=>{if(typeof s!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${s}`)})})})}function ff(e,t,n,r={}){return n?.sort((i,o)=>i.localeCompare(o)),{att:{[e]:Eo(t,n,r)}}}function uf(e,t,n){var r;e.att[t]=yo({},n);const i=(r=Object.keys(e.att))==null?void 0:r.sort((s,c)=>s.localeCompare(c)),o={att:{}};return i.reduce((s,c)=>(s.att[c]=e.att[c],s),o)}function Eo(e,t,n={}){t=t?.sort((i,o)=>i.localeCompare(o));const r=t.map(i=>({[`${e}/${i}`]:[n]}));return Object.assign({},...r)}function Cr(e){return Qe(e),`urn:recap:${cf(e).replace(/=/g,"")}`}function Ot(e){const t=af(e.replace("urn:recap:",""));return Qe(t),t}function Sb(e,t,n){const r=ff(e,t,n);return Cr(r)}function xo(e){return e&&e.includes("urn:recap:")}function _b(e,t){const n=Ot(e),r=Ot(t),i=lf(n,r);return Cr(i)}function lf(e,t){Qe(e),Qe(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((i,o)=>i.localeCompare(o)),r={att:{}};return n.forEach(i=>{var o,s;Object.keys(((o=e.att)==null?void 0:o[i])||{}).concat(Object.keys(((s=t.att)==null?void 0:s[i])||{})).sort((c,a)=>c.localeCompare(a)).forEach(c=>{var a,f;r.att[i]=Qa(yo({},r.att[i]),{[c]:((a=e.att[i])==null?void 0:a[c])||((f=t.att[i])==null?void 0:f[c])})})}),r}function vo(e="",t){Qe(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let i=0;Object.keys(t.att).forEach(c=>{const a=Object.keys(t.att[c]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));a.sort((d,l)=>d.action.localeCompare(l.action));const f={};a.forEach(d=>{f[d.ability]||(f[d.ability]=[]),f[d.ability].push(d.action)});const u=Object.keys(f).map(d=>(i++,`(${i}) '${d}': '${f[d].join("', '")}' for '${c}'.`));r.push(u.join(", ").replace(".,","."))});const o=r.join(" "),s=`${n}${o}`;return`${e?e+" ":""}${s}`}function Ub(e){var t;const n=Ot(e);Qe(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function Ib(e){const t=Ot(e);Qe(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(i=>{var o;(o=i?.[0])!=null&&o.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function df(e,t){if(!t)return e;const n=Ot(t);return Qe(n),vo(e,n)}function Tr(e){if(!e)return;const t=e?.[e.length-1];return xo(t)?t:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function hf(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Do(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function Bo(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Ae(e,...t){if(!hf(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function gf(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ob(e,t){Ae(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ct(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function pn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Cb(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const Tb=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Nb(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Ao(e){if(typeof e=="string")e=Nb(e);else if(hf(e))e=So(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function $b(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function Rb(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const Fb=(e,t)=>{function n(r,...i){if(Ae(r),!Tb)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const u=i[0];if(!u)throw new Error("nonce / iv required");e.varSizeNonce?Ae(u):Ae(u,e.nonceLength)}const o=e.tagLength;o&&i[1]!==void 0&&Ae(i[1]);const s=t(r,...i),c=(u,d)=>{if(d!==void 0){if(u!==2)throw new Error("cipher output not supported");Ae(d)}};let a=!1;return{encrypt(u,d){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,Ae(u),c(s.encrypt.length,d),s.encrypt(u,d)},decrypt(u,d){if(Ae(u),o&&u.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return c(s.decrypt.length,d),s.decrypt(u,d)}}}return Object.assign(n,e),n};function bf(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!Pb(t))throw new Error("invalid output, must be aligned");return t}function pf(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}function Mb(e,t,n){Do(n);const r=new Uint8Array(16),i=Cb(r);return pf(i,0,BigInt(t),n),pf(i,8,BigInt(e),n),r}function Pb(e){return e.byteOffset%4===0}function So(e){return Uint8Array.from(e)}const wf=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),kb=wf("expand 16-byte k"),Lb=wf("expand 32-byte k"),zb=Ct(kb),Hb=Ct(Lb);function X(e,t){return e<<t|e>>>32-t}function _o(e){return e.byteOffset%4===0}const Nr=64,jb=16,yf=2**32-1,mf=new Uint32Array;function Vb(e,t,n,r,i,o,s,c){const a=i.length,f=new Uint8Array(Nr),u=Ct(f),d=_o(i)&&_o(o),l=d?Ct(i):mf,h=d?Ct(o):mf;for(let g=0;g<a;s++){if(e(t,n,r,u,s,c),s>=yf)throw new Error("arx: counter overflow");const p=Math.min(Nr,a-g);if(d&&p===Nr){const x=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let _=0,C;_<jb;_++)C=x+_,h[C]=l[C]^u[_];g+=Nr;continue}for(let x=0,_;x<p;x++)_=g+x,o[_]=i[_]^f[x];g+=p}}function qb(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:o,rounds:s}=$b({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Bo(i),Bo(s),Do(o),Do(n),(c,a,f,u,d=0)=>{Ae(c),Ae(a),Ae(f);const l=f.length;if(u===void 0&&(u=new Uint8Array(l)),Ae(u),Bo(d),d<0||d>=yf)throw new Error("arx: counter overflow");if(u.length<l)throw new Error(`arx: output (${u.length}) is shorter than data (${l})`);const h=[];let g=c.length,p,x;if(g===32)h.push(p=So(c)),x=Hb;else if(g===16&&n)p=new Uint8Array(32),p.set(c),p.set(c,16),x=zb,h.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);_o(a)||h.push(a=So(a));const _=Ct(p);if(r){if(a.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(x,_,Ct(a.subarray(0,16)),_),a=a.subarray(16)}const C=16-i;if(C!==a.length)throw new Error(`arx: nonce must be ${C} or 16 bytes`);if(C!==12){const T=new Uint8Array(12);T.set(a,o?0:12-a.length),a=T,h.push(a)}const B=Ct(a);return Vb(e,x,_,B,f,u,d,s),pn(...h),u}}const ce=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class Kb{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=Ao(t),Ae(t,32);const n=ce(t,0),r=ce(t,2),i=ce(t,4),o=ce(t,6),s=ce(t,8),c=ce(t,10),a=ce(t,12),f=ce(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|c<<2)&8191,this.r[7]=(c>>>11|a<<5)&8065,this.r[8]=(a>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let u=0;u<8;u++)this.pad[u]=ce(t,16+2*u)}process(t,n,r=!1){const i=r?0:2048,{h:o,r:s}=this,c=s[0],a=s[1],f=s[2],u=s[3],d=s[4],l=s[5],h=s[6],g=s[7],p=s[8],x=s[9],_=ce(t,n+0),C=ce(t,n+2),B=ce(t,n+4),T=ce(t,n+6),R=ce(t,n+8),L=ce(t,n+10),k=ce(t,n+12),M=ce(t,n+14);let I=o[0]+(_&8191),K=o[1]+((_>>>13|C<<3)&8191),q=o[2]+((C>>>10|B<<6)&8191),N=o[3]+((B>>>7|T<<9)&8191),y=o[4]+((T>>>4|R<<12)&8191),m=o[5]+(R>>>1&8191),b=o[6]+((R>>>14|L<<2)&8191),w=o[7]+((L>>>11|k<<5)&8191),v=o[8]+((k>>>8|M<<8)&8191),A=o[9]+(M>>>5|i),D=0,S=D+I*c+K*(5*x)+q*(5*p)+N*(5*g)+y*(5*h);D=S>>>13,S&=8191,S+=m*(5*l)+b*(5*d)+w*(5*u)+v*(5*f)+A*(5*a),D+=S>>>13,S&=8191;let U=D+I*a+K*c+q*(5*x)+N*(5*p)+y*(5*g);D=U>>>13,U&=8191,U+=m*(5*h)+b*(5*l)+w*(5*d)+v*(5*u)+A*(5*f),D+=U>>>13,U&=8191;let O=D+I*f+K*a+q*c+N*(5*x)+y*(5*p);D=O>>>13,O&=8191,O+=m*(5*g)+b*(5*h)+w*(5*l)+v*(5*d)+A*(5*u),D+=O>>>13,O&=8191;let P=D+I*u+K*f+q*a+N*c+y*(5*x);D=P>>>13,P&=8191,P+=m*(5*p)+b*(5*g)+w*(5*h)+v*(5*l)+A*(5*d),D+=P>>>13,P&=8191;let F=D+I*d+K*u+q*f+N*a+y*c;D=F>>>13,F&=8191,F+=m*(5*x)+b*(5*p)+w*(5*g)+v*(5*h)+A*(5*l),D+=F>>>13,F&=8191;let $=D+I*l+K*d+q*u+N*f+y*a;D=$>>>13,$&=8191,$+=m*c+b*(5*x)+w*(5*p)+v*(5*g)+A*(5*h),D+=$>>>13,$&=8191;let H=D+I*h+K*l+q*d+N*u+y*f;D=H>>>13,H&=8191,H+=m*a+b*c+w*(5*x)+v*(5*p)+A*(5*g),D+=H>>>13,H&=8191;let V=D+I*g+K*h+q*l+N*d+y*u;D=V>>>13,V&=8191,V+=m*f+b*a+w*c+v*(5*x)+A*(5*p),D+=V>>>13,V&=8191;let W=D+I*p+K*g+q*h+N*l+y*d;D=W>>>13,W&=8191,W+=m*u+b*f+w*a+v*c+A*(5*x),D+=W>>>13,W&=8191;let j=D+I*x+K*p+q*g+N*h+y*l;D=j>>>13,j&=8191,j+=m*d+b*u+w*f+v*a+A*c,D+=j>>>13,j&=8191,D=(D<<2)+D|0,D=D+S|0,S=D&8191,D=D>>>13,U+=D,o[0]=S,o[1]=U,o[2]=O,o[3]=P,o[4]=F,o[5]=$,o[6]=H,o[7]=V,o[8]=W,o[9]=j}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let c=2;c<10;c++)t[c]+=i,i=t[c]>>>13,t[c]&=8191;t[0]+=i*5,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,r[0]=t[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=t[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=8192;let o=(i^1)-1;for(let c=0;c<10;c++)r[c]&=o;o=~o;for(let c=0;c<10;c++)t[c]=t[c]&o|r[c];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let s=t[0]+n[0];t[0]=s&65535;for(let c=1;c<8;c++)s=(t[c]+n[c]|0)+(s>>>16)|0,t[c]=s&65535;pn(r)}update(t){gf(this),t=Ao(t),Ae(t);const{buffer:n,blockLen:r}=this,i=t.length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s===r){for(;r<=i-o;o+=r)this.process(t,o);continue}n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){pn(this.h,this.r,this.buffer,this.pad)}digestInto(t){gf(this),Ob(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)t[o++]=r[s]>>>0,t[o++]=r[s]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function Wb(e){const t=(r,i)=>e(i).update(Ao(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const Zb=Wb(e=>new Kb(e));function Yb(e,t,n,r,i,o=20){let s=e[0],c=e[1],a=e[2],f=e[3],u=t[0],d=t[1],l=t[2],h=t[3],g=t[4],p=t[5],x=t[6],_=t[7],C=i,B=n[0],T=n[1],R=n[2],L=s,k=c,M=a,I=f,K=u,q=d,N=l,y=h,m=g,b=p,w=x,v=_,A=C,D=B,S=T,U=R;for(let P=0;P<o;P+=2)L=L+K|0,A=X(A^L,16),m=m+A|0,K=X(K^m,12),L=L+K|0,A=X(A^L,8),m=m+A|0,K=X(K^m,7),k=k+q|0,D=X(D^k,16),b=b+D|0,q=X(q^b,12),k=k+q|0,D=X(D^k,8),b=b+D|0,q=X(q^b,7),M=M+N|0,S=X(S^M,16),w=w+S|0,N=X(N^w,12),M=M+N|0,S=X(S^M,8),w=w+S|0,N=X(N^w,7),I=I+y|0,U=X(U^I,16),v=v+U|0,y=X(y^v,12),I=I+y|0,U=X(U^I,8),v=v+U|0,y=X(y^v,7),L=L+q|0,U=X(U^L,16),w=w+U|0,q=X(q^w,12),L=L+q|0,U=X(U^L,8),w=w+U|0,q=X(q^w,7),k=k+N|0,A=X(A^k,16),v=v+A|0,N=X(N^v,12),k=k+N|0,A=X(A^k,8),v=v+A|0,N=X(N^v,7),M=M+y|0,D=X(D^M,16),m=m+D|0,y=X(y^m,12),M=M+y|0,D=X(D^M,8),m=m+D|0,y=X(y^m,7),I=I+K|0,S=X(S^I,16),b=b+S|0,K=X(K^b,12),I=I+K|0,S=X(S^I,8),b=b+S|0,K=X(K^b,7);let O=0;r[O++]=s+L|0,r[O++]=c+k|0,r[O++]=a+M|0,r[O++]=f+I|0,r[O++]=u+K|0,r[O++]=d+q|0,r[O++]=l+N|0,r[O++]=h+y|0,r[O++]=g+m|0,r[O++]=p+b|0,r[O++]=x+w|0,r[O++]=_+v|0,r[O++]=C+A|0,r[O++]=B+D|0,r[O++]=T+S|0,r[O++]=R+U|0}const Gb=qb(Yb,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Xb=new Uint8Array(16),Ef=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(Xb.subarray(n))},Jb=new Uint8Array(32);function xf(e,t,n,r,i){const o=e(t,n,Jb),s=Zb.create(o);i&&Ef(s,i),Ef(s,r);const c=Mb(r.length,i?i.length:0,!0);s.update(c);const a=s.digest();return pn(o,c),a}const vf=Fb({blockSize:64,nonceLength:12,tagLength:16},(e=>(t,n,r)=>({encrypt(o,s){const c=o.length;s=bf(c+16,s,!1),s.set(o);const a=s.subarray(0,-16);e(t,n,a,a,1);const f=xf(e,t,n,a,r);return s.set(f,c),pn(f),s},decrypt(o,s){s=bf(o.length-16,s,!1);const c=o.subarray(0,-16),a=o.subarray(-16),f=xf(e,t,n,c,r);if(!Rb(a,f))throw new Error("invalid tag");return s.set(o.subarray(0,-16)),e(t,n,s,s,1),pn(f),s}}))(Gb));function Qb(e,t,n){return On(e),n===void 0&&(n=new Uint8Array(e.outputLen)),Fn(e,Ve(n),Ve(t))}const Uo=Uint8Array.from([0]),Df=Uint8Array.of();function ep(e,t,n,r=32){On(e),Ge(r);const i=e.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/i);n===void 0&&(n=Df);const s=new Uint8Array(o*i),c=Fn.create(e,t),a=c._cloneInto(),f=new Uint8Array(c.outputLen);for(let u=0;u<o;u++)Uo[0]=u+1,a.update(u===0?Df:f).update(n).update(Uo).digestInto(f),s.set(f,i*u),c._cloneInto(a);return c.destroy(),a.destroy(),Pe(f,Uo),s.slice(0,r)}const tp=(e,t,n,r,i)=>ep(e,Qb(e,t,n),r,i),Io=BigInt(0),Oo=BigInt(1);function $r(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function Xt(e,t,n=""){const r=wt(e),i=e?.length,o=t!==void 0;if(!r||o&&i!==t){const s=n&&`"${n}" `,c=o?` of length ${t}`:"",a=r?`length=${i}`:`type=${typeof e}`;throw new Error(s+"expected Uint8Array"+c+", got "+a)}return e}function Rr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Bf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Io:BigInt("0x"+e)}function Fr(e){return Bf(ke(e))}function Mr(e){return me(e),Bf(ke(Uint8Array.from(e).reverse()))}function Co(e,t){return Et(e.toString(16).padStart(t*2,"0"))}function To(e,t){return Co(e,t).reverse()}function be(e,t,n){let r;if(typeof t=="string")try{r=Et(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(wt(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}const No=e=>typeof e=="bigint"&&Io<=e;function np(e,t,n){return No(e)&&No(t)&&No(n)&&t<=e&&e<n}function $o(e,t,n,r){if(!np(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Af(e){let t;for(t=0;e>Io;e>>=Oo,t+=1);return t}const Kn=e=>(Oo<<BigInt(e))-Oo;function rp(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),i=h=>Uint8Array.of(h);let o=r(e),s=r(e),c=0;const a=()=>{o.fill(1),s.fill(0),c=0},f=(...h)=>n(s,o,...h),u=(h=r(0))=>{s=f(i(0),h),o=f(),h.length!==0&&(s=f(i(1),h),o=f())},d=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const g=[];for(;h<t;){o=f();const p=o.slice();g.push(p),h+=o.length}return ee(...g)};return(h,g)=>{a(),u(h);let p;for(;!(p=g(d()));)u();return a(),p}}function Pr(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(i,o,s){const c=e[i];if(s&&c===void 0)return;const a=typeof c;if(a!==o||c===null)throw new Error(`param "${i}" is invalid: expected ${o}, got ${a}`)}Object.entries(t).forEach(([i,o])=>r(i,o,!1)),Object.entries(n).forEach(([i,o])=>r(i,o,!0))}function Sf(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}const Se=BigInt(0),ve=BigInt(1),Jt=BigInt(2),_f=BigInt(3),Uf=BigInt(4),If=BigInt(5),ip=BigInt(7),Of=BigInt(8),op=BigInt(9),Cf=BigInt(16);function Ne(e,t){const n=e%t;return n>=Se?n:t+n}function We(e,t,n){let r=e;for(;t-- >Se;)r*=r,r%=n;return r}function Tf(e,t){if(e===Se)throw new Error("invert: expected non-zero number");if(t<=Se)throw new Error("invert: expected positive modulus, got "+t);let n=Ne(e,t),r=t,i=Se,o=ve;for(;n!==Se;){const c=r/n,a=r%n,f=i-o*c;r=n,n=a,i=o,o=f}if(r!==ve)throw new Error("invert: does not exist");return Ne(i,t)}function Ro(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function Nf(e,t){const n=(e.ORDER+ve)/Uf,r=e.pow(t,n);return Ro(e,r,t),r}function sp(e,t){const n=(e.ORDER-If)/Of,r=e.mul(t,Jt),i=e.pow(r,n),o=e.mul(t,i),s=e.mul(e.mul(o,Jt),i),c=e.mul(o,e.sub(s,e.ONE));return Ro(e,c,t),c}function cp(e){const t=Tt(e),n=$f(e),r=n(t,t.neg(t.ONE)),i=n(t,r),o=n(t,t.neg(r)),s=(e+ip)/Cf;return(c,a)=>{let f=c.pow(a,s),u=c.mul(f,r);const d=c.mul(f,i),l=c.mul(f,o),h=c.eql(c.sqr(u),a),g=c.eql(c.sqr(d),a);f=c.cmov(f,u,h),u=c.cmov(l,d,g);const p=c.eql(c.sqr(u),a),x=c.cmov(f,u,p);return Ro(c,x,a),x}}function $f(e){if(e<_f)throw new Error("sqrt is not defined for small field");let t=e-ve,n=0;for(;t%Jt===Se;)t/=Jt,n++;let r=Jt;const i=Tt(e);for(;Ff(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Nf;let o=i.pow(r,t);const s=(t+ve)/Jt;return function(a,f){if(a.is0(f))return f;if(Ff(a,f)!==1)throw new Error("Cannot find square root");let u=n,d=a.mul(a.ONE,o),l=a.pow(f,t),h=a.pow(f,s);for(;!a.eql(l,a.ONE);){if(a.is0(l))return a.ZERO;let g=1,p=a.sqr(l);for(;!a.eql(p,a.ONE);)if(g++,p=a.sqr(p),g===u)throw new Error("Cannot find square root");const x=ve<<BigInt(u-g-1),_=a.pow(d,x);u=g,d=a.sqr(_),l=a.mul(l,d),h=a.mul(h,_)}return h}}function ap(e){return e%Uf===_f?Nf:e%Of===If?sp:e%Cf===op?cp(e):$f(e)}const fp=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function up(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=fp.reduce((r,i)=>(r[i]="function",r),t);return Pr(e,n),e}function lp(e,t,n){if(n<Se)throw new Error("invalid exponent, negatives unsupported");if(n===Se)return e.ONE;if(n===ve)return t;let r=e.ONE,i=t;for(;n>Se;)n&ve&&(r=e.mul(r,i)),i=e.sqr(i),n>>=ve;return r}function Rf(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((s,c,a)=>e.is0(c)?s:(r[a]=s,e.mul(s,c)),e.ONE),o=e.inv(i);return t.reduceRight((s,c,a)=>e.is0(c)?s:(r[a]=e.mul(s,r[a]),e.mul(s,c)),o),r}function Ff(e,t){const n=(e.ORDER-ve)/Jt,r=e.pow(t,n),i=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),s=e.eql(r,e.neg(e.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function Mf(e,t){t!==void 0&&Ge(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Tt(e,t,n=!1,r={}){if(e<=Se)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,o,s=!1,c;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const l=t;l.BITS&&(i=l.BITS),l.sqrt&&(o=l.sqrt),typeof l.isLE=="boolean"&&(n=l.isLE),typeof l.modFromBytes=="boolean"&&(s=l.modFromBytes),c=l.allowedLengths}else typeof t=="number"&&(i=t),r.sqrt&&(o=r.sqrt);const{nBitLength:a,nByteLength:f}=Mf(e,i);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const d=Object.freeze({ORDER:e,isLE:n,BITS:a,BYTES:f,MASK:Kn(a),ZERO:Se,ONE:ve,allowedLengths:c,create:l=>Ne(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return Se<=l&&l<e},is0:l=>l===Se,isValidNot0:l=>!d.is0(l)&&d.isValid(l),isOdd:l=>(l&ve)===ve,neg:l=>Ne(-l,e),eql:(l,h)=>l===h,sqr:l=>Ne(l*l,e),add:(l,h)=>Ne(l+h,e),sub:(l,h)=>Ne(l-h,e),mul:(l,h)=>Ne(l*h,e),pow:(l,h)=>lp(d,l,h),div:(l,h)=>Ne(l*Tf(h,e),e),sqrN:l=>l*l,addN:(l,h)=>l+h,subN:(l,h)=>l-h,mulN:(l,h)=>l*h,inv:l=>Tf(l,e),sqrt:o||(l=>(u||(u=ap(e)),u(d,l))),toBytes:l=>n?To(l,f):Co(l,f),fromBytes:(l,h=!0)=>{if(c){if(!c.includes(l.length)||l.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+l.length);const p=new Uint8Array(f);p.set(l,n?0:p.length-l.length),l=p}if(l.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+l.length);let g=n?Mr(l):Fr(l);if(s&&(g=Ne(g,e)),!h&&!d.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:l=>Rf(d,l),cmov:(l,h,g)=>g?h:l});return Object.freeze(d)}function Pf(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function kf(e){const t=Pf(e);return t+Math.ceil(t/2)}function dp(e,t,n=!1){const r=e.length,i=Pf(t),o=kf(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const s=n?Mr(e):Fr(e),c=Ne(s,t-ve)+ve;return n?To(c,i):Co(c,i)}const wn=BigInt(0),Qt=BigInt(1);function kr(e,t){const n=t.negate();return e?n:t}function Fo(e,t){const n=Rf(e.Fp,t.map(r=>r.Z));return t.map((r,i)=>e.fromAffine(r.toAffine(n[i])))}function Lf(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Mo(e,t){Lf(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,o=Kn(e),s=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:i,shiftBy:s}}function zf(e,t,n){const{windowSize:r,mask:i,maxNumber:o,shiftBy:s}=n;let c=Number(e&i),a=e>>s;c>r&&(c-=o,a+=Qt);const f=t*r,u=f+Math.abs(c)-1,d=c===0,l=c<0,h=t%2!==0;return{nextN:a,offset:u,isZero:d,isNeg:l,isNegF:h,offsetF:f}}function hp(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function gp(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Po=new WeakMap,Hf=new WeakMap;function ko(e){return Hf.get(e)||1}function jf(e){if(e!==wn)throw new Error("invalid wNAF")}class bp{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let i=t;for(;n>wn;)n&Qt&&(r=r.add(i)),i=i.double(),n>>=Qt;return r}precomputeWindow(t,n){const{windows:r,windowSize:i}=Mo(n,this.bits),o=[];let s=t,c=s;for(let a=0;a<r;a++){c=s,o.push(c);for(let f=1;f<i;f++)c=c.add(s),o.push(c);s=c.double()}return o}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,o=this.BASE;const s=Mo(t,this.bits);for(let c=0;c<s.windows;c++){const{nextN:a,offset:f,isZero:u,isNeg:d,isNegF:l,offsetF:h}=zf(r,c,s);r=a,u?o=o.add(kr(l,n[h])):i=i.add(kr(d,n[f]))}return jf(r),{p:i,f:o}}wNAFUnsafe(t,n,r,i=this.ZERO){const o=Mo(t,this.bits);for(let s=0;s<o.windows&&r!==wn;s++){const{nextN:c,offset:a,isZero:f,isNeg:u}=zf(r,s,o);if(r=c,!f){const d=n[a];i=i.add(u?d.negate():d)}}return jf(r),i}getPrecomputes(t,n,r){let i=Po.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(i=r(i)),Po.set(n,i))),i}cached(t,n,r){const i=ko(t);return this.wNAF(i,this.getPrecomputes(i,t,r),n)}unsafe(t,n,r,i){const o=ko(t);return o===1?this._unsafeLadder(t,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,r),n,i)}createCache(t,n){Lf(n,this.bits),Hf.set(t,n),Po.delete(t)}hasCache(t){return ko(t)!==1}}function pp(e,t,n,r){let i=t,o=e.ZERO,s=e.ZERO;for(;n>wn||r>wn;)n&Qt&&(o=o.add(i)),r&Qt&&(s=s.add(i)),i=i.double(),n>>=Qt,r>>=Qt;return{p1:o,p2:s}}function wp(e,t,n,r){hp(n,e),gp(r,t);const i=n.length,o=r.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,c=Af(BigInt(i));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const f=Kn(a),u=new Array(Number(f)+1).fill(s),d=Math.floor((t.BITS-1)/a)*a;let l=s;for(let h=d;h>=0;h-=a){u.fill(s);for(let p=0;p<o;p++){const x=r[p],_=Number(x>>BigInt(h)&f);u[_]=u[_].add(n[p])}let g=s;for(let p=u.length-1,x=s;p>0;p--)x=x.add(u[p]),g=g.add(x);if(l=l.add(g),h!==0)for(let p=0;p<a;p++)l=l.double()}return l}function Vf(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return up(t),t}else return Tt(e,{isLE:n})}function yp(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const f=t[a];if(!(typeof f=="bigint"&&f>wn))throw new Error(`CURVE.${a} must be positive bigint`)}const i=Vf(t.p,n.Fp,r),o=Vf(t.n,n.Fn,r),c=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(const a of c)if(!i.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:i,Fn:o}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),Vt("HashToScalar-");const Wn=BigInt(0),yn=BigInt(1),Lr=BigInt(2);function mp(e){return Pr(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function Ep(e){const t=mp(e),{P:n,type:r,adjustScalarBytes:i,powPminus2:o,randomBytes:s}=t,c=r==="x25519";if(!c&&r!=="x448")throw new Error("invalid type");const a=s||qe,f=c?255:448,u=c?32:56,d=BigInt(c?9:5),l=BigInt(c?121665:39081),h=c?Lr**BigInt(254):Lr**BigInt(447),g=c?BigInt(8)*Lr**BigInt(251)-yn:BigInt(4)*Lr**BigInt(445)-yn,p=h+g+yn,x=y=>Ne(y,n),_=C(d);function C(y){return To(x(y),u)}function B(y){const m=be("u coordinate",y,u);return c&&(m[31]&=127),x(Mr(m))}function T(y){return Mr(i(be("scalar",y,u)))}function R(y,m){const b=M(B(m),T(y));if(b===Wn)throw new Error("invalid private or public key received");return C(b)}function L(y){return R(y,_)}function k(y,m,b){const w=x(y*(m-b));return m=x(m-w),b=x(b+w),{x_2:m,x_3:b}}function M(y,m){$o("u",y,Wn,n),$o("scalar",m,h,p);const b=m,w=y;let v=yn,A=Wn,D=y,S=yn,U=Wn;for(let P=BigInt(f-1);P>=Wn;P--){const F=b>>P&yn;U^=F,{x_2:v,x_3:D}=k(U,v,D),{x_2:A,x_3:S}=k(U,A,S),U=F;const $=v+A,H=x($*$),V=v-A,W=x(V*V),j=H-W,Z=D+S,oe=D-S,Fe=x(oe*$),Ye=x(Z*V),sr=Fe+Ye,ni=Fe-Ye;D=x(sr*sr),S=x(w*x(ni*ni)),v=x(H*W),A=x(j*(H+x(l*j)))}({x_2:v,x_3:D}=k(U,v,D)),{x_2:A,x_3:S}=k(U,A,S);const O=o(A);return x(v*O)}const I={secretKey:u,publicKey:u,seed:u},K=(y=a(u))=>(me(y,I.seed),y);function q(y){const m=K(y);return{secretKey:m,publicKey:L(m)}}return{keygen:q,getSharedSecret:(y,m)=>R(y,m),getPublicKey:y=>L(y),scalarMult:R,scalarMultBase:L,utils:{randomSecretKey:K,randomPrivateKey:K},GuBytes:_.slice(),lengths:I}}const xp=BigInt(1),qf=BigInt(2),vp=BigInt(3),Dp=BigInt(5),Bp=BigInt(8),Kf=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Ap={p:Kf,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Bp,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Sp(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),o=Kf,c=e*e%o*e%o,a=We(c,qf,o)*c%o,f=We(a,xp,o)*e%o,u=We(f,Dp,o)*f%o,d=We(u,t,o)*u%o,l=We(d,n,o)*d%o,h=We(l,r,o)*l%o,g=We(h,i,o)*h%o,p=We(g,i,o)*h%o,x=We(p,t,o)*u%o;return{pow_p_5_8:We(x,qf,o)*e%o,b2:c}}function _p(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const Up=Tt(Ap.p,{isLE:!0}),Lo=(()=>{const e=Up.ORDER;return Ep({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=Sp(t);return Ne(We(n,vp,e)*r,e)},adjustScalarBytes:_p})})(),Wf=(e,t)=>(e+(e>=0?t:-t)/Zf)/t;function Ip(e,t,n){const[[r,i],[o,s]]=t,c=Wf(s*e,n),a=Wf(-i*e,n);let f=e-c*r-a*o,u=-c*i-a*s;const d=f<at,l=u<at;d&&(f=-f),l&&(u=-u);const h=Kn(Math.ceil(Af(n)/2))+mn;if(f<at||f>=h||u<at||u>=h)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:d,k1:f,k2neg:l,k2:u}}function zo(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function Ho(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===void 0?t[r]:e[r];return $r(n.lowS,"lowS"),$r(n.prehash,"prehash"),n.format!==void 0&&zo(n.format),n}class Op extends Error{constructor(t=""){super(t)}}const ct={Err:Op,_tlv:{encode:(e,t)=>{const{Err:n}=ct;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=Rr(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?Rr(i.length/2|128):"";return Rr(e)+o+i+t},decode(e,t){const{Err:n}=ct;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],o=!!(i&128);let s=0;if(!o)s=i;else{const a=i&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const f=t.subarray(r,r+a);if(f.length!==a)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of f)s=s<<8|u;if(r+=a,s<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+s);if(c.length!==s)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=ct;if(e<at)throw new t("integer: negative integers are not allowed");let n=Rr(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ct;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Fr(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ct,i=be("signature",e),{v:o,l:s}=r.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,o),{v:f,l:u}=r.decode(2,a);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(f)}},hexFromSig(e){const{_tlv:t,_int:n}=ct,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),o=r+i;return t.encode(48,o)}},at=BigInt(0),mn=BigInt(1),Zf=BigInt(2),zr=BigInt(3),Cp=BigInt(4);function En(e,t){const{BYTES:n}=e;let r;if(typeof t=="bigint")r=t;else{let i=be("private key",t);try{r=e.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Tp(e,t={}){const n=yp("weierstrass",e,t),{Fp:r,Fn:i}=n;let o=n.CURVE;const{h:s,n:c}=o;Pr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:a}=t;if(a&&(!r.is0(o.a)||typeof a.beta!="bigint"||!Array.isArray(a.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=Gf(r,i);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(N,y,m){const{x:b,y:w}=y.toAffine(),v=r.toBytes(b);if($r(m,"isCompressed"),m){u();const A=!r.isOdd(w);return ee(Yf(A),v)}else return ee(Uint8Array.of(4),v,r.toBytes(w))}function l(N){Xt(N,void 0,"Point");const{publicKey:y,publicKeyUncompressed:m}=f,b=N.length,w=N[0],v=N.subarray(1);if(b===y&&(w===2||w===3)){const A=r.fromBytes(v);if(!r.isValid(A))throw new Error("bad point: is not on curve, wrong x");const D=p(A);let S;try{S=r.sqrt(D)}catch(P){const F=P instanceof Error?": "+P.message:"";throw new Error("bad point: is not on curve, sqrt error"+F)}u();const U=r.isOdd(S);return(w&1)===1!==U&&(S=r.neg(S)),{x:A,y:S}}else if(b===m&&w===4){const A=r.BYTES,D=r.fromBytes(v.subarray(0,A)),S=r.fromBytes(v.subarray(A,A*2));if(!x(D,S))throw new Error("bad point: is not on curve");return{x:D,y:S}}else throw new Error(`bad point: got length ${b}, expected compressed=${y} or uncompressed=${m}`)}const h=t.toBytes||d,g=t.fromBytes||l;function p(N){const y=r.sqr(N),m=r.mul(y,N);return r.add(r.add(m,r.mul(N,o.a)),o.b)}function x(N,y){const m=r.sqr(y),b=p(N);return r.eql(m,b)}if(!x(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const _=r.mul(r.pow(o.a,zr),Cp),C=r.mul(r.sqr(o.b),BigInt(27));if(r.is0(r.add(_,C)))throw new Error("bad curve params: a or b");function B(N,y,m=!1){if(!r.isValid(y)||m&&r.is0(y))throw new Error(`bad point coordinate ${N}`);return y}function T(N){if(!(N instanceof I))throw new Error("ProjectivePoint expected")}function R(N){if(!a||!a.basises)throw new Error("no endo");return Ip(N,a.basises,i.ORDER)}const L=Sf((N,y)=>{const{X:m,Y:b,Z:w}=N;if(r.eql(w,r.ONE))return{x:m,y:b};const v=N.is0();y==null&&(y=v?r.ONE:r.inv(w));const A=r.mul(m,y),D=r.mul(b,y),S=r.mul(w,y);if(v)return{x:r.ZERO,y:r.ZERO};if(!r.eql(S,r.ONE))throw new Error("invZ was invalid");return{x:A,y:D}}),k=Sf(N=>{if(N.is0()){if(t.allowInfinityPoint&&!r.is0(N.Y))return;throw new Error("bad point: ZERO")}const{x:y,y:m}=N.toAffine();if(!r.isValid(y)||!r.isValid(m))throw new Error("bad point: x or y not field elements");if(!x(y,m))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function M(N,y,m,b,w){return m=new I(r.mul(m.X,N),m.Y,m.Z),y=kr(b,y),m=kr(w,m),y.add(m)}class I{constructor(y,m,b){this.X=B("x",y),this.Y=B("y",m,!0),this.Z=B("z",b),Object.freeze(this)}static CURVE(){return o}static fromAffine(y){const{x:m,y:b}=y||{};if(!y||!r.isValid(m)||!r.isValid(b))throw new Error("invalid affine point");if(y instanceof I)throw new Error("projective point not allowed");return r.is0(m)&&r.is0(b)?I.ZERO:new I(m,b,r.ONE)}static fromBytes(y){const m=I.fromAffine(g(Xt(y,void 0,"point")));return m.assertValidity(),m}static fromHex(y){return I.fromBytes(be("pointHex",y))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(y=8,m=!0){return q.createCache(this,y),m||this.multiply(zr),this}assertValidity(){k(this)}hasEvenY(){const{y}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(y)}equals(y){T(y);const{X:m,Y:b,Z:w}=this,{X:v,Y:A,Z:D}=y,S=r.eql(r.mul(m,D),r.mul(v,w)),U=r.eql(r.mul(b,D),r.mul(A,w));return S&&U}negate(){return new I(this.X,r.neg(this.Y),this.Z)}double(){const{a:y,b:m}=o,b=r.mul(m,zr),{X:w,Y:v,Z:A}=this;let D=r.ZERO,S=r.ZERO,U=r.ZERO,O=r.mul(w,w),P=r.mul(v,v),F=r.mul(A,A),$=r.mul(w,v);return $=r.add($,$),U=r.mul(w,A),U=r.add(U,U),D=r.mul(y,U),S=r.mul(b,F),S=r.add(D,S),D=r.sub(P,S),S=r.add(P,S),S=r.mul(D,S),D=r.mul($,D),U=r.mul(b,U),F=r.mul(y,F),$=r.sub(O,F),$=r.mul(y,$),$=r.add($,U),U=r.add(O,O),O=r.add(U,O),O=r.add(O,F),O=r.mul(O,$),S=r.add(S,O),F=r.mul(v,A),F=r.add(F,F),O=r.mul(F,$),D=r.sub(D,O),U=r.mul(F,P),U=r.add(U,U),U=r.add(U,U),new I(D,S,U)}add(y){T(y);const{X:m,Y:b,Z:w}=this,{X:v,Y:A,Z:D}=y;let S=r.ZERO,U=r.ZERO,O=r.ZERO;const P=o.a,F=r.mul(o.b,zr);let $=r.mul(m,v),H=r.mul(b,A),V=r.mul(w,D),W=r.add(m,b),j=r.add(v,A);W=r.mul(W,j),j=r.add($,H),W=r.sub(W,j),j=r.add(m,w);let Z=r.add(v,D);return j=r.mul(j,Z),Z=r.add($,V),j=r.sub(j,Z),Z=r.add(b,w),S=r.add(A,D),Z=r.mul(Z,S),S=r.add(H,V),Z=r.sub(Z,S),O=r.mul(P,j),S=r.mul(F,V),O=r.add(S,O),S=r.sub(H,O),O=r.add(H,O),U=r.mul(S,O),H=r.add($,$),H=r.add(H,$),V=r.mul(P,V),j=r.mul(F,j),H=r.add(H,V),V=r.sub($,V),V=r.mul(P,V),j=r.add(j,V),$=r.mul(H,j),U=r.add(U,$),$=r.mul(Z,j),S=r.mul(W,S),S=r.sub(S,$),$=r.mul(W,H),O=r.mul(Z,O),O=r.add(O,$),new I(S,U,O)}subtract(y){return this.add(y.negate())}is0(){return this.equals(I.ZERO)}multiply(y){const{endo:m}=t;if(!i.isValidNot0(y))throw new Error("invalid scalar: out of range");let b,w;const v=A=>q.cached(this,A,D=>Fo(I,D));if(m){const{k1neg:A,k1:D,k2neg:S,k2:U}=R(y),{p:O,f:P}=v(D),{p:F,f:$}=v(U);w=P.add($),b=M(m.beta,O,F,A,S)}else{const{p:A,f:D}=v(y);b=A,w=D}return Fo(I,[b,w])[0]}multiplyUnsafe(y){const{endo:m}=t,b=this;if(!i.isValid(y))throw new Error("invalid scalar: out of range");if(y===at||b.is0())return I.ZERO;if(y===mn)return b;if(q.hasCache(this))return this.multiply(y);if(m){const{k1neg:w,k1:v,k2neg:A,k2:D}=R(y),{p1:S,p2:U}=pp(I,b,v,D);return M(m.beta,S,U,w,A)}else return q.unsafe(b,y)}multiplyAndAddUnsafe(y,m,b){const w=this.multiplyUnsafe(m).add(y.multiplyUnsafe(b));return w.is0()?void 0:w}toAffine(y){return L(this,y)}isTorsionFree(){const{isTorsionFree:y}=t;return s===mn?!0:y?y(I,this):q.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:y}=t;return s===mn?this:y?y(I,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(y=!0){return $r(y,"isCompressed"),this.assertValidity(),h(I,this,y)}toHex(y=!0){return ke(this.toBytes(y))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(y=!0){return this.toBytes(y)}_setWindowSize(y){this.precompute(y)}static normalizeZ(y){return Fo(I,y)}static msm(y,m){return wp(I,i,y,m)}static fromPrivateKey(y){return I.BASE.multiply(En(i,y))}}I.BASE=new I(o.Gx,o.Gy,r.ONE),I.ZERO=new I(r.ZERO,r.ONE,r.ZERO),I.Fp=r,I.Fn=i;const K=i.BITS,q=new bp(I,t.endo?Math.ceil(K/2):K);return I.BASE.precompute(8),I}function Yf(e){return Uint8Array.of(e?2:3)}function Gf(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Np(e,t={}){const{Fn:n}=e,r=t.randomBytes||qe,i=Object.assign(Gf(e.Fp,n),{seed:kf(n.ORDER)});function o(h){try{return!!En(n,h)}catch{return!1}}function s(h,g){const{publicKey:p,publicKeyUncompressed:x}=i;try{const _=h.length;return g===!0&&_!==p||g===!1&&_!==x?!1:!!e.fromBytes(h)}catch{return!1}}function c(h=r(i.seed)){return dp(Xt(h,i.seed,"seed"),n.ORDER)}function a(h,g=!0){return e.BASE.multiply(En(n,h)).toBytes(g)}function f(h){const g=c(h);return{secretKey:g,publicKey:a(g)}}function u(h){if(typeof h=="bigint")return!1;if(h instanceof e)return!0;const{secretKey:g,publicKey:p,publicKeyUncompressed:x}=i;if(n.allowedLengths||g===p)return;const _=be("key",h).length;return _===p||_===x}function d(h,g,p=!0){if(u(h)===!0)throw new Error("first arg must be private key");if(u(g)===!1)throw new Error("second arg must be public key");const x=En(n,h);return e.fromHex(g).multiply(x).toBytes(p)}return Object.freeze({getPublicKey:a,getSharedSecret:d,keygen:f,Point:e,utils:{isValidSecretKey:o,isValidPublicKey:s,randomSecretKey:c,isValidPrivateKey:o,randomPrivateKey:c,normPrivateKeyToScalar:h=>En(n,h),precompute(h=8,g=e.BASE){return g.precompute(h,!1)}},lengths:i})}function $p(e,t,n={}){On(t),Pr(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||qe,i=n.hmac||((m,...b)=>Fn(t,m,ee(...b))),{Fp:o,Fn:s}=e,{ORDER:c,BITS:a}=s,{keygen:f,getPublicKey:u,getSharedSecret:d,utils:l,lengths:h}=Np(e,n),g={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},p="compact";function x(m){const b=c>>mn;return m>b}function _(m,b){if(!s.isValidNot0(b))throw new Error(`invalid signature ${m}: out of range 1..Point.Fn.ORDER`);return b}function C(m,b){zo(b);const w=h.signature,v=b==="compact"?w:b==="recovered"?w+1:void 0;return Xt(m,v,`${b} signature`)}class B{constructor(b,w,v){this.r=_("r",b),this.s=_("s",w),v!=null&&(this.recovery=v),Object.freeze(this)}static fromBytes(b,w=p){C(b,w);let v;if(w==="der"){const{r:U,s:O}=ct.toSig(Xt(b));return new B(U,O)}w==="recovered"&&(v=b[0],w="compact",b=b.subarray(1));const A=s.BYTES,D=b.subarray(0,A),S=b.subarray(A,A*2);return new B(s.fromBytes(D),s.fromBytes(S),v)}static fromHex(b,w){return this.fromBytes(Et(b),w)}addRecoveryBit(b){return new B(this.r,this.s,b)}recoverPublicKey(b){const w=o.ORDER,{r:v,s:A,recovery:D}=this;if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");if(c*Zf<w&&D>1)throw new Error("recovery id is ambiguous for h>1 curve");const U=D===2||D===3?v+c:v;if(!o.isValid(U))throw new Error("recovery id 2 or 3 invalid");const O=o.toBytes(U),P=e.fromBytes(ee(Yf((D&1)===0),O)),F=s.inv(U),$=R(be("msgHash",b)),H=s.create(-$*F),V=s.create(A*F),W=e.BASE.multiplyUnsafe(H).add(P.multiplyUnsafe(V));if(W.is0())throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return x(this.s)}toBytes(b=p){if(zo(b),b==="der")return Et(ct.hexFromSig(this));const w=s.toBytes(this.r),v=s.toBytes(this.s);if(b==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ee(Uint8Array.of(this.recovery),w,v)}return ee(w,v)}toHex(b){return ke(this.toBytes(b))}assertValidity(){}static fromCompact(b){return B.fromBytes(be("sig",b),"compact")}static fromDER(b){return B.fromBytes(be("sig",b),"der")}normalizeS(){return this.hasHighS()?new B(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ke(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ke(this.toBytes("compact"))}}const T=n.bits2int||function(b){if(b.length>8192)throw new Error("input is too large");const w=Fr(b),v=b.length*8-a;return v>0?w>>BigInt(v):w},R=n.bits2int_modN||function(b){return s.create(T(b))},L=Kn(a);function k(m){return $o("num < 2^"+a,m,at,L),s.toBytes(m)}function M(m,b){return Xt(m,void 0,"message"),b?Xt(t(m),void 0,"prehashed message"):m}function I(m,b,w){if(["recovered","canonical"].some(H=>H in w))throw new Error("sign() legacy options not supported");const{lowS:v,prehash:A,extraEntropy:D}=Ho(w,g);m=M(m,A);const S=R(m),U=En(s,b),O=[k(U),k(S)];if(D!=null&&D!==!1){const H=D===!0?r(h.secretKey):D;O.push(be("extraEntropy",H))}const P=ee(...O),F=S;function $(H){const V=T(H);if(!s.isValidNot0(V))return;const W=s.inv(V),j=e.BASE.multiply(V).toAffine(),Z=s.create(j.x);if(Z===at)return;const oe=s.create(W*s.create(F+Z*U));if(oe===at)return;let Fe=(j.x===Z?0:2)|Number(j.y&mn),Ye=oe;return v&&x(oe)&&(Ye=s.neg(oe),Fe^=1),new B(Z,Ye,Fe)}return{seed:P,k2sig:$}}function K(m,b,w={}){m=be("message",m);const{seed:v,k2sig:A}=I(m,b,w);return rp(t.outputLen,s.BYTES,i)(v,A)}function q(m){let b;const w=typeof m=="string"||wt(m),v=!w&&m!==null&&typeof m=="object"&&typeof m.r=="bigint"&&typeof m.s=="bigint";if(!w&&!v)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(v)b=new B(m.r,m.s);else if(w){try{b=B.fromBytes(be("sig",m),"der")}catch(A){if(!(A instanceof ct.Err))throw A}if(!b)try{b=B.fromBytes(be("sig",m),"compact")}catch{return!1}}return b||!1}function N(m,b,w,v={}){const{lowS:A,prehash:D,format:S}=Ho(v,g);if(w=be("publicKey",w),b=M(be("message",b),D),"strict"in v)throw new Error("options.strict was renamed to lowS");const U=S===void 0?q(m):B.fromBytes(be("sig",m),S);if(U===!1)return!1;try{const O=e.fromBytes(w);if(A&&U.hasHighS())return!1;const{r:P,s:F}=U,$=R(b),H=s.inv(F),V=s.create($*H),W=s.create(P*H),j=e.BASE.multiplyUnsafe(V).add(O.multiplyUnsafe(W));return j.is0()?!1:s.create(j.x)===P}catch{return!1}}function y(m,b,w={}){const{prehash:v}=Ho(w,g);return b=M(b,v),B.fromBytes(m,"recovered").recoverPublicKey(b).toBytes()}return Object.freeze({keygen:f,getPublicKey:u,getSharedSecret:d,utils:l,lengths:h,Point:e,sign:K,verify:N,recoverPublicKey:y,Signature:B,hash:t})}function Rp(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0;const i=Tt(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),o={Fp:n,Fn:i,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:o}}function Fp(e){const{CURVE:t,curveOpts:n}=Rp(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}function Mp(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,Mf(n.Fn.ORDER,n.Fn.BITS))})}function Pp(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:i}=Fp(e),o=Tp(t,n),s=$p(o,r,i);return Mp(e,s)}function jo(e,t){const n=r=>Pp({...e,hash:r});return{...n(t),create:n}}const Xf={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Jf={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Qf={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},kp=Tt(Xf.p),Lp=Tt(Jf.p),zp=Tt(Qf.p),Hp=jo({...Xf,Fp:kp,lowS:!1},At);jo({...Jf,Fp:Lp,lowS:!1},W0),jo({...Qf,Fp:zp,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},K0);const jp=Hp,Vp=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function qp(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return Vp(e)}catch{return e}}function Kp(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function eu(e,...t){if(!Kp(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function tu(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Wp(e,t){eu(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const xn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vo=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function Zp(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function nu(e){return typeof e=="string"&&(e=Zp(e)),eu(e),e}class Yp{clone(){return this._cloneInto()}}function Gp(e){const t=r=>e().update(nu(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Xp(e=32){if(xn&&typeof xn.getRandomValues=="function")return xn.getRandomValues(new Uint8Array(e));if(xn&&typeof xn.randomBytes=="function")return xn.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function Jp(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}class Qp extends Yp{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Vo(this.buffer)}update(t){tu(this);const{view:n,buffer:r,blockLen:i}=this;t=nu(t);const o=t.length;for(let s=0;s<o;){const c=Math.min(i-this.pos,o-s);if(c===i){const a=Vo(t);for(;i<=o-s;s+=i)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){tu(this),Wp(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let d=s;d<i;d++)n[d]=0;Jp(r,i-8,BigInt(this.length*8),o),this.process(r,0);const c=Vo(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<f;d++)c.setUint32(4*d,u[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:c}=this;return t.length=i,t.pos=c,t.finished=o,t.destroyed=s,i%n&&t.buffer.set(r),t}}const Hr=BigInt(2**32-1),qo=BigInt(32);function ru(e,t=!1){return t?{h:Number(e&Hr),l:Number(e>>qo&Hr)}:{h:Number(e>>qo&Hr)|0,l:Number(e&Hr)|0}}function ew(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=ru(e[i],t);[n[i],r[i]]=[o,s]}return[n,r]}const tw=(e,t)=>BigInt(e>>>0)<<qo|BigInt(t>>>0),nw=(e,t,n)=>e>>>n,rw=(e,t,n)=>e<<32-n|t>>>n,iw=(e,t,n)=>e>>>n|t<<32-n,ow=(e,t,n)=>e<<32-n|t>>>n,sw=(e,t,n)=>e<<64-n|t>>>n-32,cw=(e,t,n)=>e>>>n-32|t<<64-n,aw=(e,t)=>t,fw=(e,t)=>e,uw=(e,t,n)=>e<<n|t>>>32-n,lw=(e,t,n)=>t<<n|e>>>32-n,dw=(e,t,n)=>t<<n-32|e>>>64-n,hw=(e,t,n)=>e<<n-32|t>>>64-n;function gw(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const bw=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),pw=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,ww=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),yw=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,mw=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Ew=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,G={fromBig:ru,split:ew,toBig:tw,shrSH:nw,shrSL:rw,rotrSH:iw,rotrSL:ow,rotrBH:sw,rotrBL:cw,rotr32H:aw,rotr32L:fw,rotlSH:uw,rotlSL:lw,rotlBH:dw,rotlBL:hw,add:gw,add3L:bw,add3H:pw,add4L:ww,add4H:yw,add5H:Ew,add5L:mw},[xw,vw]=G.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Nt=new Uint32Array(80),$t=new Uint32Array(80);class Dw extends Qp{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:c,Dl:a,Eh:f,El:u,Fh:d,Fl:l,Gh:h,Gl:g,Hh:p,Hl:x}=this;return[t,n,r,i,o,s,c,a,f,u,d,l,h,g,p,x]}set(t,n,r,i,o,s,c,a,f,u,d,l,h,g,p,x){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=a|0,this.Eh=f|0,this.El=u|0,this.Fh=d|0,this.Fl=l|0,this.Gh=h|0,this.Gl=g|0,this.Hh=p|0,this.Hl=x|0}process(t,n){for(let B=0;B<16;B++,n+=4)Nt[B]=t.getUint32(n),$t[B]=t.getUint32(n+=4);for(let B=16;B<80;B++){const T=Nt[B-15]|0,R=$t[B-15]|0,L=G.rotrSH(T,R,1)^G.rotrSH(T,R,8)^G.shrSH(T,R,7),k=G.rotrSL(T,R,1)^G.rotrSL(T,R,8)^G.shrSL(T,R,7),M=Nt[B-2]|0,I=$t[B-2]|0,K=G.rotrSH(M,I,19)^G.rotrBH(M,I,61)^G.shrSH(M,I,6),q=G.rotrSL(M,I,19)^G.rotrBL(M,I,61)^G.shrSL(M,I,6),N=G.add4L(k,q,$t[B-7],$t[B-16]),y=G.add4H(N,L,K,Nt[B-7],Nt[B-16]);Nt[B]=y|0,$t[B]=N|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:c,Cl:a,Dh:f,Dl:u,Eh:d,El:l,Fh:h,Fl:g,Gh:p,Gl:x,Hh:_,Hl:C}=this;for(let B=0;B<80;B++){const T=G.rotrSH(d,l,14)^G.rotrSH(d,l,18)^G.rotrBH(d,l,41),R=G.rotrSL(d,l,14)^G.rotrSL(d,l,18)^G.rotrBL(d,l,41),L=d&h^~d&p,k=l&g^~l&x,M=G.add5L(C,R,k,vw[B],$t[B]),I=G.add5H(M,_,T,L,xw[B],Nt[B]),K=M|0,q=G.rotrSH(r,i,28)^G.rotrBH(r,i,34)^G.rotrBH(r,i,39),N=G.rotrSL(r,i,28)^G.rotrBL(r,i,34)^G.rotrBL(r,i,39),y=r&o^r&c^o&c,m=i&s^i&a^s&a;_=p|0,C=x|0,p=h|0,x=g|0,h=d|0,g=l|0,{h:d,l}=G.add(f|0,u|0,I|0,K|0),f=c|0,u=a|0,c=o|0,a=s|0,o=r|0,s=i|0;const b=G.add3L(K,N,m);r=G.add3H(b,I,q,y),i=b|0}({h:r,l:i}=G.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=G.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:a}=G.add(this.Ch|0,this.Cl|0,c|0,a|0),{h:f,l:u}=G.add(this.Dh|0,this.Dl|0,f|0,u|0),{h:d,l}=G.add(this.Eh|0,this.El|0,d|0,l|0),{h,l:g}=G.add(this.Fh|0,this.Fl|0,h|0,g|0),{h:p,l:x}=G.add(this.Gh|0,this.Gl|0,p|0,x|0),{h:_,l:C}=G.add(this.Hh|0,this.Hl|0,_|0,C|0),this.set(r,i,o,s,c,a,f,u,d,l,h,g,p,x,_,C)}roundClean(){Nt.fill(0),$t.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Bw=Gp(()=>new Dw);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ko=BigInt(0),iu=BigInt(1),Aw=BigInt(2);function Wo(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Zo(e){if(!Wo(e))throw new Error("Uint8Array expected")}function Yo(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const Sw=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Go(e){Zo(e);let t="";for(let n=0;n<e.length;n++)t+=Sw[e[n]];return t}function ou(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Ko:BigInt("0x"+e)}const ft={_0:48,_9:57,A:65,F:70,a:97,f:102};function su(e){if(e>=ft._0&&e<=ft._9)return e-ft._0;if(e>=ft.A&&e<=ft.F)return e-(ft.A-10);if(e>=ft.a&&e<=ft.f)return e-(ft.a-10)}function cu(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=su(e.charCodeAt(o)),c=su(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function _w(e){return ou(Go(e))}function jr(e){return Zo(e),ou(Go(Uint8Array.from(e).reverse()))}function au(e,t){return cu(e.toString(16).padStart(t*2,"0"))}function Xo(e,t){return au(e,t).reverse()}function ut(e,t,n){let r;if(typeof t=="string")try{r=cu(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Wo(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function fu(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Zo(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}const Jo=e=>typeof e=="bigint"&&Ko<=e;function Uw(e,t,n){return Jo(e)&&Jo(t)&&Jo(n)&&t<=e&&e<n}function Zn(e,t,n,r){if(!Uw(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Iw(e){let t;for(t=0;e>Ko;e>>=iu,t+=1);return t}const Ow=e=>(Aw<<BigInt(e-1))-iu,Cw={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Wo(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Qo(e,t,n={}){const r=(i,o,s)=>{const c=Cw[o];if(typeof c!="function")throw new Error("invalid validator function");const a=e[i];if(!(s&&a===void 0)&&!c(a,e))throw new Error("param "+String(i)+" is invalid. Expected "+o+", got "+a)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}function uu(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}const se=BigInt(0),te=BigInt(1),en=BigInt(2),Tw=BigInt(3),es=BigInt(4),lu=BigInt(5),du=BigInt(8);function ie(e,t){const n=e%t;return n>=se?n:t+n}function Nw(e,t,n){if(t<se)throw new Error("invalid exponent, negatives unsupported");if(n<=se)throw new Error("invalid modulus");if(n===te)return se;let r=te;for(;t>se;)t&te&&(r=r*e%n),e=e*e%n,t>>=te;return r}function et(e,t,n){let r=e;for(;t-- >se;)r*=r,r%=n;return r}function hu(e,t){if(e===se)throw new Error("invert: expected non-zero number");if(t<=se)throw new Error("invert: expected positive modulus, got "+t);let n=ie(e,t),r=t,i=se,o=te;for(;n!==se;){const s=r/n,c=r%n,a=i-o*s;r=n,n=c,i=o,o=a}if(r!==te)throw new Error("invert: does not exist");return ie(i,t)}function $w(e){const t=(e-te)/en;let n,r,i;for(n=e-te,r=0;n%en===se;n/=en,r++);for(i=en;i<e&&Nw(i,t,e)!==e-te;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const s=(e+te)/es;return function(c,a){const f=c.pow(a,s);if(!c.eql(c.sqr(f),a))throw new Error("Cannot find square root");return f}}const o=(n+te)/en;return function(s,c){if(s.pow(c,t)===s.neg(s.ONE))throw new Error("Cannot find square root");let a=r,f=s.pow(s.mul(s.ONE,i),n),u=s.pow(c,o),d=s.pow(c,n);for(;!s.eql(d,s.ONE);){if(s.eql(d,s.ZERO))return s.ZERO;let l=1;for(let g=s.sqr(d);l<a&&!s.eql(g,s.ONE);l++)g=s.sqr(g);const h=s.pow(f,te<<BigInt(a-l-1));f=s.sqr(h),u=s.mul(u,h),d=s.mul(d,f),a=l}return u}}function Rw(e){if(e%es===Tw){const t=(e+te)/es;return function(n,r){const i=n.pow(r,t);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(e%du===lu){const t=(e-lu)/du;return function(n,r){const i=n.mul(r,en),o=n.pow(i,t),s=n.mul(r,o),c=n.mul(n.mul(s,en),o),a=n.mul(s,n.sub(c,n.ONE));if(!n.eql(n.sqr(a),r))throw new Error("Cannot find square root");return a}}return $w(e)}const Fw=(e,t)=>(ie(e,t)&te)===te,Mw=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Pw(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Mw.reduce((r,i)=>(r[i]="function",r),t);return Qo(e,n)}function kw(e,t,n){if(n<se)throw new Error("invalid exponent, negatives unsupported");if(n===se)return e.ONE;if(n===te)return t;let r=e.ONE,i=t;for(;n>se;)n&te&&(r=e.mul(r,i)),i=e.sqr(i),n>>=te;return r}function Lw(e,t){const n=new Array(t.length),r=t.reduce((o,s,c)=>e.is0(s)?o:(n[c]=o,e.mul(o,s)),e.ONE),i=e.inv(r);return t.reduceRight((o,s,c)=>e.is0(s)?o:(n[c]=e.mul(o,n[c]),e.mul(o,s)),i),n}function gu(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function bu(e,t,n=!1,r={}){if(e<=se)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:o}=gu(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const c=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:o,MASK:Ow(i),ZERO:se,ONE:te,create:a=>ie(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return se<=a&&a<e},is0:a=>a===se,isOdd:a=>(a&te)===te,neg:a=>ie(-a,e),eql:(a,f)=>a===f,sqr:a=>ie(a*a,e),add:(a,f)=>ie(a+f,e),sub:(a,f)=>ie(a-f,e),mul:(a,f)=>ie(a*f,e),pow:(a,f)=>kw(c,a,f),div:(a,f)=>ie(a*hu(f,e),e),sqrN:a=>a*a,addN:(a,f)=>a+f,subN:(a,f)=>a-f,mulN:(a,f)=>a*f,inv:a=>hu(a,e),sqrt:r.sqrt||(a=>(s||(s=Rw(e)),s(c,a))),invertBatch:a=>Lw(c,a),cmov:(a,f,u)=>u?f:a,toBytes:a=>n?Xo(a,o):au(a,o),fromBytes:a=>{if(a.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+a.length);return n?jr(a):_w(a)}});return Object.freeze(c)}const pu=BigInt(0),Vr=BigInt(1);function ts(e,t){const n=t.negate();return e?n:t}function wu(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function ns(e,t){wu(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function zw(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Hw(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const rs=new WeakMap,yu=new WeakMap;function is(e){return yu.get(e)||1}function jw(e,t){return{constTimeNegate:ts,hasPrecomputes(n){return is(n)!==1},unsafeLadder(n,r,i=e.ZERO){let o=n;for(;r>pu;)r&Vr&&(i=i.add(o)),o=o.double(),r>>=Vr;return i},precomputeWindow(n,r){const{windows:i,windowSize:o}=ns(r,t),s=[];let c=n,a=c;for(let f=0;f<i;f++){a=c,s.push(a);for(let u=1;u<o;u++)a=a.add(c),s.push(a);c=a.double()}return s},wNAF(n,r,i){const{windows:o,windowSize:s}=ns(n,t);let c=e.ZERO,a=e.BASE;const f=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let l=0;l<o;l++){const h=l*s;let g=Number(i&f);i>>=d,g>s&&(g-=u,i+=Vr);const p=h,x=h+Math.abs(g)-1,_=l%2!==0,C=g<0;g===0?a=a.add(ts(_,r[p])):c=c.add(ts(C,r[x]))}return{p:c,f:a}},wNAFUnsafe(n,r,i,o=e.ZERO){const{windows:s,windowSize:c}=ns(n,t),a=BigInt(2**n-1),f=2**n,u=BigInt(n);for(let d=0;d<s;d++){const l=d*c;if(i===pu)break;let h=Number(i&a);if(i>>=u,h>c&&(h-=f,i+=Vr),h===0)continue;let g=r[l+Math.abs(h)-1];h<0&&(g=g.negate()),o=o.add(g)}return o},getPrecomputes(n,r,i){let o=rs.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&rs.set(r,i(o))),o},wNAFCached(n,r,i){const o=is(n);return this.wNAF(o,this.getPrecomputes(o,n,i),r)},wNAFCachedUnsafe(n,r,i,o){const s=is(n);return s===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,n,i),r,o)},setWindowSize(n,r){wu(r,t),yu.set(n,r),rs.delete(n)}}}function Vw(e,t,n,r){if(zw(n,e),Hw(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,o=Iw(BigInt(n.length)),s=o>12?o-3:o>4?o-2:o?2:1,c=(1<<s)-1,a=new Array(c+1).fill(i),f=Math.floor((t.BITS-1)/s)*s;let u=i;for(let d=f;d>=0;d-=s){a.fill(i);for(let h=0;h<r.length;h++){const g=r[h],p=Number(g>>BigInt(d)&BigInt(c));a[p]=a[p].add(n[h])}let l=i;for(let h=a.length-1,g=i;h>0;h--)g=g.add(a[h]),l=l.add(g);if(u=u.add(l),d!==0)for(let h=0;h<s;h++)u=u.double()}return u}function qw(e){return Pw(e.Fp),Qo(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...gu(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const Ze=BigInt(0),_e=BigInt(1),qr=BigInt(2),Kw=BigInt(8),Ww={zip215:!0};function Zw(e){const t=qw(e);return Qo(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Yw(e){const t=Zw(e),{Fp:n,n:r,prehash:i,hash:o,randomBytes:s,nByteLength:c,h:a}=t,f=qr<<BigInt(c*8)-_e,u=n.create,d=bu(t.n,t.nBitLength),l=t.uvRatio||((b,w)=>{try{return{isValid:!0,value:n.sqrt(b*n.inv(w))}}catch{return{isValid:!1,value:Ze}}}),h=t.adjustScalarBytes||(b=>b),g=t.domain||((b,w,v)=>{if(Yo("phflag",v),w.length||v)throw new Error("Contexts/pre-hash are not supported");return b});function p(b,w){Zn("coordinate "+b,w,Ze,f)}function x(b){if(!(b instanceof B))throw new Error("ExtendedPoint expected")}const _=uu((b,w)=>{const{ex:v,ey:A,ez:D}=b,S=b.is0();w==null&&(w=S?Kw:n.inv(D));const U=u(v*w),O=u(A*w),P=u(D*w);if(S)return{x:Ze,y:_e};if(P!==_e)throw new Error("invZ was invalid");return{x:U,y:O}}),C=uu(b=>{const{a:w,d:v}=t;if(b.is0())throw new Error("bad point: ZERO");const{ex:A,ey:D,ez:S,et:U}=b,O=u(A*A),P=u(D*D),F=u(S*S),$=u(F*F),H=u(O*w),V=u(F*u(H+P)),W=u($+u(v*u(O*P)));if(V!==W)throw new Error("bad point: equation left != right (1)");const j=u(A*D),Z=u(S*U);if(j!==Z)throw new Error("bad point: equation left != right (2)");return!0});class B{constructor(w,v,A,D){this.ex=w,this.ey=v,this.ez=A,this.et=D,p("x",w),p("y",v),p("z",A),p("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof B)throw new Error("extended point not allowed");const{x:v,y:A}=w||{};return p("x",v),p("y",A),new B(v,A,_e,u(v*A))}static normalizeZ(w){const v=n.invertBatch(w.map(A=>A.ez));return w.map((A,D)=>A.toAffine(v[D])).map(B.fromAffine)}static msm(w,v){return Vw(B,d,w,v)}_setWindowSize(w){L.setWindowSize(this,w)}assertValidity(){C(this)}equals(w){x(w);const{ex:v,ey:A,ez:D}=this,{ex:S,ey:U,ez:O}=w,P=u(v*O),F=u(S*D),$=u(A*O),H=u(U*D);return P===F&&$===H}is0(){return this.equals(B.ZERO)}negate(){return new B(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:w}=t,{ex:v,ey:A,ez:D}=this,S=u(v*v),U=u(A*A),O=u(qr*u(D*D)),P=u(w*S),F=v+A,$=u(u(F*F)-S-U),H=P+U,V=H-O,W=P-U,j=u($*V),Z=u(H*W),oe=u($*W),Fe=u(V*H);return new B(j,Z,Fe,oe)}add(w){x(w);const{a:v,d:A}=t,{ex:D,ey:S,ez:U,et:O}=this,{ex:P,ey:F,ez:$,et:H}=w;if(v===BigInt(-1)){const id=u((S-D)*(F+P)),od=u((S+D)*(F-P)),_s=u(od-id);if(_s===Ze)return this.double();const sd=u(U*qr*H),cd=u(O*qr*$),ad=cd+sd,fd=od+id,ud=cd-sd,EE=u(ad*_s),xE=u(fd*ud),vE=u(ad*ud),DE=u(_s*fd);return new B(EE,xE,DE,vE)}const V=u(D*P),W=u(S*F),j=u(O*A*H),Z=u(U*$),oe=u((D+S)*(P+F)-V-W),Fe=Z-j,Ye=Z+j,sr=u(W-v*V),ni=u(oe*Fe),wE=u(Ye*sr),yE=u(oe*sr),mE=u(Fe*Ye);return new B(ni,wE,mE,yE)}subtract(w){return this.add(w.negate())}wNAF(w){return L.wNAFCached(this,w,B.normalizeZ)}multiply(w){const v=w;Zn("scalar",v,_e,r);const{p:A,f:D}=this.wNAF(v);return B.normalizeZ([A,D])[0]}multiplyUnsafe(w,v=B.ZERO){const A=w;return Zn("scalar",A,Ze,r),A===Ze?R:this.is0()||A===_e?this:L.wNAFCachedUnsafe(this,A,B.normalizeZ,v)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return L.unsafeLadder(this,r).is0()}toAffine(w){return _(this,w)}clearCofactor(){const{h:w}=t;return w===_e?this:this.multiplyUnsafe(w)}static fromHex(w,v=!1){const{d:A,a:D}=t,S=n.BYTES;w=ut("pointHex",w,S),Yo("zip215",v);const U=w.slice(),O=w[S-1];U[S-1]=O&-129;const P=jr(U),F=v?f:n.ORDER;Zn("pointHex.y",P,Ze,F);const $=u(P*P),H=u($-_e),V=u(A*$-D);let{isValid:W,value:j}=l(H,V);if(!W)throw new Error("Point.fromHex: invalid y coordinate");const Z=(j&_e)===_e,oe=(O&128)!==0;if(!v&&j===Ze&&oe)throw new Error("Point.fromHex: x=0 and x_0=1");return oe!==Z&&(j=u(-j)),B.fromAffine({x:j,y:P})}static fromPrivateKey(w){return I(w).point}toRawBytes(){const{x:w,y:v}=this.toAffine(),A=Xo(v,n.BYTES);return A[A.length-1]|=w&_e?128:0,A}toHex(){return Go(this.toRawBytes())}}B.BASE=new B(t.Gx,t.Gy,_e,u(t.Gx*t.Gy)),B.ZERO=new B(Ze,_e,_e,Ze);const{BASE:T,ZERO:R}=B,L=jw(B,c*8);function k(b){return ie(b,r)}function M(b){return k(jr(b))}function I(b){const w=n.BYTES;b=ut("private key",b,w);const v=ut("hashed private key",o(b),2*w),A=h(v.slice(0,w)),D=v.slice(w,2*w),S=M(A),U=T.multiply(S),O=U.toRawBytes();return{head:A,prefix:D,scalar:S,point:U,pointBytes:O}}function K(b){return I(b).pointBytes}function q(b=new Uint8Array,...w){const v=fu(...w);return M(o(g(v,ut("context",b),!!i)))}function N(b,w,v={}){b=ut("message",b),i&&(b=i(b));const{prefix:A,scalar:D,pointBytes:S}=I(w),U=q(v.context,A,b),O=T.multiply(U).toRawBytes(),P=q(v.context,O,S,b),F=k(U+P*D);Zn("signature.s",F,Ze,r);const $=fu(O,Xo(F,n.BYTES));return ut("result",$,n.BYTES*2)}const y=Ww;function m(b,w,v,A=y){const{context:D,zip215:S}=A,U=n.BYTES;b=ut("signature",b,2*U),w=ut("message",w),v=ut("publicKey",v,U),S!==void 0&&Yo("zip215",S),i&&(w=i(w));const O=jr(b.slice(U,2*U));let P,F,$;try{P=B.fromHex(v,S),F=B.fromHex(b.slice(0,U),S),$=T.multiplyUnsafe(O)}catch{return!1}if(!S&&P.isSmallOrder())return!1;const H=q(D,F.toRawBytes(),P.toRawBytes(),w);return F.add(P.multiplyUnsafe(H)).subtract($).clearCofactor().equals(B.ZERO)}return T._setWindowSize(8),{CURVE:t,getPublicKey:K,sign:N,verify:m,ExtendedPoint:B,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>s(n.BYTES),precompute(b=8,w=B.BASE){return w._setWindowSize(b),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const os=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),mu=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Gw=BigInt(1),Eu=BigInt(2);BigInt(3);const Xw=BigInt(5),Jw=BigInt(8);function Qw(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),o=os,s=e*e%o*e%o,c=et(s,Eu,o)*s%o,a=et(c,Gw,o)*e%o,f=et(a,Xw,o)*a%o,u=et(f,t,o)*f%o,d=et(u,n,o)*u%o,l=et(d,r,o)*d%o,h=et(l,i,o)*l%o,g=et(h,i,o)*l%o,p=et(g,t,o)*f%o;return{pow_p_5_8:et(p,Eu,o)*e%o,b2:s}}function e2(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function t2(e,t){const n=os,r=ie(t*t*t,n),i=ie(r*r*t,n),o=Qw(e*i).pow_p_5_8;let s=ie(e*r*o,n);const c=ie(t*s*s,n),a=s,f=ie(s*mu,n),u=c===e,d=c===ie(-e,n),l=c===ie(-e*mu,n);return u&&(s=a),(d||l)&&(s=f),Fw(s,n)&&(s=ie(-s,n)),{isValid:u||d,value:s}}const n2=bu(os,void 0,!0),r2={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:n2,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Jw,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Bw,randomBytes:Xp,adjustScalarBytes:e2,uvRatio:t2};Yw(r2);const xu=".",vu="base64url",i2="utf8",o2="utf8";function Du(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function s2(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Du(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function c2(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var c=e.length,a=e.charAt(0),f=Math.log(c)/Math.log(256),u=Math.log(256)/Math.log(c);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,x=0,_=0,C=g.length;_!==C&&g[_]===0;)_++,p++;for(var B=(C-_)*u+1>>>0,T=new Uint8Array(B);_!==C;){for(var R=g[_],L=0,k=B-1;(R!==0||L<x)&&k!==-1;k--,L++)R+=256*T[k]>>>0,T[k]=R%c>>>0,R=R/c>>>0;if(R!==0)throw new Error("Non-zero carry");x=L,_++}for(var M=B-x;M!==B&&T[M]===0;)M++;for(var I=a.repeat(p);M<B;++M)I+=e.charAt(T[M]);return I}function l(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var x=0,_=0;g[p]===a;)x++,p++;for(var C=(g.length-p)*f+1>>>0,B=new Uint8Array(C);g[p];){var T=n[g.charCodeAt(p)];if(T===255)return;for(var R=0,L=C-1;(T!==0||R<_)&&L!==-1;L--,R++)T+=c*B[L]>>>0,B[L]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=R,p++}if(g[p]!==" "){for(var k=C-_;k!==C&&B[k]===0;)k++;for(var M=new Uint8Array(x+(C-k)),I=x;k!==C;)M[I++]=B[k++];return M}}}function h(g){var p=l(g);if(p)return p;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:l,decode:h}}var a2=c2,f2=a2;const Bu=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},u2=e=>new TextEncoder().encode(e),l2=e=>new TextDecoder().decode(e);class d2{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class h2{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Au(this,t)}}class g2{constructor(t){this.decoders=t}or(t){return Au(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Au=(e,t)=>new g2({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class b2{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new d2(t,n,r),this.decoder=new h2(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Kr=({name:e,prefix:t,encode:n,decode:r})=>new b2(e,t,n,r),Yn=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=f2(n,t);return Kr({prefix:e,name:t,encode:r,decode:o=>Bu(i(o))})},p2=(e,t,n,r)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*n/8|0);let c=0,a=0,f=0;for(let u=0;u<o;++u){const d=i[e[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);a=a<<n|d,c+=n,c>=8&&(c-=8,s[f++]=255&a>>c)}if(c>=n||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},w2=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let o="",s=0,c=0;for(let a=0;a<e.length;++a)for(c=c<<8|e[a],s+=8;s>n;)s-=n,o+=t[i&c>>s];if(s&&(o+=t[i&c<<n-s]),r)for(;o.length*n&7;)o+="=";return o},ae=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Kr({prefix:t,name:e,encode(i){return w2(i,r,n)},decode(i){return p2(i,r,n,e)}}),y2=Kr({prefix:"\0",name:"identity",encode:e=>l2(e),decode:e=>u2(e)});var m2=Object.freeze({__proto__:null,identity:y2});const E2=ae({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var x2=Object.freeze({__proto__:null,base2:E2});const v2=ae({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var D2=Object.freeze({__proto__:null,base8:v2});const B2=Yn({prefix:"9",name:"base10",alphabet:"0123456789"});var A2=Object.freeze({__proto__:null,base10:B2});const S2=ae({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_2=ae({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var U2=Object.freeze({__proto__:null,base16:S2,base16upper:_2});const I2=ae({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),O2=ae({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),C2=ae({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),T2=ae({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),N2=ae({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$2=ae({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),R2=ae({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),F2=ae({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),M2=ae({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var P2=Object.freeze({__proto__:null,base32:I2,base32upper:O2,base32pad:C2,base32padupper:T2,base32hex:N2,base32hexupper:$2,base32hexpad:R2,base32hexpadupper:F2,base32z:M2});const k2=Yn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),L2=Yn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var z2=Object.freeze({__proto__:null,base36:k2,base36upper:L2});const H2=Yn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),j2=Yn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var V2=Object.freeze({__proto__:null,base58btc:H2,base58flickr:j2});const q2=ae({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),K2=ae({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),W2=ae({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Z2=ae({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Y2=Object.freeze({__proto__:null,base64:q2,base64pad:K2,base64url:W2,base64urlpad:Z2});const Su=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),G2=Su.reduce((e,t,n)=>(e[n]=t,e),[]),X2=Su.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function J2(e){return e.reduce((t,n)=>(t+=G2[n],t),"")}function Q2(e){const t=[];for(const n of e){const r=X2[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const ey=Kr({prefix:"\u{1F680}",name:"base256emoji",encode:J2,decode:Q2});var ty=Object.freeze({__proto__:null,base256emoji:ey}),ny=Uu,_u=128,ry=127,iy=~ry,oy=Math.pow(2,31);function Uu(e,t,n){t=t||[],n=n||0;for(var r=n;e>=oy;)t[n++]=e&255|_u,e/=128;for(;e&iy;)t[n++]=e&255|_u,e>>>=7;return t[n]=e|0,Uu.bytes=n-r+1,t}var sy=ss,cy=128,Iu=127;function ss(e,r){var n=0,r=r||0,i=0,o=r,s,c=e.length;do{if(o>=c)throw ss.bytes=0,new RangeError("Could not decode varint");s=e[o++],n+=i<28?(s&Iu)<<i:(s&Iu)*Math.pow(2,i),i+=7}while(s>=cy);return ss.bytes=o-r,n}var ay=Math.pow(2,7),fy=Math.pow(2,14),uy=Math.pow(2,21),ly=Math.pow(2,28),dy=Math.pow(2,35),hy=Math.pow(2,42),gy=Math.pow(2,49),by=Math.pow(2,56),py=Math.pow(2,63),wy=function(e){return e<ay?1:e<fy?2:e<uy?3:e<ly?4:e<dy?5:e<hy?6:e<gy?7:e<by?8:e<py?9:10},yy={encode:ny,decode:sy,encodingLength:wy},Ou=yy;const Cu=(e,t,n=0)=>(Ou.encode(e,t,n),t),Tu=e=>Ou.encodingLength(e),cs=(e,t)=>{const n=t.byteLength,r=Tu(e),i=r+Tu(n),o=new Uint8Array(i+n);return Cu(e,o,0),Cu(n,o,r),o.set(t,i),new my(e,n,t,o)};class my{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const Nu=({name:e,code:t,encode:n})=>new Ey(e,t,n);class Ey{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?cs(this.code,n):n.then(r=>cs(this.code,r))}else throw Error("Unknown type, must be binary type")}}const $u=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),xy=Nu({name:"sha2-256",code:18,encode:$u("SHA-256")}),vy=Nu({name:"sha2-512",code:19,encode:$u("SHA-512")});var Dy=Object.freeze({__proto__:null,sha256:xy,sha512:vy});const Ru=0,By="identity",Fu=Bu;var Ay=Object.freeze({__proto__:null,identity:{code:Ru,name:By,encode:Fu,digest:e=>cs(Ru,Fu(e))}});new TextEncoder,new TextDecoder;const Mu={...m2,...x2,...D2,...A2,...U2,...P2,...z2,...V2,...Y2,...ty};({...Dy,...Ay});function Pu(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const ku=Pu("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),as=Pu("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=s2(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),Lu={utf8:ku,"utf-8":ku,hex:Mu.base16,latin1:as,ascii:as,binary:as,...Mu};function Sy(e,t="utf8"){const n=Lu[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function fs(e,t="utf8"){const n=Lu[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Du(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function zu(e){return qp(Sy(fs(e,vu),i2))}function _y(e){return fs(e,vu)}function Uy(e){const t=e.split(xu),n=zu(t[0]),r=zu(t[1]),i=_y(t[2]),o=fs(t.slice(0,2).join(xu),o2);return{header:n,payload:r,signature:i,data:o}}function us(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Hu(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?us(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Gn(e,t){t||(t=e.reduce((i,o)=>i+o.length,0));const n=Hu(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return us(n)}function Iy(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var c=e.length,a=e.charAt(0),f=Math.log(c)/Math.log(256),u=Math.log(256)/Math.log(c);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,x=0,_=0,C=g.length;_!==C&&g[_]===0;)_++,p++;for(var B=(C-_)*u+1>>>0,T=new Uint8Array(B);_!==C;){for(var R=g[_],L=0,k=B-1;(R!==0||L<x)&&k!==-1;k--,L++)R+=256*T[k]>>>0,T[k]=R%c>>>0,R=R/c>>>0;if(R!==0)throw new Error("Non-zero carry");x=L,_++}for(var M=B-x;M!==B&&T[M]===0;)M++;for(var I=a.repeat(p);M<B;++M)I+=e.charAt(T[M]);return I}function l(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var x=0,_=0;g[p]===a;)x++,p++;for(var C=(g.length-p)*f+1>>>0,B=new Uint8Array(C);g[p];){var T=n[g.charCodeAt(p)];if(T===255)return;for(var R=0,L=C-1;(T!==0||R<_)&&L!==-1;L--,R++)T+=c*B[L]>>>0,B[L]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");_=R,p++}if(g[p]!==" "){for(var k=C-_;k!==C&&B[k]===0;)k++;for(var M=new Uint8Array(x+(C-k)),I=x;k!==C;)M[I++]=B[k++];return M}}}function h(g){var p=l(g);if(p)return p;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:l,decode:h}}var Oy=Iy,Cy=Oy;const ju=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Ty=e=>new TextEncoder().encode(e),Ny=e=>new TextDecoder().decode(e);class $y{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Ry{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Vu(this,t)}}class Fy{constructor(t){this.decoders=t}or(t){return Vu(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Vu=(e,t)=>new Fy({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class My{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new $y(t,n,r),this.decoder=new Ry(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Wr=({name:e,prefix:t,encode:n,decode:r})=>new My(e,t,n,r),Xn=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=Cy(n,t);return Wr({prefix:e,name:t,encode:r,decode:o=>ju(i(o))})},Py=(e,t,n,r)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*n/8|0);let c=0,a=0,f=0;for(let u=0;u<o;++u){const d=i[e[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);a=a<<n|d,c+=n,c>=8&&(c-=8,s[f++]=255&a>>c)}if(c>=n||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},ky=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let o="",s=0,c=0;for(let a=0;a<e.length;++a)for(c=c<<8|e[a],s+=8;s>n;)s-=n,o+=t[i&c>>s];if(s&&(o+=t[i&c<<n-s]),r)for(;o.length*n&7;)o+="=";return o},fe=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Wr({prefix:t,name:e,encode(i){return ky(i,r,n)},decode(i){return Py(i,r,n,e)}}),Ly=Wr({prefix:"\0",name:"identity",encode:e=>Ny(e),decode:e=>Ty(e)});var zy=Object.freeze({__proto__:null,identity:Ly});const Hy=fe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var jy=Object.freeze({__proto__:null,base2:Hy});const Vy=fe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var qy=Object.freeze({__proto__:null,base8:Vy});const Ky=Xn({prefix:"9",name:"base10",alphabet:"0123456789"});var Wy=Object.freeze({__proto__:null,base10:Ky});const Zy=fe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Yy=fe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Gy=Object.freeze({__proto__:null,base16:Zy,base16upper:Yy});const Xy=fe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Jy=fe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Qy=fe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),em=fe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),tm=fe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nm=fe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rm=fe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),im=fe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),om=fe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var sm=Object.freeze({__proto__:null,base32:Xy,base32upper:Jy,base32pad:Qy,base32padupper:em,base32hex:tm,base32hexupper:nm,base32hexpad:rm,base32hexpadupper:im,base32z:om});const cm=Xn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),am=Xn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var fm=Object.freeze({__proto__:null,base36:cm,base36upper:am});const um=Xn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lm=Xn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var dm=Object.freeze({__proto__:null,base58btc:um,base58flickr:lm});const hm=fe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),gm=fe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),bm=fe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),pm=fe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var wm=Object.freeze({__proto__:null,base64:hm,base64pad:gm,base64url:bm,base64urlpad:pm});const qu=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ym=qu.reduce((e,t,n)=>(e[n]=t,e),[]),mm=qu.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function Em(e){return e.reduce((t,n)=>(t+=ym[n],t),"")}function xm(e){const t=[];for(const n of e){const r=mm[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const vm=Wr({prefix:"\u{1F680}",name:"base256emoji",encode:Em,decode:xm});var Dm=Object.freeze({__proto__:null,base256emoji:vm}),Bm=Wu,Ku=128,Am=127,Sm=~Am,_m=Math.pow(2,31);function Wu(e,t,n){t=t||[],n=n||0;for(var r=n;e>=_m;)t[n++]=e&255|Ku,e/=128;for(;e&Sm;)t[n++]=e&255|Ku,e>>>=7;return t[n]=e|0,Wu.bytes=n-r+1,t}var Um=ls,Im=128,Zu=127;function ls(e,r){var n=0,r=r||0,i=0,o=r,s,c=e.length;do{if(o>=c)throw ls.bytes=0,new RangeError("Could not decode varint");s=e[o++],n+=i<28?(s&Zu)<<i:(s&Zu)*Math.pow(2,i),i+=7}while(s>=Im);return ls.bytes=o-r,n}var Om=Math.pow(2,7),Cm=Math.pow(2,14),Tm=Math.pow(2,21),Nm=Math.pow(2,28),$m=Math.pow(2,35),Rm=Math.pow(2,42),Fm=Math.pow(2,49),Mm=Math.pow(2,56),Pm=Math.pow(2,63),km=function(e){return e<Om?1:e<Cm?2:e<Tm?3:e<Nm?4:e<$m?5:e<Rm?6:e<Fm?7:e<Mm?8:e<Pm?9:10},Lm={encode:Bm,decode:Um,encodingLength:km},Yu=Lm;const Gu=(e,t,n=0)=>(Yu.encode(e,t,n),t),Xu=e=>Yu.encodingLength(e),ds=(e,t)=>{const n=t.byteLength,r=Xu(e),i=r+Xu(n),o=new Uint8Array(i+n);return Gu(e,o,0),Gu(n,o,r),o.set(t,i),new zm(e,n,t,o)};class zm{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const Ju=({name:e,code:t,encode:n})=>new Hm(e,t,n);class Hm{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?ds(this.code,n):n.then(r=>ds(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Qu=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),jm=Ju({name:"sha2-256",code:18,encode:Qu("SHA-256")}),Vm=Ju({name:"sha2-512",code:19,encode:Qu("SHA-512")});var qm=Object.freeze({__proto__:null,sha256:jm,sha512:Vm});const el=0,Km="identity",tl=ju;var Wm=Object.freeze({__proto__:null,identity:{code:el,name:Km,encode:tl,digest:e=>ds(el,tl(e))}});new TextEncoder,new TextDecoder;const nl={...zy,...jy,...qy,...Wy,...Gy,...sm,...fm,...dm,...wm,...Dm};({...qm,...Wm});function rl(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const il=rl("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),hs=rl("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=Hu(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),ol={utf8:il,"utf-8":il,hex:nl.base16,latin1:hs,ascii:hs,binary:hs,...nl};function He(e,t="utf8"){const n=ol[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?us(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function $e(e,t="utf8"){const n=ol[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const gs="base10",De="base16",vn="base64pad",Zr="base64url",Dn="utf8",bs=0,Bn=1,Jn=2,Zm=0,sl=1,Qn=12,ps=32;function Ym(){const e=Lo.utils.randomPrivateKey(),t=Lo.getPublicKey(e);return{privateKey:$e(e,De),publicKey:$e(t,De)}}function Gm(){const e=qe(ps);return $e(e,De)}function Xm(e,t){const n=Lo.getSharedSecret(He(e,De),He(t,De)),r=tp(dr,n,void 0,void 0,ps);return $e(r,De)}function Jm(e){const t=dr(He(e,De));return $e(t,De)}function Qm(e){const t=dr(He(e,Dn));return $e(t,De)}function ws(e){return He(`${e}`,gs)}function tn(e){return Number($e(e,gs))}function cl(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function al(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function e3(e){const t=ws(typeof e.type<"u"?e.type:bs);if(tn(t)===Bn&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?He(e.senderPublicKey,De):void 0,r=typeof e.iv<"u"?He(e.iv,De):qe(Qn),i=He(e.symKey,De),o=vf(i,r).encrypt(He(e.message,Dn)),s=ys({type:t,sealed:o,iv:r,senderPublicKey:n});return e.encoding===Zr?cl(s):s}function t3(e){const t=He(e.symKey,De),{sealed:n,iv:r}=Yr({encoded:e.encoded,encoding:e.encoding}),i=vf(t,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return $e(i,Dn)}function n3(e,t){const n=ws(Jn),r=qe(Qn),i=He(e,Dn),o=ys({type:n,sealed:i,iv:r});return t===Zr?cl(o):o}function r3(e,t){const{sealed:n}=Yr({encoded:e,encoding:t});return $e(n,Dn)}function ys(e){if(tn(e.type)===Jn)return $e(Gn([e.type,e.sealed]),vn);if(tn(e.type)===Bn){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return $e(Gn([e.type,e.senderPublicKey,e.iv,e.sealed]),vn)}return $e(Gn([e.type,e.iv,e.sealed]),vn)}function Yr(e){const t=(e.encoding||vn)===Zr?al(e.encoded):e.encoded,n=He(t,vn),r=n.slice(Zm,sl),i=sl;if(tn(r)===Bn){const a=i+ps,f=a+Qn,u=n.slice(i,a),d=n.slice(a,f),l=n.slice(f);return{type:r,sealed:l,iv:d,senderPublicKey:u}}if(tn(r)===Jn){const a=n.slice(i),f=qe(Qn);return{type:r,sealed:a,iv:f}}const o=i+Qn,s=n.slice(i,o),c=n.slice(o);return{type:r,sealed:c,iv:s}}function i3(e,t){const n=Yr({encoded:e,encoding:t?.encoding});return fl({type:tn(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?$e(n.senderPublicKey,De):void 0,receiverPublicKey:t?.receiverPublicKey})}function fl(e){const t=e?.type||bs;if(t===Bn){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function o3(e){return e.type===Bn&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function s3(e){return e.type===Jn}function ul(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return Gn([new Uint8Array([4]),t,n])}function c3(e,t){const[n,r,i]=e.split("."),o=Buffer.from(al(i),"base64");if(o.length!==64)throw new Error("Invalid signature length");const s=o.slice(0,32),c=o.slice(32,64),a=`${n}.${r}`,f=dr(a),u=ul(t);if(!jp.verify(Gn([s,c]),f,u))throw new Error("Invalid signature");return Uy(e).payload}const a3={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},ll="irn";function f3(e){return e?.relay||{protocol:ll}}function u3(e){const t=a3[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var l3=Object.defineProperty,d3=Object.defineProperties,h3=Object.getOwnPropertyDescriptors,dl=Object.getOwnPropertySymbols,g3=Object.prototype.hasOwnProperty,b3=Object.prototype.propertyIsEnumerable,hl=(e,t,n)=>t in e?l3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ms=(e,t)=>{for(var n in t||(t={}))g3.call(t,n)&&hl(e,n,t[n]);if(dl)for(var n of dl(t))b3.call(t,n)&&hl(e,n,t[n]);return e},p3=(e,t)=>d3(e,h3(t));function gl(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(i=>{if(i.startsWith(r)){const o=i.replace(r,""),s=e[i];n[o]=s}}),n}function w3(e){if(!e.includes("wc:")){const f=xi(e);f!=null&&f.includes("wc:")&&(e=f)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),i=e.substring(t+1,n).split("@"),o=typeof n<"u"?e.substring(n):"",s=new URLSearchParams(o),c=Object.fromEntries(s.entries()),a=typeof c.methods=="string"?c.methods.split(","):void 0;return{protocol:r,topic:bl(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:gl(c),methods:a,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function bl(e){return e.startsWith("//")?e.substring(2):e}function pl(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(i=>{const o=i,s=n+t+o;e[o]&&(r[s]=e[o])}),r}function y3(e){const t=new URLSearchParams,n=ms(ms(p3(ms({},pl(e.relay)),{symKey:e.symKey}),e.expiryTimestamp&&{expiryTimestamp:e.expiryTimestamp.toString()}),e.methods&&{methods:e.methods.join(",")});return Object.entries(n).sort(([r],[i])=>r.localeCompare(i)).forEach(([r,i])=>{i!==void 0&&t.append(r,String(i))}),`${e.protocol}:${e.topic}@${e.version}?${t}`}function m3(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var E3=Object.defineProperty,x3=Object.defineProperties,v3=Object.getOwnPropertyDescriptors,wl=Object.getOwnPropertySymbols,D3=Object.prototype.hasOwnProperty,B3=Object.prototype.propertyIsEnumerable,yl=(e,t,n)=>t in e?E3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A3=(e,t)=>{for(var n in t||(t={}))D3.call(t,n)&&yl(e,n,t[n]);if(wl)for(var n of wl(t))B3.call(t,n)&&yl(e,n,t[n]);return e},S3=(e,t)=>x3(e,v3(t));function nn(e){const t=[];return e.forEach(n=>{const[r,i]=n.split(":");t.push(`${r}:${i}`)}),t}function ml(e){const t=[];return Object.values(e).forEach(n=>{t.push(...nn(n.accounts))}),t}function El(e,t){const n=[];return Object.values(e).forEach(r=>{nn(r.accounts).includes(t)&&n.push(...r.methods)}),n}function xl(e,t){const n=[];return Object.values(e).forEach(r=>{nn(r.accounts).includes(t)&&n.push(...r.events)}),n}function _3(e,t){const n=Tl(e,t);if(n)throw new Error(n.message);const r={};for(const[i,o]of Object.entries(e))r[i]={methods:o.methods,events:o.events,chains:o.accounts.map(s=>`${s.split(":")[0]}:${s.split(":")[1]}`)};return r}function U3(e){var t;const{proposal:{requiredNamespaces:n,optionalNamespaces:r={}},supportedNamespaces:i}=e,o=er(n),s=er(r),c={};Object.keys(i).forEach(u=>{const d=i[u].chains,l=i[u].methods,h=i[u].events,g=i[u].accounts;d.forEach(p=>{if(!g.some(x=>x.includes(p)))throw new Error(`No accounts provided for chain ${p} in namespace ${u}`)}),c[u]={chains:d,methods:l,events:h,accounts:g}});const a=$l(n,c,"approve()");if(a)throw new Error(a.message);const f={};if(!Object.keys(n).length&&!Object.keys(r).length)return c;Object.keys(o).forEach(u=>{const d=i[u].chains.filter(p=>{var x,_;return(_=(x=o[u])==null?void 0:x.chains)==null?void 0:_.includes(p)}),l=i[u].methods.filter(p=>{var x,_;return(_=(x=o[u])==null?void 0:x.methods)==null?void 0:_.includes(p)}),h=i[u].events.filter(p=>{var x,_;return(_=(x=o[u])==null?void 0:x.events)==null?void 0:_.includes(p)}),g=d.map(p=>i[u].accounts.filter(x=>x.includes(`${p}:`))).flat();f[u]={chains:d,methods:l,events:h,accounts:g}}),Object.keys(s).forEach(u=>{var d,l,h,g,p,x;if(!i[u])return;const _=(l=(d=s[u])==null?void 0:d.chains)==null?void 0:l.filter(R=>i[u].chains.includes(R)),C=i[u].methods.filter(R=>{var L,k;return(k=(L=s[u])==null?void 0:L.methods)==null?void 0:k.includes(R)}),B=i[u].events.filter(R=>{var L,k;return(k=(L=s[u])==null?void 0:L.events)==null?void 0:k.includes(R)}),T=_?.map(R=>i[u].accounts.filter(L=>L.includes(`${R}:`))).flat();f[u]={chains:Me((h=f[u])==null?void 0:h.chains,_),methods:Me((g=f[u])==null?void 0:g.methods,C),events:Me((p=f[u])==null?void 0:p.events,B),accounts:Me((x=f[u])==null?void 0:x.accounts,T)}});for(const[u,d]of Object.entries(f))(d.accounts.length===0||((t=d?.chains)==null?void 0:t.length)===0)&&delete f[u];return f}function Es(e){return e.includes(":")}function vl(e){return Es(e)?e.split(":")[0]:e}function er(e){var t,n,r;const i={};if(!Gr(e))return i;for(const[o,s]of Object.entries(e)){const c=Es(o)?[o]:s.chains,a=s.methods||[],f=s.events||[],u=vl(o);i[u]=S3(A3({},i[u]),{chains:Me(c,(t=i[u])==null?void 0:t.chains),methods:Me(a,(n=i[u])==null?void 0:n.methods),events:Me(f,(r=i[u])==null?void 0:r.events)})}return i}function Dl(e){const t={};return e?.forEach(n=>{var r;const[i,o]=n.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(n),(r=t[i].chains)==null||r.push(`${i}:${o}`)}),t}function I3(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=Dl(t);for(const[r,i]of Object.entries(n))i.methods?i.methods=Me(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return n}function O3(e,t){var n,r,i,o,s,c;const a=er(e),f=er(t),u={},d=Object.keys(a).concat(Object.keys(f));for(const l of d)u[l]={chains:Me((n=a[l])==null?void 0:n.chains,(r=f[l])==null?void 0:r.chains),methods:Me((i=a[l])==null?void 0:i.methods,(o=f[l])==null?void 0:o.methods),events:Me((s=a[l])==null?void 0:s.events,(c=f[l])==null?void 0:c.events)};return u}const Bl={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Al={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function lt(e,t){const{message:n,code:r}=Al[e];return{message:t?`${n} ${t}`:n,code:r}}function rn(e,t){const{message:n,code:r}=Bl[e];return{message:t?`${n} ${t}`:n,code:r}}function tr(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Gr(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Rt(e){return typeof e>"u"}function Re(e,t){return t&&Rt(e)?!0:typeof e=="string"&&!!e.trim().length}function Xr(e,t){return t&&Rt(e)?!0:typeof e=="number"&&!isNaN(e)}function C3(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),i=Object.keys(n);let o=!0;return gt(i,r)?(r.forEach(s=>{const{accounts:c,methods:a,events:f}=e.namespaces[s],u=nn(c),d=n[s];(!gt(cr(s,d),u)||!gt(d.methods,a)||!gt(d.events,f))&&(o=!1)}),o):!1}function nr(e){return Re(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Sl(e){if(Re(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&nr(n)}}return!1}function T3(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Re(e,!1)){if(t(e))return!0;const n=xi(e);return t(n)}}catch{}return!1}function N3(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function $3(e){return e?.topic}function R3(e,t){let n=null;return Re(e?.publicKey,!1)||(n=lt("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function xs(e){let t=!0;return tr(e)?e.length&&(t=e.every(n=>Re(n,!1))):t=!1,t}function _l(e,t,n){let r=null;return tr(t)&&t.length?t.forEach(i=>{r||nr(i)||(r=rn("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):nr(e)||(r=rn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function Ul(e,t,n){let r=null;return Object.entries(e).forEach(([i,o])=>{if(r)return;const s=_l(i,cr(i,o),`${t} ${n}`);s&&(r=s)}),r}function Il(e,t){let n=null;return tr(e)?e.forEach(r=>{n||Sl(r)||(n=rn("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=rn("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Ol(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=Il(r?.accounts,`${t} namespace`);i&&(n=i)}),n}function Cl(e,t){let n=null;return xs(e?.methods)?xs(e?.events)||(n=rn("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=rn("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function vs(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=Cl(r,`${t}, namespace`);i&&(n=i)}),n}function F3(e,t,n){let r=null;if(e&&Gr(e)){const i=vs(e,t);i&&(r=i);const o=Ul(e,t,n);o&&(r=o)}else r=lt("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function Tl(e,t){let n=null;if(e&&Gr(e)){const r=vs(e,t);r&&(n=r);const i=Ol(e,t);i&&(n=i)}else n=lt("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function Nl(e){return Re(e.protocol,!0)}function M3(e,t){let n=!1;return t&&!e?n=!0:e&&tr(e)&&e.length&&e.forEach(r=>{n=Nl(r)}),n}function P3(e){return typeof e=="number"}function k3(e){return typeof e<"u"&&typeof e!==null}function L3(e){return!(!e||typeof e!="object"||!e.code||!Xr(e.code,!1)||!e.message||!Re(e.message,!1))}function z3(e){return!(Rt(e)||!Re(e.method,!1))}function H3(e){return!(Rt(e)||Rt(e.result)&&Rt(e.error)||!Xr(e.id,!1)||!Re(e.jsonrpc,!1))}function j3(e){return!(Rt(e)||!Re(e.name,!1))}function V3(e,t){return!(!nr(t)||!ml(e).includes(t))}function q3(e,t,n){return Re(n,!1)?El(e,t).includes(n):!1}function K3(e,t,n){return Re(n,!1)?xl(e,t).includes(n):!1}function $l(e,t,n){let r=null;const i=W3(e),o=Z3(t),s=Object.keys(i),c=Object.keys(o),a=Rl(Object.keys(e)),f=Rl(Object.keys(t)),u=a.filter(d=>!f.includes(d));return u.length&&(r=lt("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(t).toString()}`)),gt(s,c)||(r=lt("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${s.toString()}
      Approved: ${c.toString()}`)),Object.keys(t).forEach(d=>{if(!d.includes(":")||r)return;const l=nn(t[d].accounts);l.includes(d)||(r=lt("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${l.toString()}`))}),s.forEach(d=>{r||(gt(i[d].methods,o[d].methods)?gt(i[d].events,o[d].events)||(r=lt("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=lt("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function W3(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(i=>{t[i]={methods:e[n].methods,events:e[n].events}})}),t}function Rl(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function Z3(e){const t={};return Object.keys(e).forEach(n=>{if(n.includes(":"))t[n]=e[n];else{const r=nn(e[n].accounts);r?.forEach(i=>{t[i]={accounts:e[n].accounts.filter(o=>o.includes(`${i}:`)),methods:e[n].methods,events:e[n].events}})}}),t}function Y3(e,t){return Xr(e,!1)&&e<=t.max&&e>=t.min}function G3(){const e=jt();return new Promise(t=>{switch(e){case ye.browser:t(Fl());break;case ye.reactNative:t(Ml());break;case ye.node:t(Pl());break;default:t(!0)}})}function Fl(){return an()&&navigator?.onLine}async function Ml(){if(ht()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e?.isConnected}return!0}function Pl(){return!0}function X3(e){switch(jt()){case ye.browser:kl(e);break;case ye.reactNative:Ll(e);break;case ye.node:break}}function kl(e){!ht()&&an()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function Ll(e){ht()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}function J3(){var e;return an()&&cn()?((e=cn())==null?void 0:e.visibilityState)==="visible":!0}const Ds={};class Q3{static get(t){return Ds[t]}static set(t,n){Ds[t]=n}static delete(t){delete Ds[t]}}const eE="Input must be an string, Buffer or Uint8Array";function tE(e){let t;if(e instanceof Uint8Array)t=e;else if(typeof e=="string")t=new TextEncoder().encode(e);else throw new Error(eE);return t}function nE(e){return Array.prototype.map.call(e,function(t){return(t<16?"0":"")+t.toString(16)}).join("")}function Jr(e){return(4294967296+e).toString(16).substring(1)}function rE(e,t,n){let r=`
`+e+" = ";for(let i=0;i<t.length;i+=2){if(n===32)r+=Jr(t[i]).toUpperCase(),r+=" ",r+=Jr(t[i+1]).toUpperCase();else if(n===64)r+=Jr(t[i+1]).toUpperCase(),r+=Jr(t[i]).toUpperCase();else throw new Error("Invalid size "+n);i%6===4?r+=`
`+new Array(e.length+4).join(" "):i<t.length-2&&(r+=" ")}console.log(r)}function iE(e,t,n){let r=new Date().getTime();const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=s%256;const o=new Date().getTime();console.log("Generated random input in "+(o-r)+"ms"),r=o;for(let s=0;s<n;s++){const c=e(i),a=new Date().getTime(),f=a-r;r=a,console.log("Hashed in "+f+"ms: "+c.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(f/1e3)*100)/100+" MB PER SECOND")}}var zl={normalizeInput:tE,toHex:nE,debugPrint:rE,testSpeed:iE};const Qr=zl;function ei(e,t,n){const r=e[t]+e[n];let i=e[t+1]+e[n+1];r>=4294967296&&i++,e[t]=r,e[t+1]=i}function Hl(e,t,n,r){let i=e[t]+n;n<0&&(i+=4294967296);let o=e[t+1]+r;i>=4294967296&&o++,e[t]=i,e[t+1]=o}function jl(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Ft(e,t,n,r,i,o){const s=rr[i],c=rr[i+1],a=rr[o],f=rr[o+1];ei(Y,e,t),Hl(Y,e,s,c);let u=Y[r]^Y[e],d=Y[r+1]^Y[e+1];Y[r]=d,Y[r+1]=u,ei(Y,n,r),u=Y[t]^Y[n],d=Y[t+1]^Y[n+1],Y[t]=u>>>24^d<<8,Y[t+1]=d>>>24^u<<8,ei(Y,e,t),Hl(Y,e,a,f),u=Y[r]^Y[e],d=Y[r+1]^Y[e+1],Y[r]=u>>>16^d<<16,Y[r+1]=d>>>16^u<<16,ei(Y,n,r),u=Y[t]^Y[n],d=Y[t+1]^Y[n+1],Y[t]=d>>>31^u<<1,Y[t+1]=u>>>31^d<<1}const Vl=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),oE=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],pe=new Uint8Array(oE.map(function(e){return e*2})),Y=new Uint32Array(32),rr=new Uint32Array(32);function ql(e,t){let n=0;for(n=0;n<16;n++)Y[n]=e.h[n],Y[n+16]=Vl[n];for(Y[24]=Y[24]^e.t,Y[25]=Y[25]^e.t/4294967296,t&&(Y[28]=~Y[28],Y[29]=~Y[29]),n=0;n<32;n++)rr[n]=jl(e.b,4*n);for(n=0;n<12;n++)Ft(0,8,16,24,pe[n*16+0],pe[n*16+1]),Ft(2,10,18,26,pe[n*16+2],pe[n*16+3]),Ft(4,12,20,28,pe[n*16+4],pe[n*16+5]),Ft(6,14,22,30,pe[n*16+6],pe[n*16+7]),Ft(0,10,20,30,pe[n*16+8],pe[n*16+9]),Ft(2,12,22,24,pe[n*16+10],pe[n*16+11]),Ft(4,14,16,26,pe[n*16+12],pe[n*16+13]),Ft(6,8,18,28,pe[n*16+14],pe[n*16+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^Y[n]^Y[n+16]}const Mt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Kl(e,t,n,r){if(e===0||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};Mt.fill(0),Mt[0]=e,t&&(Mt[1]=t.length),Mt[2]=1,Mt[3]=1,n&&Mt.set(n,32),r&&Mt.set(r,48);for(let o=0;o<16;o++)i.h[o]=Vl[o]^jl(Mt,o*4);return t&&(Bs(i,t),i.c=128),i}function Bs(e,t){for(let n=0;n<t.length;n++)e.c===128&&(e.t+=e.c,ql(e,!1),e.c=0),e.b[e.c++]=t[n]}function Wl(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;ql(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3);return t}function Zl(e,t,n,r,i){n=n||64,e=Qr.normalizeInput(e),r&&(r=Qr.normalizeInput(r)),i&&(i=Qr.normalizeInput(i));const o=Kl(n,t,r,i);return Bs(o,e),Wl(o)}function sE(e,t,n,r,i){const o=Zl(e,t,n,r,i);return Qr.toHex(o)}var cE={blake2b:Zl,blake2bHex:sE,blake2bInit:Kl,blake2bUpdate:Bs,blake2bFinal:Wl};const Yl=zl;function aE(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Pt(e,t,n,r,i,o){J[e]=J[e]+J[t]+i,J[r]=ti(J[r]^J[e],16),J[n]=J[n]+J[r],J[t]=ti(J[t]^J[n],12),J[e]=J[e]+J[t]+o,J[r]=ti(J[r]^J[e],8),J[n]=J[n]+J[r],J[t]=ti(J[t]^J[n],7)}function ti(e,t){return e>>>t^e<<32-t}const Gl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),we=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),J=new Uint32Array(16),ue=new Uint32Array(16);function Xl(e,t){let n=0;for(n=0;n<8;n++)J[n]=e.h[n],J[n+8]=Gl[n];for(J[12]^=e.t,J[13]^=e.t/4294967296,t&&(J[14]=~J[14]),n=0;n<16;n++)ue[n]=aE(e.b,4*n);for(n=0;n<10;n++)Pt(0,4,8,12,ue[we[n*16+0]],ue[we[n*16+1]]),Pt(1,5,9,13,ue[we[n*16+2]],ue[we[n*16+3]]),Pt(2,6,10,14,ue[we[n*16+4]],ue[we[n*16+5]]),Pt(3,7,11,15,ue[we[n*16+6]],ue[we[n*16+7]]),Pt(0,5,10,15,ue[we[n*16+8]],ue[we[n*16+9]]),Pt(1,6,11,12,ue[we[n*16+10]],ue[we[n*16+11]]),Pt(2,7,8,13,ue[we[n*16+12]],ue[we[n*16+13]]),Pt(3,4,9,14,ue[we[n*16+14]],ue[we[n*16+15]]);for(n=0;n<8;n++)e.h[n]^=J[n]^J[n+8]}function Jl(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(Gl),b:new Uint8Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(As(r,t),r.c=64),r}function As(e,t){for(let n=0;n<t.length;n++)e.c===64&&(e.t+=e.c,Xl(e,!1),e.c=0),e.b[e.c++]=t[n]}function Ql(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;Xl(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3)&255;return t}function ed(e,t,n){n=n||32,e=Yl.normalizeInput(e);const r=Jl(n,t);return As(r,e),Ql(r)}function fE(e,t,n){const r=ed(e,t,n);return Yl.toHex(r)}var uE={blake2s:ed,blake2sHex:fE,blake2sInit:Jl,blake2sUpdate:As,blake2sFinal:Ql};const ir=cE,or=uE;var lE={blake2b:ir.blake2b,blake2bHex:ir.blake2bHex,blake2bInit:ir.blake2bInit,blake2bUpdate:ir.blake2bUpdate,blake2bFinal:ir.blake2bFinal,blake2s:or.blake2s,blake2sHex:or.blake2sHex,blake2sInit:or.blake2sInit,blake2sUpdate:or.blake2sUpdate,blake2sFinal:or.blake2sFinal};function td(e){const t=Ln.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function nd({publicKey:e,signature:t,payload:n}){var r;const i=Ss(n.method),o=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),s=hE(n.address),c=n.era==="00"?new Uint8Array([0]):Ss(n.era);if(c.length!==1&&c.length!==2)throw new Error("Invalid era length");const a=parseInt(n.nonce,16),f=new Uint8Array([a&255,a>>8&255]),u=BigInt(`0x${dE(n.tip)}`),d=bE(u),l=new Uint8Array([0,...e,s,...t,...c,...f,...d,...i]),h=gE(l.length+1);return new Uint8Array([...h,o,...l])}function rd(e){const t=Ss(e),n=lE.blake2b(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Ss(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function dE(e){return e.startsWith("0x")?e.slice(2):e}function hE(e){const t=Ln.decode(e)[0];return t===42?0:t===60?2:1}function gE(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function bE(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function pE(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=td(e.transaction.address),r=nd({publicKey:n,signature:t,payload:e.transaction}),i=Buffer.from(r).toString("hex");return rd(i)}E.BASE10=gs,E.BASE16=De,E.BASE64=vn,E.BASE64URL=Zr,E.COLON=xh,E.DEFAULT_DEPTH=wi,E.EMPTY_SPACE=fr,E.ENV_MAP=ye,E.INTERNAL_ERRORS=Al,E.LimitedSet=Xh,E.MemoryStore=Q3,E.ONE_THOUSAND=vh,E.REACT_NATIVE_PRODUCT=Qs,E.RELAYER_DEFAULT_PROTOCOL=ll,E.SDK_ERRORS=Bl,E.SDK_TYPE=tc,E.SLASH=ec,E.TYPE_0=bs,E.TYPE_1=Bn,E.TYPE_2=Jn,E.UTF8=Dn,E.addResourceToRecap=uf,E.addSignatureToExtrinsic=nd,E.appendToQueryString=nc,E.assertType=Oh,E.assignAbilityToActions=Eo,E.base64Decode=af,E.base64Encode=cf,E.buildApprovedNamespaces=U3,E.buildAuthObject=vb,E.buildNamespacesFromAuth=I3,E.buildRecapStatement=df,E.buildSignedExtrinsicHash=pE,E.calcExpiry=Hh,E.capitalize=Fh,E.capitalizeWord=fc,E.createDelayedPromise=Mh,E.createEncodedRecap=Sb,E.createExpiringPromise=Ph,E.createRecap=ff,E.decodeRecap=Ot,E.decodeTypeByte=tn,E.decodeTypeTwoEnvelope=r3,E.decrypt=t3,E.deriveExtrinsicHash=rd,E.deriveSymKey=Xm,E.deserialize=Yr,E.encodeRecap=Cr,E.encodeTypeByte=ws,E.encodeTypeTwoEnvelope=n3,E.encrypt=e3,E.engineEvent=Vh,E.enumify=Rh,E.extractSolanaTransactionId=fb,E.formatAccountId=Is,E.formatAccountWithChain=ld,E.formatChainId=Us,E.formatDeeplinkUrl=uc,E.formatExpirerTarget=mi,E.formatIdTarget=Lh,E.formatMessage=nf,E.formatMessageContext=Ch,E.formatRelayParams=pl,E.formatRelayRpcUrl=Uh,E.formatStatementFromRecap=vo,E.formatTopicTarget=kh,E.formatUA=sc,E.formatUri=y3,E.fromBase64=xi,E.generateKeyPair=Ym,E.generateRandomBytes32=Gm,E.getAccountsChains=nn,E.getAccountsFromNamespaces=hd,E.getAddressFromAccount=Os,E.getAddressesFromAccounts=dd,E.getAlgorandTransactionId=db,E.getAppId=Ah,E.getAppMetadata=rc,E.getBrowserOnlineStatus=Fl,E.getChainFromAccount=Cs,E.getChainsFromAccounts=Ts,E.getChainsFromNamespace=cr,E.getChainsFromNamespaces=gd,E.getChainsFromRecap=Ib,E.getChainsFromRequiredNamespaces=bd,E.getCommonValuesInArrays=Ei,E.getCryptoKeyFromKeyData=ul,E.getDecodedRecapFromResources=rf,E.getDeepLink=Kh,E.getDidAddress=mo,E.getDidAddressSegments=Or,E.getDidChainId=ef,E.getEnvironment=jt,E.getHttpUrl=Ih,E.getInternalError=lt,E.getJavascriptID=oc,E.getJavascriptOS=ic,E.getLastItems=ac,E.getLinkModeURL=m3,E.getMethodsFromRecap=Ub,E.getNamespacedDidChainId=tf,E.getNamespacesChains=ml,E.getNamespacesEventsForChainId=xl,E.getNamespacesFromAccounts=Dl,E.getNamespacesMethodsForChainId=El,E.getNearTransactionIdFromSignedTransaction=lb,E.getNearUint8ArrayFromBytes=Ga,E.getNodeOnlineStatus=Pl,E.getReCapActions=sf,E.getReactNativeOnlineStatus=Ml,E.getRecapAbilitiesFromResource=Ab,E.getRecapFromResources=Tr,E.getRecapResource=of,E.getRelayClientMetadata=_h,E.getRelayProtocolApi=u3,E.getRelayProtocolName=f3,E.getRequiredNamespacesFromNamespaces=_3,E.getSdkError=rn,E.getSearchParamFromURL=Wh,E.getSignDirectHash=hb,E.getSuiDigest=ub,E.getUniqueValues=oi,E.getWalletSendCallsHashes=gb,E.handleDeeplinkRedirect=qh,E.hasOverlap=gt,E.hashEthereumMessage=po,E.hashKey=Jm,E.hashMessage=Qm,E.isAndroid=Dh,E.isAppVisible=J3,E.isBrowser=an,E.isCaipNamespace=Es,E.isConformingNamespaces=$l,E.isExpired=jh,E.isIframe=hc,E.isIos=Bh,E.isNode=yi,E.isOnline=G3,E.isProposalStruct=N3,E.isReactNative=ht,E.isRecap=xo,E.isSessionCompatible=C3,E.isSessionStruct=$3,E.isTelegram=dc,E.isTestRun=Yh,E.isTypeOneEnvelope=o3,E.isTypeTwoEnvelope=s3,E.isUndefined=Rt,E.isValidAccountId=Sl,E.isValidAccounts=Il,E.isValidActions=Cl,E.isValidArray=tr,E.isValidChainId=nr,E.isValidChains=_l,E.isValidController=R3,E.isValidEip1271Signature=Ya,E.isValidEip191Signature=Za,E.isValidErrorReason=L3,E.isValidEvent=j3,E.isValidId=P3,E.isValidNamespaceAccounts=Ol,E.isValidNamespaceActions=vs,E.isValidNamespaceChains=Ul,E.isValidNamespaceMethodsOrEvents=xs,E.isValidNamespaces=Tl,E.isValidNamespacesChainId=V3,E.isValidNamespacesEvent=K3,E.isValidNamespacesRequest=q3,E.isValidNumber=Xr,E.isValidObject=Gr,E.isValidParams=k3,E.isValidRecap=Qe,E.isValidRelay=Nl,E.isValidRelays=M3,E.isValidRequest=z3,E.isValidRequestExpiry=Y3,E.isValidRequiredNamespaces=F3,E.isValidResponse=H3,E.isValidString=Re,E.isValidUrl=T3,E.mapEntries=$h,E.mapToObj=Th,E.mergeArrays=Me,E.mergeEncodedRecaps=_b,E.mergeRecaps=lf,E.mergeRequiredAndOptionalNamespaces=O3,E.normalizeNamespaces=er,E.objToMap=Nh,E.openDeeplink=lc,E.parseAccountId=ii,E.parseChainId=ri,E.parseContextNames=cc,E.parseExpirerTarget=zh,E.parseNamespaceKey=vl,E.parseRelayParams=gl,E.parseTopic=bl,E.parseUri=w3,E.populateAppMetadata=Sh,E.populateAuthPayload=Db,E.recapHasResource=Bb,E.serialize=ys,E.sleep=Gh,E.ss58AddressToPublicKey=td,E.subscribeToBrowserNetworkChange=kl,E.subscribeToNetworkChange=X3,E.subscribeToReactNativeNetworkChange=Ll,E.toBase64=gc,E.uuidv4=Zh,E.validateDecoding=i3,E.validateEncoding=fl,E.validateSignedCacao=xb,E.verifyP256Jwt=c3,E.verifySignature=Wa,Object.defineProperty(E,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
